<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library of Elements â€” Design Stack v2 | Run 2026-02-19_2101</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --primary-purple:#31135D;
  --secondary-purple:rgb(109,49,194);
  --accent-purple:rgb(140,104,238);
  --bg-white:#ffffff;
  --bg-light:#f9fafb;
  --bg-light-gray:#f3f4f6;
  --bg-off-white:rgb(252,250,255);
  --text-dark:#1a1a1a;
  --text-gray:#6b7280;
  --text-light-gray:#9ca3af;
  --text-description:#374151;
  --border-color:#e5e7eb;
  --shadow-sm:0 1px 3px rgba(0,0,0,0.05);
  --shadow-md:0 2px 8px rgba(0,0,0,0.08);
  --shadow-lg:0 4px 16px rgba(0,0,0,0.1);
  --shadow-purple-md:0 4px 8px rgba(49,19,93,0.15);
  --rounded-sm:4px;--rounded-md:6px;--rounded-lg:8px;--rounded-xl:12px;--rounded-2xl:16px;--rounded-pill:20px;
  --font-inter:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  --font-dm:'DM Sans',sans-serif;
  --transition-fast:0.15s;--transition-base:0.2s;--transition-slow:0.3s;
}
html{scroll-behavior:smooth}
body{font-family:var(--font-inter);background:var(--bg-light);color:var(--text-dark);line-height:1.5;-webkit-font-smoothing:antialiased}
.lib-header{background:linear-gradient(135deg,#31135D 0%,#4a1f8a 50%,#5a2d8f 100%);padding:48px 32px 40px;position:relative;overflow:hidden}
.lib-header::before{content:'';position:absolute;top:-60%;right:-10%;width:500px;height:500px;background:radial-gradient(circle,rgba(140,104,238,0.15) 0%,transparent 70%);pointer-events:none}
.lib-header__inner{max-width:1320px;margin:0 auto;position:relative;z-index:1}
.lib-header__badge{display:inline-block;background:rgba(255,255,255,0.12);color:rgba(255,255,255,0.85);font-size:11px;font-weight:600;padding:4px 12px;border-radius:var(--rounded-pill);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:16px;backdrop-filter:blur(4px)}
.lib-header__title{font-size:36px;font-weight:800;color:#fff;margin-bottom:8px;letter-spacing:-0.5px}
.lib-header__sub{font-family:var(--font-dm);font-size:16px;color:rgba(255,255,255,0.7);max-width:600px;line-height:1.6}
.lib-header__meta{display:flex;gap:24px;margin-top:20px;flex-wrap:wrap}
.lib-header__meta-item{font-size:12px;color:rgba(255,255,255,0.55);font-family:var(--font-dm)}
.lib-header__meta-item strong{color:rgba(255,255,255,0.85);font-weight:600}
.lib-toolbar{position:sticky;top:0;z-index:100;background:rgba(255,255,255,0.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border-color);padding:12px 32px;transition:box-shadow var(--transition-base)}
.lib-toolbar.scrolled{box-shadow:var(--shadow-md)}
.lib-toolbar__inner{max-width:1320px;margin:0 auto;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.lib-search{position:relative;flex:1;min-width:220px;max-width:400px}
.lib-search__input{width:100%;padding:9px 14px 9px 36px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);font-family:var(--font-inter);font-size:13px;background:var(--bg-white);color:var(--text-dark);transition:border-color var(--transition-fast);outline:none}
.lib-search__input:focus{border-color:var(--secondary-purple)}
.lib-search__icon{position:absolute;left:11px;top:50%;transform:translateY(-50%);color:var(--text-light-gray);font-size:14px;pointer-events:none}
.lib-filters{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.lib-filter-group{position:relative}
.lib-filter-btn{display:inline-flex;align-items:center;gap:5px;padding:7px 14px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);background:var(--bg-white);font-family:var(--font-inter);font-size:12px;font-weight:500;color:var(--text-gray);cursor:pointer;transition:border-color var(--transition-fast),color var(--transition-fast);white-space:nowrap}
.lib-filter-btn:hover,.lib-filter-btn.active{border-color:var(--secondary-purple);color:var(--secondary-purple)}
.lib-filter-btn .arrow{font-size:10px;margin-left:2px;transition:transform var(--transition-fast)}
.lib-filter-btn.active .arrow{transform:rotate(180deg)}
.lib-filter-dropdown{position:absolute;top:calc(100% + 4px);left:0;min-width:200px;background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-lg);box-shadow:var(--shadow-lg);padding:6px 0;display:none;z-index:200}
.lib-filter-dropdown.open{display:block}
.lib-filter-option{display:flex;align-items:center;gap:8px;padding:8px 14px;font-size:12px;color:var(--text-dark);cursor:pointer;transition:background var(--transition-fast)}
.lib-filter-option:hover{background:var(--bg-light)}
.lib-filter-option input[type=checkbox]{accent-color:var(--secondary-purple)}
.lib-count{font-size:12px;color:var(--text-light-gray);font-family:var(--font-dm);margin-left:auto;white-space:nowrap}
.lib-grid-wrap{max-width:1320px;margin:0 auto;padding:24px 32px 64px}
.lib-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:20px}
.lib-empty{grid-column:1/-1;text-align:center;padding:80px 24px;color:var(--text-light-gray);font-size:15px}
.lib-card{background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-xl);overflow:hidden;transition:box-shadow var(--transition-base),border-color var(--transition-base),transform var(--transition-base);cursor:pointer;display:flex;flex-direction:column}
.lib-card:hover{box-shadow:var(--shadow-purple-md);border-color:rgba(109,49,194,0.25);transform:translateY(-2px)}
.lib-card__preview{width:100%;height:220px;border-bottom:1px solid var(--border-color);background:var(--bg-light);position:relative;overflow:hidden}
.lib-card__preview iframe{width:100%;height:100%;border:none;pointer-events:none;transform-origin:top left}
.lib-card__body{padding:16px 18px;flex:1;display:flex;flex-direction:column}
.lib-card__top-row{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}
.lib-card__cat{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;padding:3px 9px;border-radius:var(--rounded-pill);background:rgba(109,49,194,0.08);color:var(--secondary-purple)}
.lib-card__id{font-size:10px;color:var(--text-light-gray);margin-left:auto;font-family:var(--font-dm)}
.lib-card__name{font-size:16px;font-weight:700;color:var(--text-dark);margin-bottom:6px;line-height:1.3}
.lib-card__desc{font-family:var(--font-dm);font-size:13px;color:var(--text-gray);line-height:1.5;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;flex:1}
.lib-card__phases{display:flex;gap:4px;flex-wrap:wrap;margin-bottom:10px}
.lib-card__phase{font-size:10px;padding:2px 8px;border-radius:var(--rounded-sm);background:var(--bg-light-gray);color:var(--text-gray);font-weight:500}
.lib-card__sources{font-size:10px;color:var(--text-light-gray);font-family:var(--font-dm);border-top:1px solid var(--border-color);padding-top:10px;margin-top:auto}
.lib-card__sources strong{color:var(--text-gray);font-weight:600}
.lib-overlay{position:fixed;inset:0;background:rgba(49,19,93,0.5);z-index:1000;display:none;align-items:flex-start;justify-content:center;padding:40px 24px;overflow-y:auto;backdrop-filter:blur(4px);animation:fadeIn var(--transition-base) ease}
.lib-overlay.open{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.lib-modal{background:var(--bg-white);border-radius:var(--rounded-2xl);width:100%;max-width:900px;box-shadow:0 24px 64px rgba(49,19,93,0.3);animation:slideUp var(--transition-slow) ease;margin-bottom:40px}
.lib-modal__preview{width:100%;min-height:300px;max-height:450px;border-radius:var(--rounded-2xl) var(--rounded-2xl) 0 0;overflow:hidden;background:var(--bg-light);border-bottom:1px solid var(--border-color);position:relative}
.lib-modal__preview iframe{width:100%;height:400px;border:none}
.lib-modal__close{position:absolute;top:14px;right:14px;z-index:10;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.9);border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;color:var(--text-dark);transition:background var(--transition-fast)}
.lib-modal__close:hover{background:var(--bg-white)}
.lib-modal__content{padding:28px 32px 32px}
.lib-modal__header{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.lib-modal__title{font-size:24px;font-weight:800;color:var(--text-dark);flex:1;min-width:200px}
.lib-modal__desc{font-family:var(--font-dm);font-size:14px;color:var(--text-description);line-height:1.7;margin-bottom:24px}
.lib-modal__section{margin-bottom:24px}
.lib-modal__section-title{font-size:13px;font-weight:700;color:var(--primary-purple);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid rgba(109,49,194,0.1)}
.lib-modal__phases-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.lib-modal__sources-row{font-size:12px;color:var(--text-gray);font-family:var(--font-dm)}
.lib-modal__sources-row code{background:var(--bg-light-gray);padding:2px 6px;border-radius:var(--rounded-sm);font-size:11px;color:var(--secondary-purple);margin:0 2px}
@media(max-width:768px){
  .lib-header{padding:32px 20px}.lib-header__title{font-size:26px}
  .lib-toolbar{padding:10px 16px}.lib-grid-wrap{padding:16px 16px 48px}
  .lib-grid{grid-template-columns:1fr;gap:16px}
  .lib-modal__content{padding:20px}.lib-modal{max-width:100%}.lib-overlay{padding:20px 12px}
}
</style>
</head>
<body>
<header class="lib-header">
  <div class="lib-header__inner">
    <span class="lib-header__badge">Design Stack v2 &middot; Layer 8 Element Factory</span>
    <h1 class="lib-header__title">Library of Elements</h1>
    <p class="lib-header__sub">Browsable catalog of production-ready UI elements for the Split Lease host journey. Each element includes live preview and design specs.</p>
    <div class="lib-header__meta">
      <span class="lib-header__meta-item"><strong>Run:</strong> 2026-02-19_2101</span>
      <span class="lib-header__meta-item"><strong>Journey:</strong> Host</span>
      <span class="lib-header__meta-item"><strong>Elements:</strong> 7</span>
      <span class="lib-header__meta-item"><strong>Style:</strong> Split Lease Purple Palette</span>
    </div>
  </div>
</header>

<div class="lib-toolbar" id="toolbar">
  <div class="lib-toolbar__inner">
    <div class="lib-search">
      <span class="lib-search__icon">&#128269;</span>
      <input class="lib-search__input" type="text" id="searchInput" placeholder="Search elements by name or description...">
    </div>
    <div class="lib-filters">
      <div class="lib-filter-group">
        <button class="lib-filter-btn" data-filter="phase">Phase <span class="arrow">&#9662;</span></button>
        <div class="lib-filter-dropdown" data-filter-for="phase">
          <label class="lib-filter-option"><input type="checkbox" value="active_lease"> active lease</label>
          <label class="lib-filter-option"><input type="checkbox" value="listing_creation"> listing creation</label>
          <label class="lib-filter-option"><input type="checkbox" value="pricing"> pricing</label>
          <label class="lib-filter-option"><input type="checkbox" value="proposal_mgmt"> proposal mgmt</label>
          <label class="lib-filter-option"><input type="checkbox" value="retention"> retention</label>
        </div>
      </div>
    </div>
    <span class="lib-count" id="resultCount">7 elements</span>
  </div>
</div>

<div class="lib-grid-wrap">
  <div class="lib-grid" id="elementGrid"></div>
</div>

<div class="lib-overlay" id="modalOverlay">
  <div class="lib-modal" id="modalContent"></div>
</div>

<script>
const ELEMENTS = [
  {
      id: "ds-ui-2101-001",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["listing_creation"],
      priority: "high",
      description: "A dashboard card that shows the host's listing creation progress with a visual step tracker, auto-save confirmation, and one-click resume or pause controls. Becker's insight that the host 'doesn't bite the world off in one piece but in small manageable pieces, as a beaver does' informs the step-by-step design: each completed step is a piece of character armor the host has safely shed, and the progress tracker makes this investment visible. The auto-save indicator ('Saved just now') is the platform whispering 'I have your work' -- delegated power that allows the host to disengage without losing character work. Pause is the first action in the menu, more prominent than any destructive option, channeling the retreat impulse into creative repression rather than listing destruction.",
      html_css_snippet: `<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{background:#f9fafb;display:flex;justify-content:center;padding:40px 16px;font-family:'Inter',sans-serif}.sl-wizard{max-width:480px;width:100%;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:24px;box-shadow:0 2px 4px rgba(49,19,93,0.08)}.sl-wizard__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.sl-wizard__title{font-family:'DM Sans',sans-serif;font-size:18px;font-weight:700;color:#1a1a1a}.sl-wizard__save{font-size:12px;font-weight:500;color:#6b7280;display:flex;align-items:center;gap:4px}.sl-wizard__save svg{width:14px;height:14px;stroke:rgb(109,49,194);fill:none;stroke-width:2}.sl-wizard__encourage{font-size:14px;color:#374151;line-height:1.5;margin-bottom:16px}.sl-wizard__bar{height:6px;background:#f3f4f6;border-radius:3px;margin-bottom:4px;overflow:hidden}.sl-wizard__bar-fill{height:100%;width:67%;background:rgb(109,49,194);border-radius:3px}.sl-wizard__progress{font-size:14px;font-weight:600;color:#31135D;margin-bottom:16px}.sl-wizard__steps{list-style:none;margin-bottom:20px}.sl-wizard__step{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151}.sl-wizard__step:last-child{border-bottom:none}.sl-wizard__icon{width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.sl-wizard__icon--done{background:rgb(109,49,194)}.sl-wizard__icon--done svg{width:12px;height:12px;stroke:#fff;fill:none;stroke-width:2.5}.sl-wizard__icon--current{background:#fef3e2;border:2px solid #c17a28}.sl-wizard__icon--pending{background:#f3f4f6}.sl-wizard__step--current .sl-wizard__label{font-weight:600;color:#1a1a1a}.sl-wizard__actions{display:flex;align-items:center;justify-content:space-between}.sl-wizard__resume{display:inline-flex;align-items:center;gap:6px;background:rgb(109,49,194);color:#fff;border:none;border-radius:8px;padding:10px 20px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;transition:background 0.2s ease}.sl-wizard__resume:hover{background:#31135D}.sl-wizard__resume svg{width:16px;height:16px;stroke:#fff;fill:none;stroke-width:2}.sl-wizard__pause{font-size:13px;font-weight:500;color:#6b7280;background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif}.sl-wizard__pause:hover{text-decoration:underline}</style><div class="sl-wizard"><div class="sl-wizard__header"><h3 class="sl-wizard__title">2BR Williamsburg Walk-Up</h3><span class="sl-wizard__save"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg> Saved just now</span></div><p class="sl-wizard__encourage">Two more steps to go live. Your progress is saved.</p><div class="sl-wizard__bar"><div class="sl-wizard__bar-fill"></div></div><p class="sl-wizard__progress">4 of 6 steps complete</p><ul class="sl-wizard__steps"><li class="sl-wizard__step"><span class="sl-wizard__icon sl-wizard__icon--done"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></span><span class="sl-wizard__label">Your space</span></li><li class="sl-wizard__step"><span class="sl-wizard__icon sl-wizard__icon--done"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></span><span class="sl-wizard__label">Features &amp; amenities</span></li><li class="sl-wizard__step"><span class="sl-wizard__icon sl-wizard__icon--done"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></span><span class="sl-wizard__label">Lease style</span></li><li class="sl-wizard__step"><span class="sl-wizard__icon sl-wizard__icon--done"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></span><span class="sl-wizard__label">Pricing</span></li><li class="sl-wizard__step sl-wizard__step--current"><span class="sl-wizard__icon sl-wizard__icon--current"></span><span class="sl-wizard__label">House rules</span></li><li class="sl-wizard__step"><span class="sl-wizard__icon sl-wizard__icon--pending"></span><span class="sl-wizard__label">Photos</span></li></ul><div class="sl-wizard__actions"><button class="sl-wizard__resume">Continue listing <svg viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></button><button class="sl-wizard__pause">Pause this listing</button></div></div>`
    },
  {
      id: "ds-ui-2101-002",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["proposal_mgmt"],
      priority: "high",
      description: "A proposal review card that resolves the host's stranger-terror by placing guest trust signals (verification badge, review rating, completed stays, stated purpose) above proposal terms (dates, duration, price). Becker's insight that the stranger represents 'billions of individual organismic appetites' informs the trust-first architecture: the host's instinctual threat assessment must be resolved before rational term evaluation can begin. The verification badge is the platform-as-superego made visible -- communicating 'we have vetted this person; you are not forsaken.' The counter-offer button provides temporal control over vulnerability without rejecting the person. The three-button action bar uses graduated visual weight: Accept (filled purple, maximum prominence), Counter (outlined, medium), Decline (text-only, minimum) -- nudging toward the marketplace-sustaining action while preserving the host's sense of choice.",
      html_css_snippet: `<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{background:#f9fafb;display:flex;justify-content:center;padding:40px 16px;font-family:'Inter',sans-serif}.sl-proposal{max-width:520px;width:100%;background:#fff;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px rgba(49,19,93,0.08)}.sl-proposal__trust{background:rgb(252,250,255);padding:24px;display:flex;gap:16px;align-items:flex-start}.sl-proposal__avatar{width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#31135D,rgb(109,49,194));display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;color:#fff;font-family:'DM Sans',sans-serif;font-size:20px;font-weight:700}.sl-proposal__badge{position:absolute;bottom:-2px;right:-2px;width:20px;height:20px;background:rgb(109,49,194);border-radius:50%;border:2px solid rgb(252,250,255);display:flex;align-items:center;justify-content:center}.sl-proposal__badge svg{width:10px;height:10px;stroke:#fff;fill:none;stroke-width:3}.sl-proposal__identity{flex:1}.sl-proposal__name{font-family:'DM Sans',sans-serif;font-size:20px;font-weight:700;color:#1a1a1a;margin-bottom:6px}.sl-proposal__metrics{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.sl-proposal__metric{font-size:13px;font-weight:600;color:rgb(109,49,194);display:flex;align-items:center;gap:4px}.sl-proposal__metric svg{width:14px;height:14px;stroke:rgb(109,49,194);fill:none;stroke-width:2}.sl-proposal__verified{font-size:11px;font-weight:600;color:#31135D;background:rgba(49,19,93,0.08);padding:3px 10px;border-radius:9999px}.sl-proposal__terms{padding:20px 24px;border-top:1px solid #e5e7eb}.sl-proposal__terms-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px 24px;margin-bottom:16px}.sl-proposal__term-label{font-size:12px;font-weight:400;color:#6b7280;margin-bottom:2px}.sl-proposal__term-value{font-size:14px;font-weight:500;color:#1a1a1a}.sl-proposal__message{padding:16px;background:#f9fafb;border-radius:8px;font-size:14px;color:#374151;line-height:1.6}.sl-proposal__actions{padding:20px 24px;display:flex;gap:12px;align-items:center;border-top:1px solid #e5e7eb}.sl-proposal__accept{flex:1;padding:12px 20px;background:rgb(109,49,194);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;transition:background 0.2s ease}.sl-proposal__accept:hover{background:#31135D}.sl-proposal__counter{flex:1;padding:12px 20px;background:#fff;color:rgb(109,49,194);border:2px solid rgb(109,49,194);border-radius:8px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;transition:background 0.2s ease}.sl-proposal__counter:hover{background:rgb(252,250,255)}.sl-proposal__decline{font-size:13px;font-weight:500;color:#9ca3af;background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif;padding:12px 8px;white-space:nowrap}.sl-proposal__decline:hover{color:#6b7280}</style><div class="sl-proposal"><div class="sl-proposal__trust"><div class="sl-proposal__avatar">JR<div class="sl-proposal__badge"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div></div><div class="sl-proposal__identity"><h3 class="sl-proposal__name">Jordan Rivera</h3><div class="sl-proposal__metrics"><span class="sl-proposal__metric"><svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg> 4.9 avg</span><span class="sl-proposal__metric"><svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> 8 stays</span><span class="sl-proposal__verified">Verified ID</span></div></div></div><div class="sl-proposal__terms"><div class="sl-proposal__terms-grid"><div><p class="sl-proposal__term-label">Duration</p><p class="sl-proposal__term-value">10 weeks</p></div><div><p class="sl-proposal__term-label">Start date</p><p class="sl-proposal__term-value">March 15, 2026</p></div><div><p class="sl-proposal__term-label">Schedule</p><p class="sl-proposal__term-value">Mon -- Fri</p></div><div><p class="sl-proposal__term-label">Monthly rate</p><p class="sl-proposal__term-value">\$2,800/mo</p></div></div><div class="sl-proposal__message">Hi! I'm a product designer working a contract in Williamsburg. I keep a tidy space and work mostly from co-working spaces during the day. Looking forward to connecting.</div></div><div class="sl-proposal__actions"><button class="sl-proposal__accept">Accept proposal</button><button class="sl-proposal__counter">Counter-offer</button><button class="sl-proposal__decline">Decline</button></div></div>`
    },
  {
      id: "ds-ui-2101-003",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["pricing"],
      priority: "high",
      description: "A pricing card that presents the platform's recommended price as a confident, pre-decided number -- not an open question. Becker's insight that people 'always rely on something that transcends us, some system of ideas and powers in which we are embedded' informs the visual hierarchy: the recommended price is a 36px hero number in DM Sans that dominates the card, communicating that the platform has already decided. The trust line ('Based on 12 similar rooms in Williamsburg') provides the host with an external authority to lean on. The guaranteed income projection in purple anchors the price to the host's primary anxiety buffer: predictable revenue. The 'Accept this price' button is full-width and prominent; the 'Adjust' link is below and subdued. The entire composition says: here is your price (certainty), here is what it means for you (security), you can change it if you must (agency).",
      html_css_snippet: `<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{background:#f9fafb;display:flex;justify-content:center;padding:40px 16px;font-family:'Inter',sans-serif}.sl-pricing{max-width:440px;width:100%;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:32px;text-align:center;box-shadow:0 2px 4px rgba(49,19,93,0.08)}.sl-pricing__label{font-size:13px;font-weight:500;color:#6b7280;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px}.sl-pricing__price{font-family:'DM Sans',sans-serif;font-size:36px;font-weight:700;color:#31135D;margin-bottom:6px}.sl-pricing__trust{font-size:13px;color:#6b7280;margin-bottom:20px}.sl-pricing__guarantee{font-size:16px;font-weight:600;color:rgb(109,49,194);margin-bottom:24px;display:flex;align-items:center;justify-content:center;gap:6px}.sl-pricing__guarantee svg{width:18px;height:18px;stroke:rgb(109,49,194);fill:none;stroke-width:2}.sl-pricing__range{margin-bottom:24px}.sl-pricing__range-bar{height:4px;background:#f3f4f6;border-radius:2px;position:relative;margin-bottom:8px}.sl-pricing__range-fill{position:absolute;left:20%;right:20%;height:100%;background:rgba(109,49,194,0.3);border-radius:2px}.sl-pricing__range-marker{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:10px;height:10px;background:rgb(109,49,194);border-radius:50%;border:2px solid #fff;box-shadow:0 1px 3px rgba(0,0,0,0.15)}.sl-pricing__range-labels{display:flex;justify-content:space-between;font-size:12px;color:#9ca3af}.sl-pricing__accept{width:100%;padding:14px 24px;background:rgb(109,49,194);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;margin-bottom:12px;transition:background 0.2s ease}.sl-pricing__accept:hover{background:#31135D}.sl-pricing__adjust{font-size:13px;font-weight:500;color:#6b7280;background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif}.sl-pricing__adjust:hover{text-decoration:underline;color:#374151}</style><div class="sl-pricing"><p class="sl-pricing__label">We recommend</p><h2 class="sl-pricing__price">\$2,800/mo</h2><p class="sl-pricing__trust">Based on 12 similar rooms in Williamsburg</p><p class="sl-pricing__guarantee"><svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> \$2,800/mo guaranteed income</p><div class="sl-pricing__range"><div class="sl-pricing__range-bar"><div class="sl-pricing__range-fill"></div><div class="sl-pricing__range-marker"></div></div><div class="sl-pricing__range-labels"><span>\$2,200</span><span>\$3,400</span></div></div><button class="sl-pricing__accept">Accept this price</button><button class="sl-pricing__adjust">Adjust to your preference</button></div>`
    },
  {
      id: "ds-ui-2101-004",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["active_lease"],
      priority: "high",
      description: "A dashboard card that surfaces cleaning photo verification as a ritual moment -- the host confirming their sanctuary survived stranger-contact and was restored. Becker's insight that 'self-preservation implies an effort against some force of disintegration' informs the card design: the photos are large (the host must see their space), the 'Approve: Space Restored' button uses the word 'Restored' (acknowledging something was at risk), and the confirmation state (purple checkmark overlay, 'Space verified' text) provides visual proof that can persist on the dashboard for 48 hours. The card moves from the urgency stack (amber border = needs attention) to a confirmed state (purple border = verified safe), enacting the psychological transition from vigilance to relief.",
      html_css_snippet: `<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{background:#f9fafb;display:flex;justify-content:center;padding:40px 16px;font-family:'Inter',sans-serif}.sl-cleaning{max-width:520px;width:100%;background:#fff;border:1px solid #e5e7eb;border-left:3px solid #c17a28;border-radius:12px;padding:24px;box-shadow:0 2px 4px rgba(49,19,93,0.08)}.sl-cleaning__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.sl-cleaning__title{font-size:15px;font-weight:600;color:#1a1a1a}.sl-cleaning__date{font-size:13px;color:#6b7280}.sl-cleaning__grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:20px}.sl-cleaning__photo{width:100%;aspect-ratio:4/3;background:#f3f4f6;border-radius:6px;border:1px solid #e5e7eb;display:flex;align-items:center;justify-content:center;overflow:hidden}.sl-cleaning__photo-placeholder{color:#9ca3af;font-size:12px;text-align:center}.sl-cleaning__photo-placeholder svg{width:24px;height:24px;stroke:#9ca3af;fill:none;stroke-width:1.5;margin-bottom:4px;display:block;margin-left:auto;margin-right:auto}.sl-cleaning__actions{display:flex;gap:12px}.sl-cleaning__approve{flex:1;padding:12px 20px;background:rgb(109,49,194);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;transition:background 0.2s ease}.sl-cleaning__approve:hover{background:#31135D}.sl-cleaning__flag{flex:1;padding:12px 20px;background:#fff;color:#c17a28;border:2px solid #c17a28;border-radius:8px;font-size:14px;font-weight:500;font-family:'Inter',sans-serif;cursor:pointer;transition:background 0.2s ease}.sl-cleaning__flag:hover{background:#fef3e2}</style><div class="sl-cleaning"><div class="sl-cleaning__header"><span class="sl-cleaning__title">Cleaning verification from Jordan Rivera</span><span class="sl-cleaning__date">Feb 18, 2026</span></div><div class="sl-cleaning__grid"><div class="sl-cleaning__photo"><div class="sl-cleaning__photo-placeholder"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>Kitchen</div></div><div class="sl-cleaning__photo"><div class="sl-cleaning__photo-placeholder"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>Bedroom</div></div><div class="sl-cleaning__photo"><div class="sl-cleaning__photo-placeholder"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>Bathroom</div></div><div class="sl-cleaning__photo"><div class="sl-cleaning__photo-placeholder"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>Living area</div></div></div><div class="sl-cleaning__actions"><button class="sl-cleaning__approve">Approve: Space Restored</button><button class="sl-cleaning__flag">Flag an Issue</button></div></div>`
    },
  {
      id: "ds-ui-2101-005",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["listing_creation","proposal_mgmt","active_lease"],
      priority: "high",
      description: "The top section of the host dashboard that surfaces action-required items as the host's externalized self-preservation instinct. Becker writes that 'such constant expenditure of psychological energy on the business of preserving life would be impossible if the fear of death were not as constant.' This panel converts the diffuse anxiety of stranger-in-home into discrete, actionable items. Each urgency card uses a left-border accent system: amber (#c17a28) for items needing attention, purple (rgb(109,49,194)) for informational items already handled. The panel heading 'Needs your attention' and the empty state 'All caught up' are the two poles of the host's dashboard experience -- threat-scanning and equanimity. The panel never rearranges between visits, providing the civilizational order that Becker identifies as a precondition for equanimity.",
      html_css_snippet: `<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{background:#f9fafb;display:flex;justify-content:center;padding:40px 16px;font-family:'Inter',sans-serif}.sl-urgency{max-width:640px;width:100%;background:#fff;padding:24px;border-bottom:1px solid #e5e7eb;border-radius:12px;box-shadow:0 2px 4px rgba(49,19,93,0.08)}.sl-urgency__heading{font-family:'DM Sans',sans-serif;font-size:18px;font-weight:700;color:#1a1a1a;margin-bottom:16px}.sl-urgency__list{list-style:none}.sl-urgency__item{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:8px;transition:background 0.15s ease;cursor:pointer;margin-bottom:4px}.sl-urgency__item:hover{background:#f9fafb}.sl-urgency__icon{width:36px;height:36px;border-radius:50%;background:#fef3e2;display:flex;align-items:center;justify-content:center;flex-shrink:0}.sl-urgency__icon svg{width:18px;height:18px;stroke:#c17a28;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}.sl-urgency__content{flex:1;min-width:0}.sl-urgency__desc{font-size:14px;font-weight:500;color:#1a1a1a;margin-bottom:2px}.sl-urgency__deadline{font-size:12px;font-weight:600;color:#c17a28}.sl-urgency__action{font-size:13px;font-weight:600;color:rgb(109,49,194);background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif;white-space:nowrap;padding:6px 12px;border-radius:6px;transition:background 0.15s ease}.sl-urgency__action:hover{background:rgb(252,250,255)}</style><div class="sl-urgency"><h2 class="sl-urgency__heading">Needs your attention</h2><ul class="sl-urgency__list"><li class="sl-urgency__item"><div class="sl-urgency__icon"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></div><div class="sl-urgency__content"><p class="sl-urgency__desc">Review cleaning photos from Jordan Rivera</p><p class="sl-urgency__deadline">Received today</p></div><button class="sl-urgency__action">Review</button></li><li class="sl-urgency__item"><div class="sl-urgency__icon"><svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></div><div class="sl-urgency__content"><p class="sl-urgency__desc">New proposal from Alex Kim</p><p class="sl-urgency__deadline">Respond by Feb 23</p></div><button class="sl-urgency__action">Review</button></li><li class="sl-urgency__item"><div class="sl-urgency__icon"><svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div><div class="sl-urgency__content"><p class="sl-urgency__desc">Date change request from Marcus Chen</p><p class="sl-urgency__deadline">Awaiting your approval</p></div><button class="sl-urgency__action">Review</button></li></ul></div>`
    },
  {
      id: "ds-ui-2101-006",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["retention"],
      priority: "high",
      description: "A celebratory summary card presented at lease completion that reframes the hosting experience as an immortality project -- a contribution that transcends the individual transaction. Becker writes that 'the deepest need is to be free of the anxiety of death and annihilation; but it is life itself which awakens it, and so we must shrink from being fully alive.' This card provides the narcissistic supply needed to sustain the host's expanded hero system. The income hero number (36px DM Sans) declares the material value of the host's vulnerability. The three impact metrics (guests welcomed, months provided, average rating) provide evidence of meaningful contribution. Review snippets are voices of former strangers confirming the encounter was positive. The re-list CTA appears after validation -- the host decides from a position of affirmed strength, not unresolved anxiety. Pause is positioned as an equally dignified option: 'Take a break.'",
      html_css_snippet: `<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{background:#f9fafb;display:flex;justify-content:center;padding:40px 16px;font-family:'Inter',sans-serif}.sl-legacy{max-width:520px;width:100%;background:rgb(252,250,255);border:1px solid rgba(49,19,93,0.1);border-radius:12px;padding:32px;box-shadow:0 2px 8px rgba(49,19,93,0.06)}.sl-legacy__label{font-size:12px;font-weight:500;color:#6b7280;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:12px}.sl-legacy__hero{text-align:center;margin-bottom:32px}.sl-legacy__income{font-family:'DM Sans',sans-serif;font-size:36px;font-weight:700;color:#31135D;margin-bottom:4px}.sl-legacy__income-label{font-size:14px;color:#6b7280}.sl-legacy__metrics{display:flex;gap:16px;margin-bottom:32px}.sl-legacy__metric{flex:1;text-align:center;padding:16px 8px;background:#fff;border-radius:8px;border:1px solid rgba(49,19,93,0.06)}.sl-legacy__metric-num{font-family:'DM Sans',sans-serif;font-size:24px;font-weight:700;color:#31135D;margin-bottom:4px}.sl-legacy__metric-label{font-size:12px;color:#6b7280}.sl-legacy__reviews{margin-bottom:28px}.sl-legacy__reviews-header{font-size:14px;font-weight:600;color:#1a1a1a;margin-bottom:12px}.sl-legacy__review{background:#fff;border-radius:8px;padding:16px;margin-bottom:8px;border:1px solid rgba(49,19,93,0.06)}.sl-legacy__review:last-child{margin-bottom:0}.sl-legacy__review-name{font-size:13px;font-weight:600;color:#1a1a1a;margin-bottom:6px}.sl-legacy__review-text{font-size:14px;font-style:italic;color:#374151;line-height:1.5}.sl-legacy__relist{width:100%;padding:14px 24px;background:rgb(109,49,194);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;margin-bottom:12px;transition:background 0.2s ease}.sl-legacy__relist:hover{background:#31135D}.sl-legacy__pause{display:block;width:100%;text-align:center;font-size:13px;font-weight:500;color:#6b7280;background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif}.sl-legacy__pause:hover{text-decoration:underline;color:#374151}</style><div class="sl-legacy"><p class="sl-legacy__label">Your hosting impact</p><div class="sl-legacy__hero"><h2 class="sl-legacy__income">\$8,400</h2><p class="sl-legacy__income-label">Total earned</p></div><div class="sl-legacy__metrics"><div class="sl-legacy__metric"><p class="sl-legacy__metric-num">3</p><p class="sl-legacy__metric-label">Guests welcomed</p></div><div class="sl-legacy__metric"><p class="sl-legacy__metric-num">7</p><p class="sl-legacy__metric-label">Months of housing</p></div><div class="sl-legacy__metric"><p class="sl-legacy__metric-num">4.9</p><p class="sl-legacy__metric-label">Average rating</p></div></div><div class="sl-legacy__reviews"><p class="sl-legacy__reviews-header">What they said about you</p><div class="sl-legacy__review"><p class="sl-legacy__review-name">Jordan R.</p><p class="sl-legacy__review-text">Spotless place, great location. Made my contract work so much easier.</p></div><div class="sl-legacy__review"><p class="sl-legacy__review-name">Alex K.</p><p class="sl-legacy__review-text">Felt right at home from day one. Would book again.</p></div></div><button class="sl-legacy__relist">List your space again</button><button class="sl-legacy__pause">Or take a break</button></div>`
    },
  {
      id: "ds-ui-2101-007",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["listing_creation","retention"],
      priority: "high",
      description: "A listing card state toggle that allows the host to pause (retreat from exposure) or resume (re-engage) with a single tap and zero friction. Becker's insight that 'repression is not simply a negative force opposing life energies; it lives on life energies and uses them creatively' informs the design: pause IS creative repression -- channeling the retreat impulse into a productive holding state rather than destructive deletion. The paused state desaturates the listing card and shows a 'Paused' badge, making the retreat visible without making it punitive. Resume restores full color and live status. No confirmation modal on pause -- the host's boundary is respected without interrogation. No reason-collection form -- forcing the host to articulate their retreat breaks the repressive defense that makes pause psychologically viable. This card shows both the live and paused states side by side for comparison.",
      html_css_snippet: `<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{background:#f9fafb;display:flex;justify-content:center;gap:24px;padding:40px 16px;font-family:'Inter',sans-serif;flex-wrap:wrap}.sl-toggle-card{max-width:260px;width:100%;background:#fff;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px rgba(49,19,93,0.08)}.sl-toggle-card--paused .sl-toggle-card__body{opacity:0.6}.sl-toggle-card__photo{width:100%;height:140px;background:linear-gradient(135deg,#f3f4f6 0%,#e5e7eb 100%);display:flex;align-items:center;justify-content:center;position:relative}.sl-toggle-card__photo svg{width:32px;height:32px;stroke:#9ca3af;fill:none;stroke-width:1.5}.sl-toggle-card__badge{position:absolute;top:10px;left:10px;padding:4px 10px;border-radius:9999px;font-size:11px;font-weight:600;font-family:'Inter',sans-serif}.sl-toggle-card__badge--active{background:rgba(109,49,194,0.1);color:rgb(109,49,194)}.sl-toggle-card__badge--paused{background:#f3f4f6;color:#6b7280}.sl-toggle-card__body{padding:16px}.sl-toggle-card__title{font-family:'DM Sans',sans-serif;font-size:16px;font-weight:700;color:#1a1a1a;margin-bottom:4px}.sl-toggle-card__meta{font-size:13px;color:#6b7280;margin-bottom:12px}.sl-toggle-card__action{display:inline-flex;align-items:center;gap:6px;font-size:13px;font-weight:500;color:rgb(109,49,194);background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif;padding:0}.sl-toggle-card__action:hover{text-decoration:underline}.sl-toggle-card__action svg{width:14px;height:14px;stroke:rgb(109,49,194);fill:none;stroke-width:2}.sl-toggle-card--paused .sl-toggle-card__action{color:#6b7280}.sl-toggle-card--paused .sl-toggle-card__action svg{stroke:#6b7280}.sl-toggle-card__label{display:block;text-align:center;font-size:11px;font-weight:600;color:#9ca3af;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:8px}</style><div><p class="sl-toggle-card__label">Live listing</p><div class="sl-toggle-card"><div class="sl-toggle-card__photo"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg><span class="sl-toggle-card__badge sl-toggle-card__badge--active">Active</span></div><div class="sl-toggle-card__body"><h4 class="sl-toggle-card__title">2BR Williamsburg Walk-Up</h4><p class="sl-toggle-card__meta">\$2,800/mo &middot; Mon -- Fri</p><button class="sl-toggle-card__action"><svg viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg> Pause listing</button></div></div></div><div><p class="sl-toggle-card__label">Paused listing</p><div class="sl-toggle-card sl-toggle-card--paused"><div class="sl-toggle-card__photo"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg><span class="sl-toggle-card__badge sl-toggle-card__badge--paused">Paused</span></div><div class="sl-toggle-card__body"><h4 class="sl-toggle-card__title">2BR Williamsburg Walk-Up</h4><p class="sl-toggle-card__meta">\$2,800/mo &middot; Mon -- Fri</p><button class="sl-toggle-card__action"><svg viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"/></svg> Resume listing</button></div></div></div>`
    }
];

function createSrcdoc(snippet) {
  return snippet;
}

function renderCards() {
  const grid = document.getElementById('elementGrid');
  const search = document.getElementById('searchInput').value.toLowerCase();
  const checkedPhases = Array.from(document.querySelectorAll('[data-filter-for="phase"] input:checked')).map(c => c.value);

  let filtered = ELEMENTS.filter(el => {
    if (search && !el.name.toLowerCase().includes(search) && !el.description.toLowerCase().includes(search)) return false;
    if (checkedPhases.length && !el.journey_phases.some(p => checkedPhases.includes(p))) return false;
    return true;
  });

  document.getElementById('resultCount').textContent = filtered.length + ' element' + (filtered.length !== 1 ? 's' : '');

  if (!filtered.length) {
    grid.innerHTML = '<div class="lib-empty">No elements match your filters.</div>';
    return;
  }

  grid.innerHTML = filtered.map((el, i) => {
    const phases = el.journey_phases.map(p => '<span class="lib-card__phase">' + p.replace(/_/g, ' ') + '</span>').join('');
    const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');
    return '<div class="lib-card" data-idx="' + ELEMENTS.indexOf(el) + '">' +
      '<div class="lib-card__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" loading="lazy" sandbox="allow-same-origin"></iframe></div>' +
      '<div class="lib-card__body">' +
        '<div class="lib-card__top-row"><span class="lib-card__cat">UI Element</span><span class="lib-card__id">' + el.id + '</span></div>' +
        '<div class="lib-card__name">' + el.name + '</div>' +
        '<div class="lib-card__desc">' + el.description + '</div>' +
        '<div class="lib-card__phases">' + phases + '</div>' +
        '<div class="lib-card__sources"><strong>Sources:</strong> ' + sources + '</div>' +
      '</div></div>';
  }).join('');
}

function escapeAttr(s) {
  return s.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function openModal(idx) {
  const el = ELEMENTS[idx];
  const overlay = document.getElementById('modalOverlay');
  const modal = document.getElementById('modalContent');
  const phases = el.journey_phases.map(p => '<span class="lib-card__phase" style="font-size:12px;padding:4px 10px;">' + p.replace(/_/g, ' ') + '</span>').join('');
  const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');

  modal.innerHTML =
    '<div class="lib-modal__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" sandbox="allow-same-origin"></iframe><button class="lib-modal__close" onclick="closeModal()">&times;</button></div>' +
    '<div class="lib-modal__content">' +
      '<div class="lib-modal__header"><h2 class="lib-modal__title">' + el.name + '</h2></div>' +
      '<p class="lib-modal__desc">' + el.description + '</p>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Journey Phases</div><div class="lib-modal__phases-row">' + phases + '</div></div>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Source Elements</div><div class="lib-modal__sources-row">' + sources + '</div></div>' +
    '</div>';

  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

// Event listeners
document.getElementById('searchInput').addEventListener('input', renderCards);
document.querySelectorAll('.lib-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const dropdown = btn.nextElementSibling;
    dropdown.classList.toggle('open');
    btn.classList.toggle('active');
  });
});
document.querySelectorAll('.lib-filter-dropdown input').forEach(cb => {
  cb.addEventListener('change', renderCards);
});
document.getElementById('elementGrid').addEventListener('click', e => {
  const card = e.target.closest('.lib-card');
  if (card) openModal(parseInt(card.dataset.idx));
});
document.getElementById('modalOverlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) closeModal();
});
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
window.addEventListener('scroll', () => {
  document.getElementById('toolbar').classList.toggle('scrolled', window.scrollY > 10);
});

// Initial render
renderCards();
</script>
</body>
</html>