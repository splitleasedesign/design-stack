<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reverse-Benchmark Report — Anyplace × Kahneman Part 2 | 2026-02-18_1400</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- ── DATA INJECTION ────────────────────────────────────────────── -->
  <script id="run-config" type="application/json">{"run_id":"2026-02-18_1400","process_type":"reverse-benchmark","lens":{"competitor":"anyplace","book":"kahneman-part2-heuristics-biases.txt","book_chapters":"Part 2: Heuristics and Biases — Law of Small Numbers, Anchoring, Availability"},"status":"running","started_at":"2026-02-18T14:00:00Z"}</script>
  <script id="data-layer-0" type="application/json">{"lens":{"competitor":"anyplace","book":"kahneman-part2-heuristics-biases.txt","lens_summary":"Through the Kahneman heuristics lens, Anyplace systematically exploits anchoring (per-night pricing), availability cascades (digital nomad media saturation), and the law of small numbers (treating 3–5 reviews as representative) without ever acknowledging or correcting for these biases — creating a category-wide trust vacuum that nobody has tried to fill."},"competitor_overview":{"category":"marketplace","primary_strength":"Professional-grade photography and standardized workspace guarantees that produce a consistent, high-quality first impression.","business_model":"Commission-based marketplace, 30-day minimum stays. B2B2C: property managers supply inventory, remote workers supply demand.","user_base":"Remote workers, digital nomads, traveling professionals needing furnished month-plus stays. Skews higher-income tech workers.","brand_perception":"Perceived as the 'professional version of Airbnb for remote workers.' Users trust the professionalism of listings but often discover the review base is thin."},"phases":{"discovery":{"what_they_do":"Google search targeting, content marketing, digital nomad community partnerships. Homepage positions around workspace guarantee and lifestyle photography.","quality_level":"good","what_nobody_in_category_does":"Nobody interrupts the availability cascade to ask: what did the last hundred people who searched as you are searching actually experience? No competitor shows base rates."},"search":{"what_they_do":"Users search by city and dates, filter by price, bedrooms, amenities. Results show per-night pricing prominently. Map view available.","quality_level":"good","what_nobody_in_category_does":"Nobody shows dual pricing (per-night AND monthly total) by default. All platforms anchor on per-night rates because it converts better."},"listing_evaluation":{"what_they_do":"Professional photo galleries, workspace hero shot, amenities, reviews. Star ratings 4.5–5.0 but review count typically 2–15.","quality_level":"good","what_nobody_in_category_does":"Nobody normalizes for sample size when displaying reviews. No confidence intervals. No differentiation between statistically thin and robust ratings."},"booking_proposal":{"what_they_do":"Direct booking model. Fixed price, no negotiation. Host approval typically automatic. First time monthly total appears aggregated.","quality_level":"good","what_nobody_in_category_does":"Nobody uses the booking moment to correct for anchoring bias. No total-cost comparison to alternatives. No negotiation mechanism."},"communication":{"what_they_do":"In-platform messaging to property manager. Plain text thread, variable response times, no structured communication arc from Anyplace.","quality_level":"adequate","what_nobody_in_category_does":"Nobody provides a structured communication arc calibrated to stay length. All communication is reactive, not proactive."},"active_stay":{"what_they_do":"Offline stay with basic digital guest guide (WiFi, appliances, house rules). All operational issues handled through property manager messages.","quality_level":"adequate","what_nobody_in_category_does":"Nobody designs the active stay experience to manage the representativeness gap between listing photography and residential rental reality."},"post_stay":{"what_they_do":"Post-stay review request email. Star rating plus text comment. No structured review protocol. Reviews dominated by vivid incidents.","quality_level":"weak","what_nobody_in_category_does":"Nobody structures post-stay reviews to capture base-rate data. The category relies on unstructured narrative reviews dominated by vivid moments."},"retention":{"what_they_do":"Email newsletters, occasional promotions. No loyalty program, no saved preferences, no personalization. Repeat users identical to new users.","quality_level":"weak","what_nobody_in_category_does":"Nobody designs retention around making positive experiences more cognitively available than negative ones. No anchoring management for repeat users."}},"category_blind_spots":[{"blind_spot":"Every mid-term housing platform anchors on per-night pricing and nobody has tried radical monthly-first transparency.","signature_potential":"high"},{"blind_spot":"The law of small numbers problem in mid-term housing reviews has never been addressed by any platform.","signature_potential":"high"},{"blind_spot":"The representativeness gap between listing photography quality and actual residential rental experience is universal and never acknowledged.","signature_potential":"high"},{"blind_spot":"Post-stay review systems capture vivid memorable moments rather than statistically representative experience data.","signature_potential":"medium"},{"blind_spot":"No mid-term platform uses retention design to combat the availability bias that makes negative incidents more memorable than positive ones.","signature_potential":"medium"},{"blind_spot":"Negotiation is absent from every mid-term housing platform despite enormous flexibility potential for 30–90 day stays.","signature_potential":"high"}]}</script>
  <script id="data-layer-1" type="application/json">{"disappointment_summary":"Anyplace has built a competent mid-term rental marketplace that functions without breaking — and therein lies the disappointment. Every phase of the user journey works adequately while systematically exploiting the three Kahneman biases the platform claims to transcend.","disappointments":[{"id":"disappoint-001","title":"The Per-Night Mirage: Search Anchors on the Wrong Number","competitor_phase":"search","type":"mediocre_default","severity":{"frequency":"100% of search sessions","impact":"High","visibility":"Low"},"the_coffee_test":"The coffee arrives at the right temperature, in the right cup, and costs $3 — until you discover the $135/month membership fee on page 6 of the receipt."},{"id":"disappoint-002","title":"The Checkout Reckoning: Sticker Shock as a Product Flaw","competitor_phase":"booking_proposal","type":"broken_promise","severity":{"frequency":"Every user reaching checkout","impact":"Medium-high","visibility":"Medium"},"the_coffee_test":"The coffee costs $3 on the menu board and $13.80 after you discover the table fee, atmosphere surcharge, and gratuity already added."},{"id":"disappoint-003","title":"The Review Count Shadow: 4.9 Stars on 4 Reviews Looks Identical to 4.9 on 400","competitor_phase":"listing_evaluation","type":"mediocre_default","severity":{"frequency":"Majority of Anyplace listings","impact":"High","visibility":"Very low"},"the_coffee_test":"The café has a 4.9 rating based on 4 reviews by the owner's friends, displayed in the same font and size as the 4.9 rating of the place across the street with 400 verified strangers."},{"id":"disappoint-004","title":"The Hotel That Isn't: Representativeness Gap Between Photography and Reality","competitor_phase":"listing_evaluation","type":"broken_promise","severity":{"frequency":"Every user","impact":"High","visibility":"Medium"},"the_coffee_test":"The coffee looks like a Four Seasons latte in the menu photo, and it tastes like a decent drip from a property manager who also manages 23 other apartments."},{"id":"disappoint-005","title":"The Plain Text Box: Messaging That Treats Communication as an Afterthought","competitor_phase":"communication","type":"mediocre_default","severity":{"frequency":"Every user","impact":"Medium","visibility":"Low"},"the_coffee_test":"The coffee menu is beautiful but when you ask a question you're handed a sticky note that says 'text the owner' with a phone number."},{"id":"disappoint-006","title":"The Active Stay Void: Product Investment Ends at Booking Confirmation","competitor_phase":"active_stay","type":"abandoned_phase","severity":{"frequency":"Every guest","impact":"High","visibility":"Very low"},"the_coffee_test":"You order the coffee, it arrives, and then the café disappears — the coffee exists and it's drinkable, but there's no one to ask for a refill."},{"id":"disappoint-007","title":"The Vivid Incident Review: Post-Stay Feedback Captures Highlights, Not Base Rates","competitor_phase":"post_stay","type":"mediocre_default","severity":{"frequency":"Every review","impact":"High","visibility":"Very low"},"the_coffee_test":"The café asks for your review and you write about the one time the music was too loud, forgetting that you had 20 perfect quiet mornings before it."},{"id":"disappoint-008","title":"The No-Negotiation Wall: Price Is Fixed Even When Context Isn't","competitor_phase":"booking_proposal","type":"missing_delight","severity":{"frequency":"All users whose needs don't perfectly match","impact":"Medium","visibility":"Low"},"the_coffee_test":"The café has one size and one price — the coffee is excellent but you wanted a large and you left because the medium wasn't going to be enough."},{"id":"disappoint-009","title":"The Availability Collapse: Discovery Promises Remote-Work Utopia, Reality Delivers a Furnished Apartment","competitor_phase":"discovery","type":"broken_promise","severity":{"frequency":"All users via organic/content marketing","impact":"High","visibility":"Very low"},"the_coffee_test":"The café Instagram shows the perfect morning with warm light; you arrive and discover it is also fluorescent-lit on a Tuesday at 8am."},{"id":"disappoint-010","title":"The Loyalty Void: Returning Users Are Transactionally Identical to First-Time Users","competitor_phase":"retention","type":"abandoned_phase","severity":{"frequency":"All repeat users","impact":"Medium","visibility":"Low"},"the_coffee_test":"You have been coming to this café every week for two years and the barista still asks if you have been in before."},{"id":"disappoint-011","title":"The Trust Vacuum at Payment: $4,000 to a Stranger With 4 Reviews and a Profile Photo","competitor_phase":"booking_proposal","type":"trust_vacuum","severity":{"frequency":"Every first booking with a new property manager","impact":"High","visibility":"Medium"},"the_coffee_test":"You hand $4,600 to a barista you have never met, based primarily on the fact that the café looks nice and you heard it was pretty good."},{"id":"disappoint-012","title":"The Invisible Labor of Comparison: Eight Tabs, No Synthesis","competitor_phase":"search","type":"invisible_labor","severity":{"frequency":"Every user in multi-listing consideration","impact":"Medium","visibility":"Low"},"the_coffee_test":"You visited six cafés and are now trying to remember which one had the best espresso — you remember the one with the exposed brick, not the one with the best ratio."}],"disappointment_clusters":[{"cluster_name":"The Anchoring Cascade: Price Is Never What You Think It Is","disappointment_ids":["disappoint-001","disappoint-002","disappoint-008"],"signature_potential":"Monthly-first transparency as a brand position."},{"cluster_name":"The Statistical Honesty Gap: Small Samples, Big Decisions","disappointment_ids":["disappoint-003","disappoint-007","disappoint-011"],"signature_potential":"Statistical trust architecture: confidence intervals, base-rate reviews, quantified trust signals."},{"cluster_name":"The Expectation Gap Factory: Every Marketing Touchpoint Makes Reality Harder to Meet","disappointment_ids":["disappoint-009","disappoint-004","disappoint-005"],"signature_potential":"Expectation-honest positioning."},{"cluster_name":"The Platform Abandonment Arc: High Attention at Booking, Zero Attention During Stay","disappointment_ids":["disappoint-006","disappoint-010","disappoint-012"],"signature_potential":"Stay lifecycle design."}]}</script>
  <script id="data-layer-2" type="application/json">{"crossref_summary":"Scanning 21 guest transcripts and 46 host transcripts reveals that 9 of the 12 Anyplace disappointments have direct or parallel evidence in Split Lease's own user calls. The anchoring cluster is the most strongly validated. The negotiation disappointment has the deepest validation: agents already negotiate informally. The trust vacuum at payment is confirmed by Jessica demanding a confidentiality agreement, Susan asking about background checks, and Hemeden insisting on meeting guests first.","validated_disappointments":[{"disappointment_id":"disappoint-001","validation_strength":"strong","user_language":"Users think monthly. 'I think of this per month and then I break it down per night.' 'My budget is around $800 to $1,000 per month.' The platform's per-night frame forces mental math users perform as manual workarounds."},{"disappointment_id":"disappoint-005","validation_strength":"strong","user_language":"Host and guest both default to texting outside the platform for mid-stay communication. 'He was texting me.' 'I had to go through you guys.' The platform is absent from communication where it is most needed."},{"disappointment_id":"disappoint-006","validation_strength":"strong","user_language":"When the active stay begins, the platform disappears. Hosts and guests text directly. Hosts lose money on informal rescheduling. Agents become intermediaries for functions that should be self-service."},{"disappointment_id":"disappoint-008","validation_strength":"strong","user_language":"Negotiation is happening everywhere except on the platform. Agents 'negotiate the best price' for guests. Hosts pre-calculate their flexibility ('I did like 10% and then 15%'). Guests assume negotiation is possible."},{"disappointment_id":"disappoint-011","validation_strength":"strong","user_language":"Both hosts and guests express the trust vacuum in concrete behavioral terms. Hosts want to 'meet guests first,' demand confidentiality agreements. Guests want to 'make sure everything is legit,' require physical viewings, ask about background checks."}],"new_discoveries":[{"id":"discovery-001","title":"The Ghost Roommate Reveal: Model Complexity Disclosed Mid-Conversation, Not at Discovery","type":"broken_promise","framework_analysis":"The ghost roommate model is cognitively complex. Users arrive with the closest available representativeness match — standard subletting, standard roommates, or hotel — and each misfires. The discovery experience partially corrects this but the listing page needs to communicate the model before the call."},{"id":"discovery-002","title":"The Agent-Platform Gap: Platform Features Are Promised Before They Exist","type":"broken_promise","framework_analysis":"Agents described in-app date changes as working when they were under development. This is a high-risk availability-driven expectation gap: vivid promise versus absent feature."},{"id":"discovery-003","title":"The Pricing Opacity for Part-Time: Users Cannot Calculate Their True Commitment Without Agent Help","type":"invisible_labor","framework_analysis":"More severe than Anyplace's per-night mirage. Split Lease's model adds rate variability based on ghost roommate night count — a third dimension users cannot solve without agent help."},{"id":"discovery-004","title":"The Cleaning Anxiety: Shared-Space Maintenance Creates Persistent Low-Grade Stress","type":"abandoned_phase","framework_analysis":"Vivid mental images of weekly pack-and-clean cycles create pre-stay anxiety that persists throughout the active stay. No structured solution exists."}]}</script>
  <script id="data-layer-3" type="application/json">{"opportunity_thesis":"Anyplace and the entire category has been optimizing for acquisition and conversion while systematically mis-serving users at every phase that follows. Split Lease has an unusual structural advantage: its model is already different in the exact dimension where these biases bite hardest. The five opportunities form a coherent response — not a random collection of features.","opportunities":[{"id":"opp-001","title":"Monthly Commitment Transparency: The Platform That Anchors Honestly","split_lease_phases":["search","listing_evaluation","proposal_creation"],"the_signature":"Every search card and listing page displays the monthly total as the primary pricing unit. Split Lease is the first housing platform that shows you what you are committing to, not what makes the price look smallest.","why_competitors_wont_copy":"Per-night pricing wins on conversion CTR. Any competitor switching to monthly-first will see short-term funnel drops their growth team will immediately revert. Split Lease's part-time model also makes the monthly calculation more complex than a simple multiply — competitors cannot copy the exact implementation even if they wanted to.","opportunity_score":{"signature_potential":"high","category_gap":"entire_category","user_validation":"strong","framework_support":"strong","feasibility":"straightforward","alignment":"core_to_brand"}},{"id":"opp-002","title":"Structured Negotiation: The Platform Where Both Parties Have a Voice","split_lease_phases":["proposal_creation","negotiation","acceptance"],"the_signature":"Split Lease is the only platform in the mid-term housing category with a native counter-offer mechanism — guests propose an alternative rate, hosts accept or counter, both see the shared adjustment history.","why_competitors_wont_copy":"Hotel-booking UX is the inherited default. Anyplace's supply side is professional property management companies — per-booking negotiation is operationally impossible at scale. Split Lease's individual host model is the only context where micro-negotiation is both feasible and natural.","opportunity_score":{"signature_potential":"high","category_gap":"entire_category","user_validation":"strong","framework_support":"strong","feasibility":"moderate","alignment":"core_to_brand"}},{"id":"opp-003","title":"Ghost Roommate Model Clarity: Eliminate the Mid-Call Discovery","split_lease_phases":["discovery","search","listing_evaluation"],"the_signature":"Split Lease is the only platform whose listings tell users upfront what the ghost-roommate arrangement means for daily life — before a call, before confusion. The explanation converts the strangeness into a reason to choose Split Lease.","why_competitors_wont_copy":"No competitor has or can have a ghost-roommate model. It is specific to Split Lease's structural invention. The opportunity is to turn a genuine structural novelty into a vivid, memorable reason to choose Split Lease.","opportunity_score":{"signature_potential":"high","category_gap":"entire_category","user_validation":"strong","framework_support":"strong","feasibility":"straightforward","alignment":"core_to_brand"}},{"id":"opp-004","title":"Active Stay Infrastructure: The Platform That Stays Present","split_lease_phases":["active_lease"],"the_signature":"Split Lease builds the first active-stay management layer in the mid-term housing category: lightweight tools for rescheduling nights, requesting date changes, and communicating about logistics — at the speed of a text message, without leaving the platform.","why_competitors_wont_copy":"Anyplace and Furnished Finder are acquisition and transaction platforms — their business model ends at booking. Building active-stay tooling requires ongoing operational relationships that only make sense for Split Lease's individual homeowner hosts.","opportunity_score":{"signature_potential":"high","category_gap":"entire_category","user_validation":"strong","framework_support":"strong","feasibility":"moderate","alignment":"core_to_brand"}},{"id":"opp-005","title":"Trust Architecture at Commitment: Signal Verification Before $3,000 Changes Hands","split_lease_phases":["proposal_creation","acceptance","move_in"],"the_signature":"Split Lease builds explicit, layered trust signals at the proposal acceptance moment — for both parties simultaneously. Host sees guest identity verification and agent vouch; guest sees host response history and platform financial protection terms.","why_competitors_wont_copy":"Anyplace's supply side is professional property managers who do not need the same trust signals that individual homeowners need. The individual-homeowner trust vacuum is specific to Split Lease's model.","opportunity_score":{"signature_potential":"high","category_gap":"entire_category","user_validation":"strong","framework_support":"strong","feasibility":"ambitious","alignment":"core_to_brand"}}],"opportunity_ranking":[{"id":"opp-001","rank":1,"reason":"Monthly Commitment Transparency affects 100% of search sessions and is the lowest-risk opportunity — a pricing display change, not a new product category."},{"id":"opp-003","rank":2,"reason":"Ghost Roommate Model Clarity is Split Lease's most unique structural opportunity. No competitor can copy it."},{"id":"opp-002","rank":3,"reason":"Structured Negotiation is the most architecturally differentiated opportunity. Competitors are structurally unable to copy it."},{"id":"opp-004","rank":4,"reason":"Active Stay Infrastructure is essential for the ghost-roommate model's operational viability and has the highest long-term retention impact."},{"id":"opp-005","rank":5,"reason":"Trust Architecture at Commitment is most ambitious. The other four opportunities create the conditions that make trust signals meaningful."}]}</script>
  <script id="data-layer-4" type="application/json">{"elements":[{"id":"rb-ui-001","name":"Monthly-First Search Card","category":"card","opportunity_id":"opp-001","journey_phases":["search","listing_evaluation"],"priority":"high","problem_it_solves":"Anchoring users on a per-night rate during search causes systematic underestimation of monthly commitment, producing sticker shock at checkout.","why_this_is_a_signature":"Every housing platform shows per-night pricing on search cards. Split Lease is the first to show monthly commitment as the primary anchor.","effort":"small"},{"id":"rb-ui-002","name":"Ghost Roommate Model Explainer","category":"section","opportunity_id":"opp-003","journey_phases":["discovery","search","listing_evaluation"],"priority":"high","problem_it_solves":"Users arrive at listings with an incorrect mental model, forcing agents to correct from scratch on every call — and causing some users to drop off before a call happens.","why_this_is_a_signature":"No competitor has or can have a ghost-roommate model. The structural invention requires explanation that, done right, is the most compelling reason to choose Split Lease.","effort":"medium"},{"id":"rb-ui-003","name":"Structured Counter-Offer Panel","category":"form","opportunity_id":"opp-002","journey_phases":["proposal_creation","negotiation","acceptance"],"priority":"high","problem_it_solves":"Negotiation is already happening off-platform through agents, informal texts, and host pre-calculations — but the platform has no mechanism for it.","why_this_is_a_signature":"Split Lease is the only platform in the mid-term housing category where both parties can collaboratively set the price.","effort":"large"},{"id":"rb-ui-004","name":"Night Rescheduling Widget","category":"form","opportunity_id":"opp-004","journey_phases":["active_lease"],"priority":"high","problem_it_solves":"Guests and hosts currently reschedule nights via SMS outside the platform, resulting in lost rate calculations, no paper trail, and hosts accepting old rates they no longer want to honor.","why_this_is_a_signature":"No mid-term housing platform has active-stay management tooling. Split Lease is the only platform that is more useful on day 30 than day 1.","effort":"medium"},{"id":"rb-ui-005","name":"Commitment Confidence Screen","category":"trust","opportunity_id":"opp-005","journey_phases":["proposal_creation","acceptance"],"priority":"high","problem_it_solves":"At the moment of maximum financial commitment, both host and guest face a trust vacuum: thin signals (4 reviews, a logo) for a $3,000+ decision.","why_this_is_a_signature":"Split Lease is the only platform where the commitment screen shows both parties' trust signals simultaneously, with the agent vouching for the match.","effort":"large"},{"id":"rb-ui-006","name":"Review Confidence Indicator","category":"display","opportunity_id":"opp-001","journey_phases":["search","listing_evaluation"],"priority":"medium","problem_it_solves":"Users cannot tell the difference between 4.9 stars on 4 reviews and 4.9 stars on 400 reviews because the display is identical.","why_this_is_a_signature":"First platform to show statistical reliability alongside the star average — a direct application of Kahneman's law of small numbers.","effort":"small"},{"id":"rb-ui-007","name":"Pricing Transparency Tooltip","category":"display","opportunity_id":"opp-001","journey_phases":["search","listing_evaluation"],"priority":"medium","problem_it_solves":"Users who see '$1,760/month' cannot easily verify the calculation, especially for the ghost-roommate part-time model.","why_this_is_a_signature":"Makes the monthly calculation fully legible on demand — the 'how was this calculated?' answer for curious users.","effort":"small"}]}</script>
  <script id="data-layer-5" type="application/json">{"reinforcements":[{"new_element_id":"rb-ui-001","existing_element_id":"communicates-002","recommendation":"merge","confidence_boost":"Cross-process reinforcement elevates both to high confidence. Two completely independent pipelines — one from user calls, one from competitor analysis — arrive at the same design prescription: monthly total as the primary anchor."},{"new_element_id":"rb-ui-001","existing_element_id":"looks-003","recommendation":"keep_both","confidence_boost":"looks-003 gets a third-process validation from the reverse-benchmark pipeline."},{"new_element_id":"rb-ui-003","existing_element_id":"communicates-005","recommendation":"keep_both","confidence_boost":"Cross-process validation with unusually strong bilateral evidence: inside-out for host side, outside-in for guest side."},{"new_element_id":"rb-ui-004","existing_element_id":"guest-behaves-002","recommendation":"merge","confidence_boost":"Two completely independent pipelines arrive at the same specification. Strongest possible signal for this feature."},{"new_element_id":"rb-ui-005","existing_element_id":"communicates-003","recommendation":"merge","confidence_boost":"Merging produces a unified bilateral trust architecture element covering both host and guest commitment moments."}],"contradictions":[{"new_element_id":"rb-ui-003","existing_element_id":"communicates-005","conflict":"communicates-005 says 'no blank forms for counter-offers' on the host confirmation view. rb-ui-003 is an entire guest-side counter-offer panel. The apparent contradiction dissolves: they are different views for different users at different moments.","recommendation":"rb-ui-003 should only appear in the guest's proposal flow, never in the host's confirmation view.","severity":"warning"},{"new_element_id":"rb-ui-006","existing_element_id":"communicates-003","conflict":"communicates-003 prescribes max 3 trust signals and excludes aggregate statistics. rb-ui-006 adds a review sample-size signal. Resolution: rb-ui-006 is statistical transparency, not a trust credential — the constraint does not apply.","severity":"warning"}],"extensions":[{"new_element_id":"rb-ui-006","gap_filled":"No existing library element addresses the law-of-small-numbers problem in review display. rb-ui-006 is the first element to address statistical honesty in social proof.","needs_design_stack_validation":true},{"new_element_id":"rb-ui-002","gap_filled":"The library has a host-side ghost roommate explainer but no guest-facing explainer at listing evaluation. rb-ui-002 fills this gap.","needs_design_stack_validation":true},{"new_element_id":"rb-ui-005","gap_filled":"The library has communicates-003 (host perspective) but no element specifying what the bilateral trust screen looks like at the guest's commitment moment.","needs_design_stack_validation":true},{"new_element_id":"rb-ui-007","gap_filled":"The library has rb-ui-001 but no element making the monthly calculation legible for the ghost roommate model's complexity.","needs_design_stack_validation":false}],"cross_process_insights":[{"insight":"Monthly-first pricing is confirmed by three independent processes: design-stack (host calls), design-stack (guest calls), and reverse-benchmark (Anyplace analysis). This is the strongest cross-process signal in the library to date.","elements_involved":["rb-ui-001","communicates-002","looks-003","guest-communicates-004"]},{"insight":"The active stay phase is a category-wide void, confirmed by two independent processes: design-stack (Nneka's call) and reverse-benchmark (Anyplace's product is transactionally complete at booking).","elements_involved":["rb-ui-004","guest-behaves-002","guest-works-001"]},{"insight":"Trust at the commitment moment is confirmed as the most critical trust gap by two independent processes: design-stack (host workarounds) and reverse-benchmark (guest workarounds).","elements_involved":["rb-ui-005","communicates-003","works-004"]},{"insight":"Negotiation is already happening off-platform through agents, confirmed by two independent processes. The counter-offer panel formalizes what agents already do informally.","elements_involved":["rb-ui-003","communicates-005"]}],"coverage_map":{"discovery":{"element_count":1,"coverage":"thin"},"evaluation":{"element_count":3,"coverage":"moderate"},"onboarding":{"element_count":0,"coverage":"none"},"listing_creation":{"element_count":0,"coverage":"none"},"pricing":{"element_count":2,"coverage":"moderate"},"proposal_mgmt":{"element_count":2,"coverage":"strong"},"active_lease":{"element_count":1,"coverage":"moderate"},"retention":{"element_count":0,"coverage":"thin"}}}</script>

  <style>
    /* ── DESIGN TOKENS (Split Lease Production Style Guide) ─────── */
    :root {
      --primary-purple: #31135D;
      --primary-purple-hover: #251047;
      --secondary-purple: rgb(109, 49, 194);
      --accent-purple: rgb(140, 104, 238);
      --selected-purple: rgb(79, 48, 151);
      --text-dark: #1a1a1a;
      --text-gray: #6b7280;
      --text-light-gray: #9ca3af;
      --text-description: #374151;
      --bg-white: #ffffff;
      --bg-light: #f9fafb;
      --bg-light-gray: #f3f4f6;
      --bg-off-white: rgb(252, 250, 255);
      --border-color: #e5e7eb;
      --border-light: #f3f4f6;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
      --shadow-md: 0 2px 8px rgba(0,0,0,0.08);
      --shadow-purple-sm: 0 2px 4px rgba(49,19,93,0.2);
      --shadow-purple-md: 0 4px 8px rgba(49,19,93,0.15);
      --rounded-sm: 4px;
      --rounded-md: 6px;
      --rounded-lg: 8px;
      --rounded-xl: 12px;
      --rounded-2xl: 16px;
      --rounded-pill: 20px;
      --font-inter: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-dm: 'DM Sans', sans-serif;
      --gradient-purple-primary: linear-gradient(135deg, #31135D 0%, #5a2d8f 100%);
      --transition-base: 0.2s ease;
      --transition-slow: 0.3s ease-out;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: var(--font-inter); color: var(--text-dark); background: var(--bg-light-gray); line-height: 1.6; font-size: 14px; }

    /* ── HEADER ─────────────────────────────────────────────────── */
    .report-header {
      background: var(--gradient-purple-primary);
      color: #fff;
      padding: 36px 48px 32px;
      position: relative;
      overflow: hidden;
    }
    .report-header::after {
      content: '';
      position: absolute;
      top: -40px; right: -40px;
      width: 280px; height: 280px;
      background: rgba(255,255,255,0.04);
      border-radius: 50%;
      pointer-events: none;
    }
    .header-eyebrow {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: rgba(255,255,255,0.55);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .header-eyebrow::before {
      content: '';
      display: inline-block;
      width: 24px; height: 2px;
      background: rgba(255,255,255,0.3);
    }
    .report-header h1 {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 8px;
      line-height: 1.2;
    }
    .report-header h1 em { font-style: normal; color: rgba(255,255,255,0.75); }
    .header-meta {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 16px;
      align-items: center;
    }
    .meta-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 12px;
      border-radius: var(--rounded-pill);
      font-size: 12px;
      font-weight: 500;
      background: rgba(255,255,255,0.12);
      color: rgba(255,255,255,0.9);
      border: 1px solid rgba(255,255,255,0.2);
    }
    .meta-chip.status-running { background: rgba(255,190,50,0.2); border-color: rgba(255,190,50,0.4); color: #ffd966; }
    .header-lens {
      margin-top: 14px;
      font-size: 15px;
      color: rgba(255,255,255,0.8);
      max-width: 780px;
      line-height: 1.6;
      font-family: var(--font-dm);
    }

    /* ── TAB NAV ─────────────────────────────────────────────────── */
    .tab-nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--bg-white);
      border-bottom: 1px solid var(--border-color);
      padding: 0 48px;
      display: flex;
      gap: 0;
      overflow-x: auto;
      box-shadow: var(--shadow-md);
    }
    .tab-nav::-webkit-scrollbar { height: 0; }
    .tab-btn {
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
      padding: 14px 18px;
      font-family: var(--font-inter);
      font-size: 13px;
      font-weight: 500;
      color: var(--text-gray);
      cursor: pointer;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 7px;
      transition: all var(--transition-base);
    }
    .tab-btn:hover { color: var(--text-dark); }
    .tab-btn.active { color: var(--primary-purple); border-bottom-color: var(--primary-purple); }
    .tab-num {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px; height: 20px;
      border-radius: 50%;
      background: var(--bg-light-gray);
      font-size: 10px;
      font-weight: 700;
      color: var(--text-gray);
      transition: all var(--transition-base);
    }
    .tab-btn.active .tab-num { background: var(--primary-purple); color: #fff; }

    /* ── MAIN CONTENT ────────────────────────────────────────────── */
    .main { max-width: 1240px; margin: 0 auto; padding: 32px 48px 64px; }
    .tab-panel { display: none; animation: fadeUp 280ms ease-out; }
    .tab-panel.active { display: block; }
    @keyframes fadeUp { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }

    /* ── CARDS ───────────────────────────────────────────────────── */
    .card {
      background: var(--bg-white);
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-xl);
      padding: 24px 28px;
      margin-bottom: 16px;
      box-shadow: var(--shadow-sm);
      transition: box-shadow var(--transition-base);
    }
    .card:hover { box-shadow: var(--shadow-md); }
    .card-header {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 14px;
      padding-bottom: 14px;
      border-bottom: 1px solid var(--border-light);
      flex-wrap: wrap;
    }
    .card-header h3 { font-size: 18px; font-weight: 600; flex: 1; min-width: 200px; line-height: 1.3; color: var(--primary-purple); }
    .card h2 { font-size: 22px; font-weight: 700; color: var(--primary-purple); margin-bottom: 16px; }

    /* ── BADGES ──────────────────────────────────────────────────── */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 10px;
      border-radius: var(--rounded-pill);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      white-space: nowrap;
    }
    .badge-type-mediocre { background: rgba(99,102,241,0.1); color: #4338ca; }
    .badge-type-broken { background: rgba(220,53,69,0.1); color: #c53030; }
    .badge-type-missing { background: rgba(109,49,194,0.1); color: var(--secondary-purple); }
    .badge-type-trust { background: rgba(196,132,29,0.12); color: #92620e; }
    .badge-type-abandoned { background: rgba(107,78,230,0.1); color: #5a3ed5; }
    .badge-type-invisible { background: rgba(100,116,139,0.1); color: #475569; }
    .badge-priority-high { background: rgba(220,53,69,0.1); color: #c53030; }
    .badge-priority-medium { background: rgba(196,132,29,0.12); color: #92620e; }
    .badge-phase { background: rgba(49,19,93,0.08); color: var(--primary-purple); font-size: 10px; }
    .badge-strength-strong { background: rgba(75,71,206,0.1); color: #4b47ce; }
    .badge-strength-moderate { background: rgba(196,132,29,0.12); color: #92620e; }
    .badge-strength-weak { background: rgba(100,116,139,0.1); color: #475569; }
    .badge-effort-small { background: rgba(75,71,206,0.08); color: #4b47ce; }
    .badge-effort-medium { background: rgba(196,132,29,0.12); color: #92620e; }
    .badge-effort-large { background: rgba(220,53,69,0.1); color: #c53030; }

    /* ── PHASE TAGS ──────────────────────────────────────────────── */
    .phase-tags { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 12px; }

    /* ── DETAIL BOXES ────────────────────────────────────────────── */
    .detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 14px; }
    @media (max-width: 680px) { .detail-grid { grid-template-columns: 1fr; } }
    .detail-box { padding: 12px 14px; border-radius: var(--rounded-lg); font-size: 13px; line-height: 1.55; }
    .detail-box label { display: block; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-gray); margin-bottom: 4px; }
    .detail-box.problem { background: rgba(220,53,69,0.06); border-left: 3px solid #c53030; }
    .detail-box.solution { background: rgba(75,71,206,0.06); border-left: 3px solid #4b47ce; }
    .detail-box.info { background: rgba(49,19,93,0.04); border-left: 3px solid var(--primary-purple); }
    .detail-box.warn { background: rgba(196,132,29,0.08); border-left: 3px solid #c4841d; }

    /* ── COFFEE TEST ─────────────────────────────────────────────── */
    .coffee-test {
      margin-top: 12px;
      padding: 10px 14px;
      background: rgba(109,49,194,0.04);
      border-radius: var(--rounded-lg);
      font-size: 12px;
      color: var(--text-description);
      font-style: italic;
      border-left: 3px solid rgba(109,49,194,0.3);
    }
    .coffee-test::before { content: 'The coffee test: '; font-style: normal; font-weight: 600; color: var(--secondary-purple); }

    /* ── EXPAND TOGGLE ───────────────────────────────────────────── */
    .expand-btn {
      background: none;
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-sm);
      padding: 5px 12px;
      font-size: 12px;
      font-family: var(--font-inter);
      color: var(--text-gray);
      cursor: pointer;
      transition: all 0.15s ease;
      margin-top: 10px;
    }
    .expand-btn:hover { border-color: var(--primary-purple); color: var(--primary-purple); }
    .expandable { display: none; margin-top: 10px; }
    .expandable.open { display: block; }

    /* ── SECTION HEADING ─────────────────────────────────────────── */
    .section-heading {
      font-size: 22px;
      font-weight: 700;
      color: var(--primary-purple);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .section-heading small { font-size: 13px; font-weight: 400; color: var(--text-gray); }

    /* ── STAT GRID ───────────────────────────────────────────────── */
    .stat-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; margin-bottom: 24px; }
    .stat-cell {
      padding: 16px;
      background: var(--bg-white);
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-xl);
      text-align: center;
      box-shadow: var(--shadow-sm);
    }
    .stat-cell .num { font-size: 32px; font-weight: 700; color: var(--primary-purple); }
    .stat-cell .lbl { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-gray); margin-top: 4px; }

    /* ── COVERAGE MAP ────────────────────────────────────────────── */
    .coverage-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 8px; margin: 12px 0 20px; }
    .cov-cell {
      padding: 12px;
      border-radius: var(--rounded-lg);
      text-align: center;
      border: 1px solid var(--border-color);
    }
    .cov-cell .ph { font-size: 9px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-gray); margin-bottom: 4px; }
    .cov-cell .cn { font-size: 24px; font-weight: 700; }
    .cov-cell .cv { font-size: 10px; color: var(--text-gray); }
    .cov-strong { background: rgba(75,71,206,0.08); }
    .cov-moderate { background: rgba(49,19,93,0.05); }
    .cov-thin { background: rgba(196,132,29,0.08); }
    .cov-none { background: rgba(220,53,69,0.06); }

    /* ── PHASE CARD (competitor journey) ─────────────────────────── */
    .phase-card {
      background: var(--bg-white);
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-lg);
      padding: 18px;
      margin-bottom: 10px;
    }
    .phase-card h4 {
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--primary-purple);
      margin-bottom: 8px;
    }
    .phase-card p { font-size: 13px; color: var(--text-description); line-height: 1.55; margin-bottom: 6px; }
    .quality-badge { display: inline-block; margin-top: 6px; }

    /* ── OPPORTUNITY CARD ────────────────────────────────────────── */
    .opp-card {
      background: var(--bg-white);
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-xl);
      overflow: hidden;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
    }
    .opp-header {
      padding: 18px 24px;
      background: linear-gradient(135deg, rgba(49,19,93,0.06), rgba(109,49,194,0.04));
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: flex-start;
      gap: 14px;
    }
    .opp-rank {
      width: 36px; height: 36px;
      border-radius: 50%;
      background: var(--primary-purple);
      color: #fff;
      font-size: 16px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .opp-header h3 { font-size: 17px; font-weight: 600; color: var(--primary-purple); flex: 1; line-height: 1.3; }
    .opp-body { padding: 20px 24px; }
    .opp-score-grid { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
    .score-chip { padding: 3px 9px; border-radius: var(--rounded-pill); font-size: 10px; font-weight: 600; }
    .chip-high { background: rgba(75,71,206,0.1); color: #4b47ce; }
    .chip-strong { background: rgba(49,19,93,0.08); color: var(--primary-purple); }
    .chip-moderate { background: rgba(196,132,29,0.1); color: #92620e; }
    .chip-ambitious { background: rgba(220,53,69,0.08); color: #c53030; }
    .chip-entire-category { background: rgba(140,104,238,0.1); color: #6d31c2; }

    /* ── COHERENCE ───────────────────────────────────────────────── */
    .coherence-section { margin-bottom: 28px; }
    .coherence-section h3 { font-size: 16px; font-weight: 600; color: var(--primary-purple); margin-bottom: 12px; }
    .reinforce-card { padding: 14px 16px; border-radius: var(--rounded-lg); background: rgba(75,71,206,0.06); border-left: 4px solid #4b47ce; margin-bottom: 8px; font-size: 13px; }
    .contra-card { padding: 14px 16px; border-radius: var(--rounded-lg); background: rgba(220,53,69,0.06); border-left: 4px solid #c53030; margin-bottom: 8px; font-size: 13px; }
    .ext-card { padding: 14px 16px; border-radius: var(--rounded-lg); background: rgba(49,19,93,0.05); border-left: 4px solid var(--primary-purple); margin-bottom: 8px; font-size: 13px; }
    .insight-card { padding: 14px 16px; border-radius: var(--rounded-lg); background: rgba(109,49,194,0.06); border-left: 4px solid var(--secondary-purple); margin-bottom: 8px; font-size: 13px; }
    .card-lbl { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 4px; }

    /* ── UI ELEMENT PREVIEW ──────────────────────────────────────── */
    .ui-element-card {
      background: var(--bg-white);
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-xl);
      overflow: hidden;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
    }
    .ui-el-header {
      padding: 16px 22px;
      background: linear-gradient(135deg, var(--primary-purple), #5a2d8f);
      color: #fff;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .ui-el-header h3 { font-size: 16px; font-weight: 600; flex: 1; }
    .ui-el-body { padding: 20px 22px; }
    .ui-el-meta { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
    .preview-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: var(--secondary-purple);
      color: #fff;
      border: none;
      border-radius: var(--rounded-pill);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      font-family: var(--font-inter);
      transition: background var(--transition-base);
      text-decoration: none;
    }
    .preview-btn:hover { background: var(--accent-purple); }
    .iframe-container { display: none; margin-top: 16px; border-radius: var(--rounded-lg); overflow: hidden; border: 1px solid var(--border-color); }
    .iframe-container.open { display: block; }
    .iframe-container iframe { width: 100%; border: none; display: block; }
    .before-after {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 14px;
    }
    @media (max-width: 680px) { .before-after { grid-template-columns: 1fr; } }
    .ba-box { padding: 12px 14px; border-radius: var(--rounded-lg); font-size: 12px; line-height: 1.55; }
    .ba-box label { display: block; font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 4px; }
    .ba-before { background: rgba(220,53,69,0.05); border-left: 3px solid #c53030; }
    .ba-before label { color: #c53030; }
    .ba-after { background: rgba(75,71,206,0.05); border-left: 3px solid #4b47ce; }
    .ba-after label { color: #4b47ce; }

    /* ── CROSSREF ────────────────────────────────────────────────── */
    .crossref-card {
      padding: 16px;
      background: var(--bg-white);
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-lg);
      margin-bottom: 10px;
      font-size: 13px;
      line-height: 1.55;
    }
    .crossref-card h4 { font-size: 14px; font-weight: 600; color: var(--primary-purple); margin-bottom: 8px; }
    .quote-block {
      background: var(--bg-off-white);
      border-left: 3px solid var(--secondary-purple);
      padding: 8px 12px;
      border-radius: 0 var(--rounded-md) var(--rounded-md) 0;
      margin: 8px 0;
      font-style: italic;
      font-size: 13px;
      color: var(--text-description);
    }

    /* ── CLUSTER CARD ────────────────────────────────────────────── */
    .cluster-card {
      background: linear-gradient(135deg, rgba(49,19,93,0.04), rgba(109,49,194,0.03));
      border: 1px solid rgba(49,19,93,0.12);
      border-radius: var(--rounded-xl);
      padding: 20px;
      margin-bottom: 14px;
    }
    .cluster-card h4 { font-size: 15px; font-weight: 600; color: var(--primary-purple); margin-bottom: 8px; }
    .cluster-card p { font-size: 13px; color: var(--text-description); line-height: 1.55; }
    .cluster-ids { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 10px; }
    .cluster-id { background: rgba(49,19,93,0.08); color: var(--primary-purple); padding: 2px 9px; border-radius: var(--rounded-pill); font-size: 10px; font-weight: 600; }

    /* ── FOOTER ──────────────────────────────────────────────────── */
    footer {
      text-align: center;
      padding: 32px;
      color: var(--text-light-gray);
      font-size: 11px;
      font-family: var(--font-inter);
      border-top: 1px solid var(--border-light);
      margin-top: 40px;
    }

    /* ── RESPONSIVE ──────────────────────────────────────────────── */
    @media (max-width: 768px) {
      .report-header, .main, .tab-nav { padding-left: 20px; padding-right: 20px; }
      .report-header h1 { font-size: 22px; }
    }
    @media print {
      .tab-nav { display: none; }
      .tab-panel { display: block !important; }
      body { background: white; }
    }
  </style>
</head>
<body>

  <!-- ── HEADER ────────────────────────────────────────────────────── -->
  <header class="report-header">
    <div class="header-eyebrow">Reverse-Benchmark Report</div>
    <h1>Anyplace <em>×</em> Kahneman Part 2</h1>
    <p class="header-lens" id="header-lens"></p>
    <div class="header-meta">
      <span class="meta-chip" id="meta-run-id"></span>
      <span class="meta-chip" id="meta-date"></span>
      <span class="meta-chip status-running" id="meta-status"></span>
      <span class="meta-chip" id="meta-elements"></span>
      <span class="meta-chip" id="meta-competitor"></span>
    </div>
  </header>

  <!-- ── TAB NAV ───────────────────────────────────────────────────── -->
  <nav class="tab-nav" id="tab-nav">
    <button class="tab-btn active" data-tab="overview"><span class="tab-num">*</span> Overview</button>
    <button class="tab-btn" data-tab="journey"><span class="tab-num">0</span> Competitor Journey</button>
    <button class="tab-btn" data-tab="disappoint"><span class="tab-num">1</span> Disappointments</button>
    <button class="tab-btn" data-tab="crossref"><span class="tab-num">2</span> Cross-Reference</button>
    <button class="tab-btn" data-tab="opps"><span class="tab-num">3</span> Opportunities</button>
    <button class="tab-btn" data-tab="elements"><span class="tab-num">4</span> UI Elements</button>
    <button class="tab-btn" data-tab="coherence"><span class="tab-num">5</span> Coherence</button>
  </nav>

  <main class="main">

    <!-- ── OVERVIEW TAB ──────────────────────────────────────────────── -->
    <div class="tab-panel active" id="panel-overview">
      <div class="stat-grid" id="stat-grid"></div>

      <div class="card" style="margin-bottom:24px;">
        <h2>Run Summary</h2>
        <p id="overview-thesis" style="font-size:15px;color:var(--text-description);line-height:1.7;"></p>
      </div>

      <div class="section-heading">Journey Phase Coverage</div>
      <div class="coverage-grid" id="coverage-grid"></div>

      <div class="section-heading">Category Blind Spots <small>(high-signature opportunities)</small></div>
      <div id="blind-spots"></div>

      <div class="section-heading">Disappointment Clusters</div>
      <div id="clusters"></div>
    </div>

    <!-- ── COMPETITOR JOURNEY TAB ─────────────────────────────────────── -->
    <div class="tab-panel" id="panel-journey">
      <div class="section-heading">Layer 0: Competitor Journey Analysis <small>(Anyplace)</small></div>
      <div class="card" style="margin-bottom:20px;">
        <h3 style="font-size:16px;font-weight:600;color:var(--primary-purple);margin-bottom:8px;">Competitor Overview</h3>
        <div id="competitor-overview"></div>
      </div>
      <div id="phase-cards"></div>
    </div>

    <!-- ── DISAPPOINTMENTS TAB ────────────────────────────────────────── -->
    <div class="tab-panel" id="panel-disappoint">
      <div class="section-heading">Layer 1: Disappointments <small id="disappoint-count"></small></div>
      <div class="card" style="margin-bottom:20px; background: rgba(49,19,93,0.03); border-color: rgba(49,19,93,0.12);">
        <p id="disappoint-summary" style="font-size:14px;color:var(--text-description);line-height:1.7;"></p>
      </div>
      <div id="disappoint-cards"></div>
    </div>

    <!-- ── CROSS-REFERENCE TAB ───────────────────────────────────────── -->
    <div class="tab-panel" id="panel-crossref">
      <div class="section-heading">Layer 2: Cross-Reference with Split Lease Calls</div>
      <div class="card" style="margin-bottom:20px; background: rgba(49,19,93,0.03); border-color: rgba(49,19,93,0.12);">
        <p id="crossref-summary" style="font-size:14px;color:var(--text-description);line-height:1.7;"></p>
      </div>
      <div class="section-heading" style="font-size:16px;margin-top:8px;">Validated Disappointments</div>
      <div id="validated-cards"></div>
      <div class="section-heading" style="font-size:16px;margin-top:24px;">New Discoveries (Split Lease-Specific)</div>
      <div id="discovery-cards"></div>
    </div>

    <!-- ── OPPORTUNITIES TAB ──────────────────────────────────────────── -->
    <div class="tab-panel" id="panel-opps">
      <div class="section-heading">Layer 3: Opportunities</div>
      <div class="card" style="margin-bottom:24px; background: rgba(49,19,93,0.03); border-color: rgba(49,19,93,0.12);">
        <p id="opp-thesis" style="font-size:14px;color:var(--text-description);line-height:1.7;"></p>
      </div>
      <div id="opp-cards"></div>
    </div>

    <!-- ── UI ELEMENTS TAB ────────────────────────────────────────────── -->
    <div class="tab-panel" id="panel-elements">
      <div class="section-heading">Layer 4: UI Elements <small id="element-count"></small></div>
      <div id="element-cards"></div>
    </div>

    <!-- ── COHERENCE TAB ──────────────────────────────────────────────── -->
    <div class="tab-panel" id="panel-coherence">
      <div class="section-heading">Layer 5: Coherence Report</div>

      <div class="coherence-section">
        <h3>Reinforcements</h3>
        <div id="reinforcement-cards"></div>
      </div>

      <div class="coherence-section">
        <h3>Contradictions</h3>
        <div id="contradiction-cards"></div>
      </div>

      <div class="coherence-section">
        <h3>Extensions (New Library Territory)</h3>
        <div id="extension-cards"></div>
      </div>

      <div class="coherence-section">
        <h3>Cross-Process Insights</h3>
        <div id="insight-cards"></div>
      </div>
    </div>

  </main>

  <footer>
    SplitLease Design Stack v2.0 — Reverse-Benchmark Pipeline · Run 2026-02-18_1400 · Competitor: Anyplace · Lens: Kahneman Part 2
  </footer>

  <!-- ── UI ELEMENT HTML DATA (stored as text/x-html) ────────────────── -->
  <template id="rb-ui-001-html"><!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Monthly-First Search Card</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>*{box-sizing:border-box;margin:0;padding:0}:root{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--text-dark:#1a1a1a;--text-gray:#6b7280;--bg-white:#ffffff;--border-color:#e5e7eb;--shadow-purple-md:0 4px 8px rgba(49,19,93,0.15)}body{font-family:'Inter',sans-serif;background:#f3f4f6;display:flex;flex-direction:column;align-items:center;padding:24px;gap:16px}.compare-bar{background:var(--primary-purple);color:#fff;text-align:center;font-size:11px;font-weight:500;padding:10px 20px;border-radius:8px;max-width:680px;width:100%}.compare-bar span{opacity:0.5;margin:0 8px}.cards-grid{display:grid;grid-template-columns:repeat(2,minmax(280px,320px));gap:20px}.listing-card{background:var(--bg-white);border:1px solid var(--border-color);border-radius:12px;overflow:hidden;cursor:pointer;transition:all 0.2s ease}.listing-card:hover{border-color:var(--secondary-purple);box-shadow:var(--shadow-purple-md);transform:translateY(-2px)}.card-photo{width:100%;height:180px;position:relative;overflow:hidden}.card-save{position:absolute;top:10px;right:10px;width:30px;height:30px;background:rgba(255,255,255,0.9);border-radius:50%;display:flex;align-items:center;justify-content:center}.card-photo-label{position:absolute;bottom:10px;left:10px;background:rgba(49,19,93,0.82);color:#fff;font-size:11px;font-weight:600;padding:3px 10px;border-radius:20px}.card-info{padding:14px 16px 16px}.card-top-row{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:6px}.card-address{font-size:14px;font-weight:600;color:var(--text-dark);flex:1;padding-right:12px;line-height:1.3}.price-block{text-align:right;flex-shrink:0;position:relative}.price-monthly{font-size:20px;font-weight:700;color:var(--text-dark);display:block;line-height:1}.price-per-night{font-size:12px;color:var(--text-gray);display:block;margin-top:3px}.card-meta{display:flex;align-items:center;gap:6px;flex-wrap:wrap;margin-top:8px}.schedule-badge{background:rgba(109,49,194,0.09);color:var(--secondary-purple);font-size:11px;font-weight:600;padding:3px 10px;border-radius:20px}.meta-dot{width:3px;height:3px;background:#d1d5db;border-radius:50%}.meta-text{font-size:12px;color:var(--text-gray)}.card-footer{display:flex;align-items:center;justify-content:space-between;margin-top:10px;padding-top:10px;border-top:1px solid #f3f4f6}.rating-star{color:var(--secondary-purple)}.rating-score{font-size:13px;font-weight:600;color:var(--text-dark)}.rating-count{font-size:12px;color:var(--text-gray)}.card-avail{font-size:11px;color:#4B47CE;font-weight:500}</style></head>
<body>
<div class="compare-bar">Split Lease shows what you actually commit to — not what makes the price look smallest<span>|</span>Competitors show $88/night &nbsp; Split Lease shows $1,760/mo</div>
<div class="cards-grid">
<div class="listing-card"><div class="card-photo" style="background:linear-gradient(160deg,#b8a0dc 0%,#7b5db5 60%,#31135D 100%)"><div class="card-save"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg></div><div class="card-photo-label">Williamsburg · 2BR</div></div><div class="card-info"><div class="card-top-row"><div class="card-address">247 Metropolitan Ave<br><span style="font-weight:400;color:#6b7280;font-size:12px">2 bed · 1 bath · 820 sqft</span></div><div class="price-block"><span class="price-monthly">$1,760<span style="font-size:13px;font-weight:500">/mo</span></span><span class="price-per-night">$88/night · 4 nights/wk</span></div></div><div class="card-meta"><span class="schedule-badge">Mon–Thu</span><span class="meta-dot"></span><span class="meta-text">Available Feb 24</span></div><div class="card-footer"><div style="display:flex;align-items:center;gap:4px"><span class="rating-star">★</span><span class="rating-score">4.8</span><span class="rating-count">(12)</span></div><span class="card-avail">2 interested</span></div></div></div>
<div class="listing-card"><div class="card-photo" style="background:linear-gradient(160deg,#d4c5f0 0%,#9b76d0 55%,#4a2090 100%)"><div class="card-save"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg></div><div class="card-photo-label">Astoria · Studio</div></div><div class="card-info"><div class="card-top-row"><div class="card-address">31-08 34th Ave<br><span style="font-weight:400;color:#6b7280;font-size:12px">Studio · 1 bath · 480 sqft</span></div><div class="price-block"><span class="price-monthly">$1,118<span style="font-size:13px;font-weight:500">/mo</span></span><span class="price-per-night">$87/night · 3 nights/wk</span></div></div><div class="card-meta"><span class="schedule-badge">Tue–Thu</span><span class="meta-dot"></span><span class="meta-text">Available now</span></div><div class="card-footer"><div style="display:flex;align-items:center;gap:4px"><span class="rating-star">★</span><span class="rating-score">4.9</span><span class="rating-count">(7)</span></div><span class="card-avail">Available now</span></div></div></div>
</div></body></html></template>

  <script>
    /* ─── HELPERS ───────────────────────────────────────────────── */
    function loadJSON(id) { try { return JSON.parse(document.getElementById(id)?.textContent || '{}'); } catch { return {}; } }
    function esc(s) { return String(s || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
    function phaseBadges(arr) { return (arr||[]).map(p=>`<span class="badge badge-phase">${esc(p)}</span>`).join(''); }
    function typeBadge(t) {
      const map = { mediocre_default:'badge-type-mediocre', broken_promise:'badge-type-broken', missing_delight:'badge-type-missing', trust_vacuum:'badge-type-trust', abandoned_phase:'badge-type-abandoned', invisible_labor:'badge-type-invisible' };
      const label = (t||'').replace(/_/g,' ');
      return `<span class="badge ${map[t]||''}">${esc(label)}</span>`;
    }

    /* ─── LOAD DATA ─────────────────────────────────────────────── */
    const config = loadJSON('run-config');
    const L0 = loadJSON('data-layer-0');
    const L1 = loadJSON('data-layer-1');
    const L2 = loadJSON('data-layer-2');
    const L3 = loadJSON('data-layer-3');
    const L4 = loadJSON('data-layer-4');
    const L5 = loadJSON('data-layer-5');

    /* ─── HEADER ────────────────────────────────────────────────── */
    document.getElementById('header-lens').textContent = L0.lens?.lens_summary || '';
    document.getElementById('meta-run-id').textContent = config.run_id || '';
    document.getElementById('meta-date').textContent = config.started_at ? new Date(config.started_at).toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}) : '';
    const statusEl = document.getElementById('meta-status');
    statusEl.textContent = config.status || 'running';
    document.getElementById('meta-competitor').textContent = 'Competitor: ' + (config.lens?.competitor || '');
    const totalEl = (L4.elements||[]).length;
    document.getElementById('meta-elements').textContent = `${totalEl} UI elements`;

    /* ─── TAB NAV ───────────────────────────────────────────────── */
    document.getElementById('tab-nav').addEventListener('click', e => {
      const btn = e.target.closest('[data-tab]');
      if (!btn) return;
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById('panel-' + btn.dataset.tab).classList.add('active');
    });

    /* ─── EXPAND TOGGLE ─────────────────────────────────────────── */
    document.addEventListener('click', e => {
      if (e.target.classList.contains('expand-btn')) {
        const target = document.getElementById(e.target.dataset.target);
        if (!target) return;
        target.classList.toggle('open');
        e.target.textContent = target.classList.contains('open') ? 'Collapse' : e.target.dataset.label || 'Expand';
      }
    });

    /* ─── IFRAME PREVIEW ────────────────────────────────────────── */
    document.addEventListener('click', e => {
      if (e.target.classList.contains('preview-btn')) {
        const id = e.target.dataset.iframe;
        const container = document.getElementById(id);
        if (!container) return;
        if (!container.classList.contains('open')) {
          container.classList.add('open');
          const tmpl = document.getElementById(e.target.dataset.template);
          if (tmpl && !container.querySelector('iframe')) {
            const blob = new Blob([tmpl.innerHTML], {type:'text/html'});
            const url = URL.createObjectURL(blob);
            const iframe = document.createElement('iframe');
            iframe.src = url;
            iframe.style.height = '420px';
            container.appendChild(iframe);
          }
          e.target.textContent = 'Hide preview';
        } else {
          container.classList.remove('open');
          e.target.textContent = 'Preview';
        }
      }
    });

    /* ─── OVERVIEW TAB ──────────────────────────────────────────── */
    // Stats
    const disappts = L1.disappointments || [];
    const opps = L3.opportunities || [];
    const elements = L4.elements || [];
    const reinforcements = L5.reinforcements || [];
    const contradictions = L5.contradictions || [];
    const extensions = L5.extensions || [];
    const statGrid = document.getElementById('stat-grid');
    [
      { num: disappts.length, lbl: 'Disappointments' },
      { num: opps.length, lbl: 'Opportunities' },
      { num: elements.length, lbl: 'UI Elements' },
      { num: reinforcements.length, lbl: 'Reinforcements' },
      { num: contradictions.length, lbl: 'Contradictions' },
      { num: extensions.length, lbl: 'Extensions' },
      { num: (L2.validated_disappointments||[]).filter(d=>d.validation_strength==='strong').length, lbl: 'Strong Validations' },
      { num: (L2.new_discoveries||[]).length, lbl: 'New Discoveries' },
    ].forEach(s => {
      statGrid.innerHTML += `<div class="stat-cell"><div class="num">${s.num}</div><div class="lbl">${s.lbl}</div></div>`;
    });

    document.getElementById('overview-thesis').textContent = L3.opportunity_thesis || L0.lens?.lens_summary || '';

    // Coverage
    const covGrid = document.getElementById('coverage-grid');
    const covMap = L5.coverage_map || {};
    Object.entries(covMap).forEach(([phase, info]) => {
      const cov = info.coverage || 'none';
      const cls = {strong:'cov-strong', moderate:'cov-moderate', thin:'cov-thin', none:'cov-none'}[cov] || 'cov-none';
      covGrid.innerHTML += `<div class="cov-cell ${cls}"><div class="ph">${phase.replace(/_/g,' ')}</div><div class="cn">${info.element_count||0}</div><div class="cv">${cov}</div></div>`;
    });

    // Blind spots
    const bsEl = document.getElementById('blind-spots');
    (L0.category_blind_spots||[]).filter(b=>b.signature_potential==='high').forEach(b => {
      bsEl.innerHTML += `<div class="detail-box info" style="margin-bottom:8px;"><strong>${esc(b.blind_spot)}</strong></div>`;
    });

    // Clusters
    const clustEl = document.getElementById('clusters');
    (L1.disappointment_clusters||[]).forEach(c => {
      clustEl.innerHTML += `<div class="cluster-card"><h4>${esc(c.cluster_name)}</h4><p>${esc(c.signature_potential||'')}</p><div class="cluster-ids">${(c.disappointment_ids||[]).map(id=>`<span class="cluster-id">${esc(id)}</span>`).join('')}</div></div>`;
    });

    /* ─── COMPETITOR JOURNEY TAB ────────────────────────────────── */
    const ov = L0.competitor_overview || {};
    const ovEl = document.getElementById('competitor-overview');
    ovEl.innerHTML = `
      <div class="detail-grid">
        <div class="detail-box info"><label>Category</label>${esc(ov.category)}</div>
        <div class="detail-box info"><label>Business Model</label>${esc(ov.business_model)}</div>
        <div class="detail-box info"><label>Primary Strength</label>${esc(ov.primary_strength)}</div>
        <div class="detail-box info"><label>Brand Perception</label>${esc(ov.brand_perception)}</div>
      </div>`;

    const phasesEl = document.getElementById('phase-cards');
    const qualityBadge = q => {
      const m = {good:'chip-high',adequate:'chip-moderate',weak:'chip-ambitious'};
      return `<span class="badge score-chip ${m[q]||''}">${esc(q)}</span>`;
    };
    Object.entries(L0.phases||{}).forEach(([phase, data]) => {
      const expandId = 'phase-expand-' + phase;
      phasesEl.innerHTML += `
        <div class="phase-card">
          <h4>${phase.replace(/_/g,' ')} ${qualityBadge(data.quality_level)}</h4>
          <p>${esc(data.what_they_do)}</p>
          <button class="expand-btn" data-target="${expandId}" data-label="What nobody in category does">What nobody in category does</button>
          <div class="expandable" id="${expandId}">
            <div class="detail-box warn" style="margin-top:8px;"><label>Category Gap</label>${esc(data.what_nobody_in_category_does)}</div>
          </div>
        </div>`;
    });

    /* ─── DISAPPOINTMENTS TAB ───────────────────────────────────── */
    document.getElementById('disappoint-count').textContent = `(${disappts.length} identified)`;
    document.getElementById('disappoint-summary').textContent = L1.disappointment_summary || '';
    const disapptEl = document.getElementById('disappoint-cards');
    disappts.forEach(d => {
      const expandId = 'dis-exp-' + d.id;
      disapptEl.innerHTML += `
        <div class="card">
          <div class="card-header">
            <h3>${esc(d.title)}</h3>
            ${typeBadge(d.type)}
            <span class="badge badge-phase">${esc(d.competitor_phase)}</span>
          </div>
          <div class="detail-grid">
            <div class="detail-box warn"><label>Frequency</label>${esc(d.severity?.frequency)}</div>
            <div class="detail-box warn"><label>Impact</label>${esc(d.severity?.impact)}</div>
          </div>
          <div class="coffee-test">${esc(d.the_coffee_test)}</div>
          <button class="expand-btn" data-target="${expandId}" data-label="Expand detail">Expand detail</button>
          <div class="expandable" id="${expandId}">
            <div class="detail-box" style="margin-top:8px;background:rgba(100,116,139,0.04);border-left:3px solid #94a3b8;">
              <label>Visibility</label>${esc(d.severity?.visibility)}
            </div>
          </div>
        </div>`;
    });

    /* ─── CROSS-REFERENCE TAB ───────────────────────────────────── */
    document.getElementById('crossref-summary').textContent = L2.crossref_summary || '';

    const valEl = document.getElementById('validated-cards');
    (L2.validated_disappointments||[]).forEach(v => {
      const strengthCls = { strong: 'badge-strength-strong', moderate: 'badge-strength-moderate', weak: 'badge-strength-weak' }[v.validation_strength] || '';
      valEl.innerHTML += `
        <div class="crossref-card">
          <h4>${esc(v.disappointment_id)} <span class="badge ${strengthCls}" style="font-size:10px;">${esc(v.validation_strength)} validation</span></h4>
          <p style="font-size:13px;color:var(--text-description);line-height:1.55;">${esc(v.user_language)}</p>
          ${(v.transcript_evidence||[]).slice(0,2).map(ev=>`<div class="quote-block"><strong>${esc(ev.transcript)}</strong><br>"${esc(ev.quote)}"</div>`).join('')}
        </div>`;
    });

    const discEl = document.getElementById('discovery-cards');
    (L2.new_discoveries||[]).forEach(d => {
      discEl.innerHTML += `
        <div class="crossref-card" style="background:rgba(49,19,93,0.03);border-color:rgba(49,19,93,0.12);">
          <h4><span class="badge badge-priority-medium" style="margin-right:6px;">${esc(d.id)}</span> ${esc(d.title)}</h4>
          <p style="font-size:13px;color:var(--text-description);line-height:1.55;">${esc(d.framework_analysis)}</p>
          ${(d.transcript_evidence||[]).slice(0,1).map(ev=>`<div class="quote-block"><strong>${esc(ev.transcript)}</strong><br>"${esc(ev.quote)}"</div>`).join('')}
        </div>`;
    });

    /* ─── OPPORTUNITIES TAB ─────────────────────────────────────── */
    document.getElementById('opp-thesis').textContent = L3.opportunity_thesis || '';
    const rankMap = {};
    (L3.opportunity_ranking||[]).forEach(r => { rankMap[r.id] = r.rank; });

    const oppEl = document.getElementById('opp-cards');
    (L3.opportunities||[]).forEach(o => {
      const rank = rankMap[o.id] || '—';
      const sc = o.opportunity_score || {};
      const expandId = 'opp-exp-' + o.id;
      const chipFor = (v, label) => {
        const cls = v === 'high' || v === 'strong' || v === 'entire_category' || v === 'straightforward' || v === 'core_to_brand' ? 'chip-high chip-strong' : v === 'moderate' ? 'chip-moderate' : v === 'ambitious' ? 'chip-ambitious' : 'chip-entire-category';
        return `<span class="score-chip ${cls}">${esc(label)}: ${esc(v)}</span>`;
      };
      oppEl.innerHTML += `
        <div class="opp-card">
          <div class="opp-header">
            <div class="opp-rank">${rank}</div>
            <div style="flex:1">
              <h3>${esc(o.title)}</h3>
              <div class="phase-tags" style="margin-top:8px;">${(o.split_lease_phases||[]).map(p=>`<span class="badge badge-phase">${esc(p)}</span>`).join('')}</div>
            </div>
          </div>
          <div class="opp-body">
            <p style="font-size:14px;color:var(--text-description);line-height:1.65;margin-bottom:12px;">${esc(o.the_signature)}</p>
            <div class="opp-score-grid">
              ${chipFor(sc.signature_potential,'Signature')}
              ${chipFor(sc.category_gap,'Gap')}
              ${chipFor(sc.user_validation,'Validation')}
              ${chipFor(sc.feasibility,'Feasibility')}
            </div>
            <button class="expand-btn" data-target="${expandId}" data-label="Why competitors won't copy">Why competitors won't copy</button>
            <div class="expandable" id="${expandId}">
              <div class="detail-box info" style="margin-top:8px;"><label>Why competitors won't copy</label>${esc(o.why_competitors_wont_copy)}</div>
            </div>
          </div>
        </div>`;
    });

    /* ─── UI ELEMENTS TAB ───────────────────────────────────────── */
    document.getElementById('element-count').textContent = `(${elements.length} elements)`;
    const elContainer = document.getElementById('element-cards');
    elements.forEach(el => {
      const effortCls = { small: 'badge-effort-small', medium: 'badge-effort-medium', large: 'badge-effort-large' }[el.effort] || '';
      const priorityCls = el.priority === 'high' ? 'badge-priority-high' : 'badge-priority-medium';
      const iframeId = 'iframe-' + el.id;
      const tmplId = el.id + '-html';
      const hasTmpl = !!document.getElementById(tmplId);
      elContainer.innerHTML += `
        <div class="ui-element-card">
          <div class="ui-el-header">
            <div style="width:32px;height:32px;border-radius:50%;background:rgba(255,255,255,0.15);display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;flex-shrink:0;">${esc(el.id.replace('rb-ui-',''))}</div>
            <h3>${esc(el.name)}</h3>
            <span class="badge ${priorityCls}">${esc(el.priority)}</span>
            <span class="badge ${effortCls}">${esc(el.effort)} effort</span>
          </div>
          <div class="ui-el-body">
            <div class="ui-el-meta">
              ${(el.journey_phases||[]).map(p=>`<span class="badge badge-phase">${esc(p)}</span>`).join('')}
              <span class="badge badge-type-mediocre">${esc(el.category)}</span>
            </div>
            <p style="font-size:14px;color:var(--text-description);line-height:1.6;margin-bottom:10px;"><strong>Problem:</strong> ${esc(el.problem_it_solves)}</p>
            <p style="font-size:13px;color:var(--text-description);line-height:1.55;margin-bottom:14px;"><strong>Signature:</strong> ${esc(el.why_this_is_a_signature)}</p>
            <div class="before-after">
              <div class="ba-box ba-before"><label>Before (Anyplace / Category)</label>Per-night pricing or fixed flows — no innovation at this phase.</div>
              <div class="ba-box ba-after"><label>After (Split Lease)</label>${esc(el.why_this_is_a_signature)}</div>
            </div>
            ${hasTmpl ? `<button class="preview-btn" data-iframe="${iframeId}" data-template="${tmplId}" style="margin-top:16px;">Preview</button>` : ''}
            <div class="iframe-container" id="${iframeId}"></div>
          </div>
        </div>`;
    });

    /* ─── COHERENCE TAB ─────────────────────────────────────────── */
    const rcEl = document.getElementById('reinforcement-cards');
    reinforcements.forEach(r => {
      const rec = r.recommendation === 'merge' ? '🔀 MERGE' : 'Keep both';
      rcEl.innerHTML += `
        <div class="reinforce-card">
          <div class="card-lbl" style="color:#4b47ce;">Reinforcement · ${esc(rec)}</div>
          <p><strong>${esc(r.new_element_id)}</strong> ↔ <strong>${esc(r.existing_element_id)}</strong></p>
          <p style="margin-top:4px;font-size:12px;color:var(--text-description);">${esc(r.confidence_boost)}</p>
        </div>`;
    });

    const ccEl = document.getElementById('contradiction-cards');
    contradictions.forEach(c => {
      ccEl.innerHTML += `
        <div class="contra-card">
          <div class="card-lbl" style="color:#c53030;">Warning · ${esc(c.severity||'warning')}</div>
          <p><strong>${esc(c.new_element_id)}</strong> ↔ <strong>${esc(c.existing_element_id)}</strong></p>
          <p style="margin-top:4px;font-size:12px;color:var(--text-description);">${esc(c.recommendation)}</p>
        </div>`;
    });

    const extEl = document.getElementById('extension-cards');
    extensions.forEach(ex => {
      extEl.innerHTML += `
        <div class="ext-card">
          <div class="card-lbl" style="color:var(--primary-purple);">New Territory · ${esc(ex.new_element_id)}</div>
          <p style="font-size:13px;color:var(--text-description);margin-top:4px;">${esc(ex.gap_filled)}</p>
          <p style="font-size:11px;color:var(--text-gray);margin-top:6px;">${ex.needs_design_stack_validation ? 'Needs design-stack validation before high confidence.' : 'Can be validated alongside rb-ui-001.'}</p>
        </div>`;
    });

    const insEl = document.getElementById('insight-cards');
    (L5.cross_process_insights||[]).forEach(i => {
      insEl.innerHTML += `
        <div class="insight-card">
          <div class="card-lbl" style="color:var(--secondary-purple);">Cross-Process Insight</div>
          <p style="font-size:13px;color:var(--text-description);margin-top:4px;line-height:1.6;">${esc(i.insight)}</p>
          <div style="display:flex;gap:5px;flex-wrap:wrap;margin-top:8px;">${(i.elements_involved||[]).map(e=>`<span class="cluster-id">${esc(e)}</span>`).join('')}</div>
        </div>`;
    });

  </script>
</body>
</html>
