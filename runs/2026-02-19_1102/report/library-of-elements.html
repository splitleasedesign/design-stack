<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library of Elements â€” Design Stack v2 | Run 2026-02-19_1102</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --primary-purple:#31135D;
  --secondary-purple:rgb(109,49,194);
  --accent-purple:rgb(140,104,238);
  --bg-white:#ffffff;
  --bg-light:#f9fafb;
  --bg-light-gray:#f3f4f6;
  --bg-off-white:rgb(252,250,255);
  --text-dark:#1a1a1a;
  --text-gray:#6b7280;
  --text-light-gray:#9ca3af;
  --text-description:#374151;
  --border-color:#e5e7eb;
  --shadow-sm:0 1px 3px rgba(0,0,0,0.05);
  --shadow-md:0 2px 8px rgba(0,0,0,0.08);
  --shadow-lg:0 4px 16px rgba(0,0,0,0.1);
  --shadow-purple-md:0 4px 8px rgba(49,19,93,0.15);
  --rounded-sm:4px;--rounded-md:6px;--rounded-lg:8px;--rounded-xl:12px;--rounded-2xl:16px;--rounded-pill:20px;
  --font-inter:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  --font-dm:'DM Sans',sans-serif;
  --transition-fast:0.15s;--transition-base:0.2s;--transition-slow:0.3s;
}
html{scroll-behavior:smooth}
body{font-family:var(--font-inter);background:var(--bg-light);color:var(--text-dark);line-height:1.5;-webkit-font-smoothing:antialiased}
.lib-header{background:linear-gradient(135deg,#31135D 0%,#4a1f8a 50%,#5a2d8f 100%);padding:48px 32px 40px;position:relative;overflow:hidden}
.lib-header::before{content:'';position:absolute;top:-60%;right:-10%;width:500px;height:500px;background:radial-gradient(circle,rgba(140,104,238,0.15) 0%,transparent 70%);pointer-events:none}
.lib-header__inner{max-width:1320px;margin:0 auto;position:relative;z-index:1}
.lib-header__badge{display:inline-block;background:rgba(255,255,255,0.12);color:rgba(255,255,255,0.85);font-size:11px;font-weight:600;padding:4px 12px;border-radius:var(--rounded-pill);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:16px;backdrop-filter:blur(4px)}
.lib-header__title{font-size:36px;font-weight:800;color:#fff;margin-bottom:8px;letter-spacing:-0.5px}
.lib-header__sub{font-family:var(--font-dm);font-size:16px;color:rgba(255,255,255,0.7);max-width:600px;line-height:1.6}
.lib-header__meta{display:flex;gap:24px;margin-top:20px;flex-wrap:wrap}
.lib-header__meta-item{font-size:12px;color:rgba(255,255,255,0.55);font-family:var(--font-dm)}
.lib-header__meta-item strong{color:rgba(255,255,255,0.85);font-weight:600}
.lib-toolbar{position:sticky;top:0;z-index:100;background:rgba(255,255,255,0.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border-color);padding:12px 32px;transition:box-shadow var(--transition-base)}
.lib-toolbar.scrolled{box-shadow:var(--shadow-md)}
.lib-toolbar__inner{max-width:1320px;margin:0 auto;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.lib-search{position:relative;flex:1;min-width:220px;max-width:400px}
.lib-search__input{width:100%;padding:9px 14px 9px 36px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);font-family:var(--font-inter);font-size:13px;background:var(--bg-white);color:var(--text-dark);transition:border-color var(--transition-fast);outline:none}
.lib-search__input:focus{border-color:var(--secondary-purple)}
.lib-search__icon{position:absolute;left:11px;top:50%;transform:translateY(-50%);color:var(--text-light-gray);font-size:14px;pointer-events:none}
.lib-filters{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.lib-filter-group{position:relative}
.lib-filter-btn{display:inline-flex;align-items:center;gap:5px;padding:7px 14px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);background:var(--bg-white);font-family:var(--font-inter);font-size:12px;font-weight:500;color:var(--text-gray);cursor:pointer;transition:border-color var(--transition-fast),color var(--transition-fast);white-space:nowrap}
.lib-filter-btn:hover,.lib-filter-btn.active{border-color:var(--secondary-purple);color:var(--secondary-purple)}
.lib-filter-btn .arrow{font-size:10px;margin-left:2px;transition:transform var(--transition-fast)}
.lib-filter-btn.active .arrow{transform:rotate(180deg)}
.lib-filter-dropdown{position:absolute;top:calc(100% + 4px);left:0;min-width:200px;background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-lg);box-shadow:var(--shadow-lg);padding:6px 0;display:none;z-index:200}
.lib-filter-dropdown.open{display:block}
.lib-filter-option{display:flex;align-items:center;gap:8px;padding:8px 14px;font-size:12px;color:var(--text-dark);cursor:pointer;transition:background var(--transition-fast)}
.lib-filter-option:hover{background:var(--bg-light)}
.lib-filter-option input[type=checkbox]{accent-color:var(--secondary-purple)}
.lib-count{font-size:12px;color:var(--text-light-gray);font-family:var(--font-dm);margin-left:auto;white-space:nowrap}
.lib-grid-wrap{max-width:1320px;margin:0 auto;padding:24px 32px 64px}
.lib-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:20px}
.lib-empty{grid-column:1/-1;text-align:center;padding:80px 24px;color:var(--text-light-gray);font-size:15px}
.lib-card{background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-xl);overflow:hidden;transition:box-shadow var(--transition-base),border-color var(--transition-base),transform var(--transition-base);cursor:pointer;display:flex;flex-direction:column}
.lib-card:hover{box-shadow:var(--shadow-purple-md);border-color:rgba(109,49,194,0.25);transform:translateY(-2px)}
.lib-card__preview{width:100%;height:220px;border-bottom:1px solid var(--border-color);background:var(--bg-light);position:relative;overflow:hidden}
.lib-card__preview iframe{width:100%;height:100%;border:none;pointer-events:none;transform-origin:top left}
.lib-card__body{padding:16px 18px;flex:1;display:flex;flex-direction:column}
.lib-card__top-row{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}
.lib-card__cat{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;padding:3px 9px;border-radius:var(--rounded-pill);background:rgba(109,49,194,0.08);color:var(--secondary-purple)}
.lib-card__id{font-size:10px;color:var(--text-light-gray);margin-left:auto;font-family:var(--font-dm)}
.lib-card__name{font-size:16px;font-weight:700;color:var(--text-dark);margin-bottom:6px;line-height:1.3}
.lib-card__desc{font-family:var(--font-dm);font-size:13px;color:var(--text-gray);line-height:1.5;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;flex:1}
.lib-card__phases{display:flex;gap:4px;flex-wrap:wrap;margin-bottom:10px}
.lib-card__phase{font-size:10px;padding:2px 8px;border-radius:var(--rounded-sm);background:var(--bg-light-gray);color:var(--text-gray);font-weight:500}
.lib-card__sources{font-size:10px;color:var(--text-light-gray);font-family:var(--font-dm);border-top:1px solid var(--border-color);padding-top:10px;margin-top:auto}
.lib-card__sources strong{color:var(--text-gray);font-weight:600}
.lib-overlay{position:fixed;inset:0;background:rgba(49,19,93,0.5);z-index:1000;display:none;align-items:flex-start;justify-content:center;padding:40px 24px;overflow-y:auto;backdrop-filter:blur(4px);animation:fadeIn var(--transition-base) ease}
.lib-overlay.open{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.lib-modal{background:var(--bg-white);border-radius:var(--rounded-2xl);width:100%;max-width:900px;box-shadow:0 24px 64px rgba(49,19,93,0.3);animation:slideUp var(--transition-slow) ease;margin-bottom:40px}
.lib-modal__preview{width:100%;min-height:300px;max-height:450px;border-radius:var(--rounded-2xl) var(--rounded-2xl) 0 0;overflow:hidden;background:var(--bg-light);border-bottom:1px solid var(--border-color);position:relative}
.lib-modal__preview iframe{width:100%;height:400px;border:none}
.lib-modal__close{position:absolute;top:14px;right:14px;z-index:10;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.9);border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;color:var(--text-dark);transition:background var(--transition-fast)}
.lib-modal__close:hover{background:var(--bg-white)}
.lib-modal__content{padding:28px 32px 32px}
.lib-modal__header{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.lib-modal__title{font-size:24px;font-weight:800;color:var(--text-dark);flex:1;min-width:200px}
.lib-modal__desc{font-family:var(--font-dm);font-size:14px;color:var(--text-description);line-height:1.7;margin-bottom:24px}
.lib-modal__section{margin-bottom:24px}
.lib-modal__section-title{font-size:13px;font-weight:700;color:var(--primary-purple);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid rgba(109,49,194,0.1)}
.lib-modal__phases-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.lib-modal__sources-row{font-size:12px;color:var(--text-gray);font-family:var(--font-dm)}
.lib-modal__sources-row code{background:var(--bg-light-gray);padding:2px 6px;border-radius:var(--rounded-sm);font-size:11px;color:var(--secondary-purple);margin:0 2px}
@media(max-width:768px){
  .lib-header{padding:32px 20px}.lib-header__title{font-size:26px}
  .lib-toolbar{padding:10px 16px}.lib-grid-wrap{padding:16px 16px 48px}
  .lib-grid{grid-template-columns:1fr;gap:16px}
  .lib-modal__content{padding:20px}.lib-modal{max-width:100%}.lib-overlay{padding:20px 12px}
}
</style>
</head>
<body>
<header class="lib-header">
  <div class="lib-header__inner">
    <span class="lib-header__badge">Design Stack v2 &middot; Layer 8 Element Factory</span>
    <h1 class="lib-header__title">Library of Elements</h1>
    <p class="lib-header__sub">Browsable catalog of production-ready UI elements for the Split Lease host journey. Each element includes live preview and design specs.</p>
    <div class="lib-header__meta">
      <span class="lib-header__meta-item"><strong>Run:</strong> 2026-02-19_1102</span>
      <span class="lib-header__meta-item"><strong>Journey:</strong> Host</span>
      <span class="lib-header__meta-item"><strong>Elements:</strong> 7</span>
      <span class="lib-header__meta-item"><strong>Style:</strong> Split Lease Purple Palette</span>
    </div>
  </div>
</header>

<div class="lib-toolbar" id="toolbar">
  <div class="lib-toolbar__inner">
    <div class="lib-search">
      <span class="lib-search__icon">&#128269;</span>
      <input class="lib-search__input" type="text" id="searchInput" placeholder="Search elements by name or description...">
    </div>
    <div class="lib-filters">
      <div class="lib-filter-group">
        <button class="lib-filter-btn" data-filter="phase">Phase <span class="arrow">&#9662;</span></button>
        <div class="lib-filter-dropdown" data-filter-for="phase">

        </div>
      </div>
    </div>
    <span class="lib-count" id="resultCount">7 elements</span>
  </div>
</div>

<div class="lib-grid-wrap">
  <div class="lib-grid" id="elementGrid"></div>
</div>

<div class="lib-overlay" id="modalOverlay">
  <div class="lib-modal" id="modalContent"></div>
</div>

<script>
const ELEMENTS = [
  {
      id: "ds-ui-1102-001",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: [],
      priority: "high",
      description: "A compact social proof card that surfaces a similar host's experience before any norm-breaking platform term is introduced. Similarity badges (city, experience years, property tier) appear at the top in mono pill format, with matched dimensions highlighted in solid purple. The outcome quote uses DM Sans for warmth. Designed to be scannable in under 5 seconds so the host processes 'someone like me accepted this' before encountering the deviation. Directly addresses John's rejection rooted in 'what we do in New York city' by showing that NYC landlords with comparable tenure have already accepted the model.",
      html_css_snippet: ``
    },
  {
      id: "ds-ui-1102-002",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: [],
      priority: "high",
      description: "A two-phase proposal layout that separates tenant evaluation (Layer A, white surface) from platform terms (Layer B, off-white surface). Layer A presents tenant details -- names, employment, credit, bedroom match -- and a confirmation button. Layer B only appears after the host confirms interest in the tenants. A transition bar acknowledges the positive evaluation before introducing platform mechanics. This directly addresses the pattern from John's call where cooperative tenant evaluation (02:12-03:50) was contaminated by resistant platform-terms evaluation (05:40+) because both were presented in a single undifferentiated stream.",
      html_css_snippet: ``
    },
  {
      id: "ds-ui-1102-003",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: [],
      priority: "high",
      description: "A structured next-step closure card that replaces vague handoffs ('I'll talk to our team') with a specific WHO/WHAT/WHEN commitment. Uses a distinct blue-tinted info background with a left border accent to differentiate from other card types. The agent's name is bold, the timeline is in mono font for precision, and the host is assigned a small reciprocal action. Includes a visual countdown indicator. Directly addresses the conversion-killing vagueness at the end of John's call where Bryant said 'I can talk to our team and see if that's something we can make an exception for' with no name, no timeline, and no host action.",
      html_css_snippet: ``
    },
  {
      id: "ds-ui-1102-004",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: [],
      priority: "high",
      description: "A compact data pill used in first-touch materials (emails, landing pages) that previews the payment timing with the mechanism included from the start. Uses mono font on a purple-tinted background for data credibility. This prevents the false expectation that John formed when Bryant said 'guaranteed payments' at 01:31 without specifying timing, leading to a contradictory reveal at 05:56. The pill is designed to be the visual through-line across all three stages of progressive disclosure, appearing identically in first-touch, mid-conversation cards, and full detail views.",
      html_css_snippet: ``
    },
  {
      id: "ds-ui-1102-005",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: [],
      priority: "high",
      description: "A payment terms section that leads with norm validation before introducing the platform's model. The top tier acknowledges the host's existing practice ('Most experienced NYC landlords require payment at signing -- that makes sense'). The middle tier shows peer proof from a similar host who initially shared the same concern. The bottom tier presents the actual financial details in mono font. This three-tier layout reverses the current hierarchy (numbers first) to social framing first, addressing John's professional pride ('I've been in this business for a while') by validating his expertise before presenting the alternative as an evolution, not a replacement.",
      html_css_snippet: ``
    },
  {
      id: "ds-ui-1102-006",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: [],
      priority: "high",
      description: "A ceremonial first-payment notification that marks the emotional conversion point -- the moment theoretical trust becomes experiential trust. Displays the exact amount, exact timing, and comparison to the guaranteed timeline. Uses spring easing on the checkmark for a contained celebration. This is designed for the moment after a skeptical host like John receives their first payment: the notification transforms his 'they say it works' into 'it works.' Includes an invitation to share the experience, seeding the social proof flywheel for future hosts.",
      html_css_snippet: ``
    },
  {
      id: "ds-ui-1102-007",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: [],
      priority: "high",
      description: "A reciprocal commitment card that appears immediately after a host takes a meaningful action (sharing property details, confirming availability). Shows the specific platform action being taken in response, with a timeline. Mirrors John's 'both ways' trust model where every investment expects a visible reciprocal investment. After the host confirms March 15 availability, the card shows that Ariel and Amber have been notified, employment letters are being prepared, and the deposit match is processing -- all specific to the host's action, not generic acknowledgments.",
      html_css_snippet: ``
    }
];

function createSrcdoc(snippet) {
  return snippet;
}

function renderCards() {
  const grid = document.getElementById('elementGrid');
  const search = document.getElementById('searchInput').value.toLowerCase();
  const checkedPhases = Array.from(document.querySelectorAll('[data-filter-for="phase"] input:checked')).map(c => c.value);

  let filtered = ELEMENTS.filter(el => {
    if (search && !el.name.toLowerCase().includes(search) && !el.description.toLowerCase().includes(search)) return false;
    if (checkedPhases.length && !el.journey_phases.some(p => checkedPhases.includes(p))) return false;
    return true;
  });

  document.getElementById('resultCount').textContent = filtered.length + ' element' + (filtered.length !== 1 ? 's' : '');

  if (!filtered.length) {
    grid.innerHTML = '<div class="lib-empty">No elements match your filters.</div>';
    return;
  }

  grid.innerHTML = filtered.map((el, i) => {
    const phases = el.journey_phases.map(p => '<span class="lib-card__phase">' + p.replace(/_/g, ' ') + '</span>').join('');
    const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');
    return '<div class="lib-card" data-idx="' + ELEMENTS.indexOf(el) + '">' +
      '<div class="lib-card__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" loading="lazy" sandbox="allow-same-origin"></iframe></div>' +
      '<div class="lib-card__body">' +
        '<div class="lib-card__top-row"><span class="lib-card__cat">UI Element</span><span class="lib-card__id">' + el.id + '</span></div>' +
        '<div class="lib-card__name">' + el.name + '</div>' +
        '<div class="lib-card__desc">' + el.description + '</div>' +
        '<div class="lib-card__phases">' + phases + '</div>' +
        '<div class="lib-card__sources"><strong>Sources:</strong> ' + sources + '</div>' +
      '</div></div>';
  }).join('');
}

function escapeAttr(s) {
  return s.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function openModal(idx) {
  const el = ELEMENTS[idx];
  const overlay = document.getElementById('modalOverlay');
  const modal = document.getElementById('modalContent');
  const phases = el.journey_phases.map(p => '<span class="lib-card__phase" style="font-size:12px;padding:4px 10px;">' + p.replace(/_/g, ' ') + '</span>').join('');
  const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');

  modal.innerHTML =
    '<div class="lib-modal__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" sandbox="allow-same-origin"></iframe><button class="lib-modal__close" onclick="closeModal()">&times;</button></div>' +
    '<div class="lib-modal__content">' +
      '<div class="lib-modal__header"><h2 class="lib-modal__title">' + el.name + '</h2></div>' +
      '<p class="lib-modal__desc">' + el.description + '</p>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Journey Phases</div><div class="lib-modal__phases-row">' + phases + '</div></div>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Source Elements</div><div class="lib-modal__sources-row">' + sources + '</div></div>' +
    '</div>';

  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

// Event listeners
document.getElementById('searchInput').addEventListener('input', renderCards);
document.querySelectorAll('.lib-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const dropdown = btn.nextElementSibling;
    dropdown.classList.toggle('open');
    btn.classList.toggle('active');
  });
});
document.querySelectorAll('.lib-filter-dropdown input').forEach(cb => {
  cb.addEventListener('change', renderCards);
});
document.getElementById('elementGrid').addEventListener('click', e => {
  const card = e.target.closest('.lib-card');
  if (card) openModal(parseInt(card.dataset.idx));
});
document.getElementById('modalOverlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) closeModal();
});
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
window.addEventListener('scroll', () => {
  document.getElementById('toolbar').classList.toggle('scrolled', window.scrollY > 10);
});

// Initial render
renderCards();
</script>
</body>
</html>