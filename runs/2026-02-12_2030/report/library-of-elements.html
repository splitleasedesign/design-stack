<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Library of Elements — Guest Journey: Nneka x Don Norman</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* ========================================
       CSS VARIABLES - Production Design System
       ======================================== */
    :root {
      /* Primary Colors */
      --primary-purple: #31135D;
      --secondary-purple: rgb(109, 49, 194);
      --accent-purple: rgb(140, 104, 238);

      /* Text Colors */
      --text-dark: #1a1a1a;
      --text-gray: #6b7280;
      --text-light-gray: #9ca3af;

      /* Background Colors */
      --bg-white: #ffffff;
      --bg-light: #f9fafb;
      --bg-off-white: rgb(252, 250, 255);

      /* Border Colors */
      --border-color: #e5e7eb;

      /* Typography */
      --font-inter: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-dm: 'DM Sans', sans-serif;

      /* Shadows */
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.08);
      --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15);
      --shadow-xl: 0 4px 16px rgba(49, 19, 93, 0.35);

      /* Border Radius */
      --rounded-md: 6px;
      --rounded-lg: 8px;
      --rounded-xl: 12px;
      --rounded-2xl: 16px;
      --rounded-pill: 20px;

      /* Transitions */
      --transition-fast: 0.1s;
      --transition-base: 0.2s;
      --transition-slow: 0.3s;

      /* Category Colors */
      --cat-trust: #2d5a3d;
      --cat-trust-light: #e8f0eb;
      --cat-social: #4A90E2;
      --cat-social-light: #E3F2FD;
      --cat-commitment: #8B4789;
      --cat-commitment-light: #F3E5F5;
      --cat-comprehension: #C17A28;
      --cat-comprehension-light: #FFF3E0;
      --cat-feedback: #6D31C2;
      --cat-feedback-light: #F0EBFF;
      --cat-navigation: #2563EB;
      --cat-navigation-light: #EFF6FF;
      --cat-pricing: #D4A853;
      --cat-pricing-light: #FDF4E3;
      --cat-timeline: #7C3AED;
      --cat-timeline-light: #FAF5FF;
      --cat-rescheduling: #DC3545;
      --cat-rescheduling-light: #FDE8E8;
      --cat-flexibility: #4B47CE;
      --cat-flexibility-light: #F0EBFF;
    }

    /* ========================================
       GLOBAL STYLES
       ======================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-inter);
      background: var(--bg-light);
      color: var(--text-dark);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ========================================
       HEADER
       ======================================== */
    .header {
      background: linear-gradient(135deg, var(--primary-purple) 0%, var(--secondary-purple) 100%);
      color: white;
      padding: 2rem 2rem 3rem;
      text-align: center;
      box-shadow: var(--shadow-lg);
    }

    .header h1 {
      font-family: var(--font-dm);
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      line-height: 1.3;
    }

    .header .subtitle {
      font-size: 1.125rem;
      opacity: 0.9;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .header .run-id {
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
      opacity: 0.75;
      letter-spacing: 0.5px;
    }

    /* ========================================
       FILTER BAR (Sticky)
       ======================================== */
    .filter-bar {
      position: sticky;
      top: 0;
      background: white;
      border-bottom: 2px solid var(--border-color);
      padding: 1.25rem 2rem;
      box-shadow: var(--shadow-md);
      z-index: 100;
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      flex: 1;
      min-width: 200px;
    }

    .filter-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-gray);
    }

    .filter-select, .search-input {
      padding: 0.625rem 0.875rem;
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-md);
      font-family: var(--font-inter);
      font-size: 0.875rem;
      background: white;
      transition: border-color var(--transition-base);
    }

    .filter-select:focus, .search-input:focus {
      outline: none;
      border-color: var(--secondary-purple);
      box-shadow: 0 0 0 3px rgba(109, 49, 194, 0.1);
    }

    .search-input {
      flex: 1.5;
      min-width: 250px;
    }

    .reset-btn {
      padding: 0.625rem 1.25rem;
      background: var(--bg-light);
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-md);
      font-family: var(--font-inter);
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-gray);
      cursor: pointer;
      transition: all var(--transition-base);
      white-space: nowrap;
    }

    .reset-btn:hover {
      background: var(--secondary-purple);
      color: white;
      border-color: var(--secondary-purple);
    }

    /* ========================================
       CARD GRID
       ======================================== */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    .card {
      background: white;
      border-radius: var(--rounded-xl);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      transition: all var(--transition-base);
      cursor: pointer;
      border: 2px solid transparent;
    }

    .card:hover {
      box-shadow: var(--shadow-xl);
      transform: translateY(-2px);
      border-color: var(--secondary-purple);
    }

    .card.selected {
      border-color: var(--accent-purple);
      box-shadow: var(--shadow-lg);
    }

    .card-preview {
      height: 180px;
      background: var(--bg-off-white);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      overflow: hidden;
      position: relative;
    }

    .card-preview::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(109, 49, 194, 0.05) 0%, rgba(140, 104, 238, 0.05) 100%);
      pointer-events: none;
    }

    .preview-content {
      font-size: 0.75rem;
      line-height: 1.4;
      color: var(--text-gray);
      max-height: 100%;
      overflow: hidden;
      position: relative;
      z-index: 1;
    }

    .card-body {
      padding: 1.25rem;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 0.75rem;
      margin-bottom: 0.875rem;
    }

    .card-title {
      font-family: var(--font-dm);
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-dark);
      line-height: 1.3;
      flex: 1;
    }

    .priority-badge {
      padding: 0.25rem 0.625rem;
      border-radius: var(--rounded-pill);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      white-space: nowrap;
    }

    .priority-high {
      background: #FDE8E8;
      color: #DC3545;
    }

    .priority-medium {
      background: #FFF3E0;
      color: #C17A28;
    }

    .priority-low {
      background: #E3F2FD;
      color: #2563EB;
    }

    .category-badge {
      display: inline-block;
      padding: 0.375rem 0.75rem;
      border-radius: var(--rounded-pill);
      font-size: 0.75rem;
      font-weight: 600;
      margin-bottom: 0.625rem;
    }

    .phases {
      display: flex;
      flex-wrap: wrap;
      gap: 0.375rem;
      margin-top: 0.75rem;
    }

    .phase-tag {
      padding: 0.25rem 0.625rem;
      background: var(--bg-light);
      border-radius: var(--rounded-md);
      font-size: 0.6875rem;
      color: var(--text-gray);
      font-weight: 500;
    }

    .card-footer {
      padding: 0.75rem 1.25rem;
      background: var(--bg-light);
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.75rem;
      color: var(--text-gray);
    }

    .compare-checkbox {
      display: flex;
      align-items: center;
      gap: 0.375rem;
      cursor: pointer;
    }

    .compare-checkbox input {
      cursor: pointer;
    }

    /* ========================================
       MODAL
       ======================================== */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      overflow-y: auto;
      padding: 2rem;
      animation: fadeIn 0.2s ease-out;
    }

    .modal-overlay.active {
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }

    .modal {
      background: white;
      border-radius: var(--rounded-2xl);
      max-width: 900px;
      width: 100%;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      margin: 2rem auto;
      animation: slideUp 0.3s ease-out;
    }

    .modal-header {
      padding: 1.5rem 2rem;
      border-bottom: 2px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(135deg, rgba(109, 49, 194, 0.05) 0%, rgba(140, 104, 238, 0.05) 100%);
    }

    .modal-title {
      font-family: var(--font-dm);
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-dark);
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 2rem;
      color: var(--text-gray);
      cursor: pointer;
      line-height: 1;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all var(--transition-base);
    }

    .modal-close:hover {
      background: var(--bg-light);
      color: var(--text-dark);
    }

    .modal-body {
      padding: 2rem;
      max-height: calc(100vh - 200px);
      overflow-y: auto;
    }

    .modal-section {
      margin-bottom: 2rem;
    }

    .modal-section:last-child {
      margin-bottom: 0;
    }

    .modal-section-title {
      font-family: var(--font-dm);
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--primary-purple);
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .modal-section-content {
      background: var(--bg-light);
      padding: 1.25rem;
      border-radius: var(--rounded-lg);
      line-height: 1.7;
    }

    .modal-section-content p {
      margin-bottom: 0.75rem;
    }

    .modal-section-content p:last-child {
      margin-bottom: 0;
    }

    .spec-grid {
      display: grid;
      grid-template-columns: 140px 1fr;
      gap: 0.75rem 1rem;
      align-items: start;
    }

    .spec-label {
      font-weight: 600;
      color: var(--text-gray);
      font-size: 0.875rem;
    }

    .spec-value {
      color: var(--text-dark);
      font-size: 0.875rem;
    }

    .live-preview {
      background: white;
      border: 2px solid var(--border-color);
      border-radius: var(--rounded-lg);
      padding: 2rem;
      margin-top: 1rem;
      position: relative;
    }

    .live-preview::before {
      content: 'LIVE PREVIEW';
      position: absolute;
      top: -10px;
      left: 1rem;
      background: var(--secondary-purple);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: var(--rounded-md);
      font-size: 0.625rem;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .before-after {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .before-after-item {
      background: white;
      border: 2px solid var(--border-color);
      border-radius: var(--rounded-lg);
      padding: 1.25rem;
    }

    .before-after-label {
      font-weight: 700;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.625rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .before-label {
      color: #DC3545;
    }

    .after-label {
      color: #2d5a3d;
    }

    .before-after-text {
      font-size: 0.875rem;
      line-height: 1.6;
      color: var(--text-dark);
    }

    .source-elements {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .source-element-tag {
      padding: 0.375rem 0.75rem;
      background: var(--bg-light);
      border: 1px solid var(--border-color);
      border-radius: var(--rounded-md);
      font-size: 0.75rem;
      font-family: 'Courier New', monospace;
      color: var(--text-gray);
    }

    /* ========================================
       COMPARE MODE
       ======================================== */
    .compare-panel {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 3px solid var(--secondary-purple);
      box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.15);
      padding: 1.25rem 2rem;
      z-index: 500;
      animation: slideUpPanel 0.3s ease-out;
    }

    .compare-panel.active {
      display: block;
    }

    .compare-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .compare-title {
      font-family: var(--font-dm);
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--text-dark);
    }

    .compare-actions {
      display: flex;
      gap: 0.75rem;
    }

    .compare-btn {
      padding: 0.5rem 1.25rem;
      background: var(--secondary-purple);
      color: white;
      border: none;
      border-radius: var(--rounded-md);
      font-family: var(--font-inter);
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .compare-btn:hover {
      background: var(--accent-purple);
    }

    .compare-btn.secondary {
      background: var(--bg-light);
      color: var(--text-dark);
      border: 1px solid var(--border-color);
    }

    .compare-btn.secondary:hover {
      background: var(--bg-white);
      border-color: var(--secondary-purple);
    }

    .compare-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }

    .compare-item {
      padding: 1.25rem;
      background: var(--bg-light);
      border-radius: var(--rounded-lg);
      border: 2px solid var(--border-color);
    }

    .compare-item-title {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 0.75rem;
      color: var(--text-dark);
    }

    .compare-item-details {
      font-size: 0.875rem;
      line-height: 1.6;
      color: var(--text-gray);
    }

    /* ========================================
       ANIMATIONS
       ======================================== */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideUpPanel {
      from {
        transform: translateY(100%);
      }
      to {
        transform: translateY(0);
      }
    }

    /* ========================================
       RESPONSIVE
       ======================================== */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.5rem;
      }

      .filter-bar {
        flex-direction: column;
        padding: 1rem;
      }

      .filter-group {
        width: 100%;
      }

      .cards-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .modal {
        margin: 0;
        border-radius: 0;
        max-height: 100vh;
      }

      .before-after {
        grid-template-columns: 1fr;
      }

      .compare-content {
        grid-template-columns: 1fr;
      }
    }

    /* ========================================
       UTILITY CLASSES
       ======================================== */
    .hidden {
      display: none !important;
    }

    code {
      background: #f5f5f5;
      padding: 0.125rem 0.375rem;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.85em;
    }
  </style>
</head>
<body>
  <!-- ========================================
       HEADER
       ======================================== -->
  <header class="header">
    <h1>Library of Elements</h1>
    <div class="subtitle">Guest Journey: Nneka x Don Norman Affordances/Signifiers/Feedback</div>
    <div class="run-id">Run ID: 2026-02-12_2030</div>
  </header>

  <!-- ========================================
       FILTER BAR
       ======================================== -->
  <div class="filter-bar">
    <div class="filter-group">
      <label class="filter-label">Category</label>
      <select class="filter-select" id="filter-category">
        <option value="">All Categories</option>
        <option value="trust_signal">Trust Signal</option>
        <option value="social_proof">Social Proof</option>
        <option value="commitment_chain">Commitment Chain</option>
        <option value="comprehension">Comprehension</option>
        <option value="feedback">Feedback</option>
        <option value="navigation">Navigation</option>
        <option value="pricing">Pricing</option>
        <option value="timeline">Timeline</option>
        <option value="rescheduling">Rescheduling</option>
        <option value="flexibility">Flexibility</option>
      </select>
    </div>

    <div class="filter-group">
      <label class="filter-label">Phase</label>
      <select class="filter-select" id="filter-phase">
        <option value="">All Phases</option>
        <option value="discovery">Discovery</option>
        <option value="onboarding">Onboarding</option>
        <option value="search">Search</option>
        <option value="listing_evaluation">Listing Evaluation</option>
        <option value="proposal_creation">Proposal Creation</option>
        <option value="negotiation">Negotiation</option>
        <option value="active_lease">Active Lease</option>
      </select>
    </div>

    <div class="filter-group">
      <label class="filter-label">Priority</label>
      <select class="filter-select" id="filter-priority">
        <option value="">All Priorities</option>
        <option value="high">High</option>
        <option value="medium">Medium</option>
        <option value="low">Low</option>
      </select>
    </div>

    <div class="filter-group">
      <label class="filter-label">Search</label>
      <input type="text" class="search-input" id="search-box" placeholder="Search elements...">
    </div>

    <button class="reset-btn" onclick="resetFilters()">Reset All</button>
  </div>

  <!-- ========================================
       CARD GRID
       ======================================== -->
  <div class="container">
    <div class="cards-grid" id="cards-grid">
      <!-- Cards will be dynamically inserted here -->
    </div>
  </div>

  <!-- ========================================
       MODAL
       ======================================== -->
  <div class="modal-overlay" id="modal-overlay" onclick="closeModalOnOverlay(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title" id="modal-title"></h2>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body" id="modal-body">
        <!-- Content dynamically inserted -->
      </div>
    </div>
  </div>

  <!-- ========================================
       COMPARE PANEL
       ======================================== -->
  <div class="compare-panel" id="compare-panel">
    <div class="compare-header">
      <h3 class="compare-title">Compare Elements (<span id="compare-count">0</span>/2)</h3>
      <div class="compare-actions">
        <button class="compare-btn" id="compare-view-btn" onclick="viewComparison()" disabled>View Comparison</button>
        <button class="compare-btn secondary" onclick="clearComparison()">Clear</button>
      </div>
    </div>
    <div class="compare-content" id="compare-content">
      <!-- Compare items appear here -->
    </div>
  </div>

  <script>
    // ========================================
    // DATA
    // ========================================
    const elementsData = {
      "run_id": "2026-02-12_2030",
      "lens": {
        "guest_call": "nneka-call.txt",
        "book_extract": "donnorman-affordances-signifiers-feedback.txt"
      },
      "elements": [
        {
          "id": "ui-001",
          "title": "Flexible Rescheduling Badge - Listing Card & Detail",
          "source_elements": ["works-001", "communicates-002", "looks-005", "behaves-004", "feels-006"],
          "category": "trust_signal",
          "journey_phases": ["search", "listing_evaluation"],
          "priority": "high",
          "visual_spec": {
            "typography": "Outfit semibold 12px for card view, Outfit regular 14px for expanded policy bullets on detail page",
            "colors": "Background: var(--accent) #2d5a3d for trust/growth signal. Text: var(--surface) #ffffff for maximum contrast. Hover: var(--accent-bright) #3a7a52",
            "spacing": "Padding: var(--spacing-sm) 8px inside badge. Margin: var(--spacing-md) 16px from card edge. Gap: var(--spacing-xs) 4px between icon and text",
            "layout": "Rounded pill shape (radius: 20px). Positioned top-right on listing card thumbnail. Expandable section on detail page with bullet-point policy details. Icon: 16px checkmark on card view, 20px on detail view"
          },
          "interaction_spec": {
            "default": "Badge visible on listing cards for hosts who allow rescheduling. Sub-2-second recognition, no cognitive processing required",
            "hover": "Subtle shadow elevation (shadow-md: 0 2px 8px rgba(0,0,0,0.08)) to signal interactivity on detail page. No hover effect on card view (prevents confusion with card hover)",
            "click": "On detail page, badge expands to show policy bullets: '✓ Date changes allowed' / '✓ Seasonal pricing applies' / '✓ 48-hour notice required'. Accordion expand animation: 200ms ease-out",
            "states": "Card view: Compact badge with checkmark + 'Flexible Rescheduling' label. Detail view: Clickable badge that expands policy section below. Shadow ensures badge visible over various photo backgrounds"
          },
          "copy_spec": {
            "headline": "Flexible Rescheduling",
            "body": "Policy bullets in expanded state: '✓ Date changes allowed' / '✓ Seasonal pricing applies' / '✓ 48-hour notice required'",
            "cta": "N/A - Badge is informational signifier, not action element",
            "microcopy": "Badge acts as visual signal during search. On detail page, helper text: 'This host allows schedule flexibility. See policy details.'"
          },
          "html_css_snippet": "<div class=\"flexible-badge\" style=\"position: absolute; top: 16px; right: 16px; background: #2d5a3d; color: white; padding: 8px; border-radius: 20px; font-family: DM Sans; font-size: 12px; font-weight: 600; display: flex; align-items: center; gap: 4px; box-shadow: 0 1px 3px rgba(26,23,20,0.12);\">Flexible Rescheduling</div>",
          "before_after": {
            "before": "Guest browses listings with no indication of rescheduling policies. Must book based on incomplete information, then negotiate flexibility informally via text after booking, where hidden complexity creates conflict.",
            "after": "Guest sees 'Flexible Rescheduling' badge immediately on search results (recognition in under 2 seconds). On listing detail page, clicks badge to see clear policy terms. Books with full knowledge of flexibility options, preventing post-booking conflict."
          }
        },
        {
          "id": "ui-002",
          "title": "Crisis-Context Rescheduling Request Outcome Display",
          "source_elements": ["works-002", "works-004", "communicates-005", "looks-006", "behaves-004", "feels-001"],
          "category": "feedback",
          "journey_phases": ["active_lease", "negotiation"],
          "priority": "high",
          "visual_spec": {
            "typography": "Outcome: Instrument Serif bold 32px. Details: Outfit semibold 18px. Explanation: Outfit regular 14px. Line-height: 1.3 for outcome (breathing room), 1.5 for details, 1.2 for explanations (minimize vertical space)",
            "colors": "Available outcome: var(--accent) #2d5a3d. Unavailable outcome: var(--signal-warn) #c17a28. Primary pricing text: var(--ink) #1a1714. Secondary details: var(--ink-soft) #4a4640. Tertiary explanations: var(--ink-muted) #8a857e",
            "spacing": "Outcome top margin: 60px for dramatic isolation. Gap between outcome and details: 40px. Between detail items: 24px. Between explanation paragraphs: 16px",
            "layout": "Vertical hierarchy: Outcome at top (above fold), details in middle, explanations collapsed by default with expand affordance at bottom. Outcome text centered. Details left-aligned with bullet points"
          },
          "interaction_spec": {
            "default": "Crisis mode not active. Triggers when: (1) Guest requests dates < 48 hours from original check-in, OR (2) Guest flags request as urgent via toggle",
            "hover": "N/A - Outcome display is informational, not interactive (except expand accordion for explanations)",
            "click": "Expand accordion at bottom to reveal why/how explanations. Accordion animation: 200ms ease-out",
            "states": "Loading: Large serif 'Checking availability...' at top with subtle pulse (2s ease-in-out). Success Available: 'Available' in accent green, pricing comparison, large primary button 'Confirm new dates'. Success Unavailable: 'Unavailable' in amber, 3 alternative date cards with pricing, large button per alternative. Error: 'Cannot check availability' in signal-danger, fallback 'Call Bryant now' button"
          },
          "copy_spec": {
            "headline": "Available / Unavailable (outcome first)",
            "body": "Available: 'Your new dates are Feb 1-8 at $1,280/month (winter → spring pricing). Your housing is secure.' Unavailable: 'These dates are already booked. Here are 3 alternatives:'",
            "cta": "Available: 'Confirm new dates' (confident language). Unavailable: 'Request [dates]' per alternative card, plus 'Request anyway' as secondary option",
            "microcopy": "Loading: 'Checking if these dates work' (answer-oriented). Error explanation collapsed: 'Network issue - we're working on it.' Next steps after approval: 'Check-in details sent to your email.'"
          },
          "html_css_snippet": "<div style=\"text-align: center; margin-top: 60px;\"><h1 style=\"font-size: 32px; font-weight: 700; color: #2d5a3d;\">Available</h1></div><div style=\"margin-top: 40px;\"><div>• New dates: Feb 1-8 at $1,280/month</div><div>• Your housing is secure</div></div>",
          "before_after": {
            "before": "Guest texts host 'I can't make it, can I do another day?' and waits hours or days in silence, wondering if housing is secure. No feedback during wait. Generic approval notification eventually arrives with no pricing context.",
            "after": "Guest submits urgent request. Sees 'Checking availability...' immediately (under 1 second). Within 2-12 hours, page loads with large 'Available' at top in green, pricing comparison below, and 'Confirm new dates' button. Guest knows housing is secure, sees pricing impact clearly, can proceed with confidence or explore alternatives if unavailable."
          }
        },
        {
          "id": "ui-003",
          "title": "Replacement vs Addition Spatial Layout - Rescheduling Interface",
          "source_elements": ["works-003", "communicates-004", "looks-002", "behaves-003", "feels-002"],
          "category": "comprehension",
          "journey_phases": ["negotiation", "active_lease"],
          "priority": "high",
          "visual_spec": {
            "typography": "Section headings 'Replace' vs 'Add': Instrument Serif medium 20px for personality. Date ranges: Outfit regular 16px for clarity. Pricing comparison: IBM Plex Mono regular 14px for precision/trust",
            "colors": "Original dates container: var(--surface-warm) #fdfcfa. New dates container: var(--accent-light) #e8f0eb. Date text: var(--ink) #1a1714. Secondary pricing text: var(--ink-soft) #4a4640. Icons (arrow/plus): var(--accent) #2d5a3d",
            "spacing": "Horizontal gap between left and right date containers: 40px. Padding inside each container: 24px. Gap between date text and pricing text: 16px. Icons: 32px for visibility",
            "layout": "Left-right spatial layout. LEFT PATH: 'Replace my dates' shows original dates on left, new dates on right, horizontal arrow (→) between indicating swap. RIGHT PATH: 'Add more dates' shows original dates on left, new dates append to right with plus icon (+). Natural mapping: left = past/original, right = future/new. Time flows left-to-right"
          },
          "interaction_spec": {
            "default": "Interface shows two paths side-by-side. Both cards equal visual prominence (neither pre-selected). Hover shows subtle shadow elevation (shadow-md) and accent border",
            "hover": "50ms response time. Selected card shows accent border and shadow-md elevation",
            "click": "Path selection animation: selected card scales to 1.05 over 300ms (spring easing), other card fades to 50% opacity. Date selection interface loads with appropriate visual metaphor: replacement shows swap arrows, addition shows append arrows",
            "states": "Replacement success: Left-right visual shows original dates on left with strikethrough, new dates on right with checkmark, arrow between pulsing once (400ms). Caption: 'Your dates have been swapped.' Addition success: Original dates left with checkmark (kept), new dates right with checkmark (added), plus icon between. Caption: 'Additional time added to your booking.'"
          },
          "copy_spec": {
            "headline": "Replace my dates / Add more dates",
            "body": "Replacement: 'Swap your booked dates for different dates. Original rate maintained.' Addition: 'Keep original dates and book additional time. Current seasonal rate applies.'",
            "cta": "Primary button after date selection: 'Request these dates' (confident language)",
            "microcopy": "First-time user tooltip (appears after 2 seconds if no path selected): 'Replacing swaps your dates. Adding keeps original dates and books more time.' Switching paths mid-flow: 'Switching to Add mode. Your original dates will be kept. Select additional dates below.'"
          },
          "html_css_snippet": "<div style=\"display: flex; gap: 40px;\"><div style=\"flex: 1; padding: 24px; border: 2px solid #e5e7eb; border-radius: 12px;\"><h3>Replace my dates</h3><div style=\"display: flex; gap: 16px; align-items: center;\"><div>Feb 15-22</div><span>→</span><div>Feb 1-8</div></div></div></div>",
          "before_after": {
            "before": "Guest requests 'different dates' via text without understanding replacement vs addition models. Nneka has clear mental model distinguishing the two with different pricing implications, but Brad has no access to this model. Later pricing conflict when addition dates trigger higher seasonal rates.",
            "after": "Guest sees two explicit visual paths: 'Replace' (arrow between dates, original pricing maintained) vs 'Add' (plus icon, seasonal pricing applies). Spatial layout communicates conceptual model without reading. Guest selects appropriate path based on need, understands pricing implications before submitting request."
          }
        },
        {
          "id": "ui-004",
          "title": "Color-Coded Opportunity Cost Calendar - Real-Time Consequence Visualization",
          "source_elements": ["works-005", "communicates-006", "looks-001", "behaves-002", "feels-002"],
          "category": "feedback",
          "journey_phases": ["negotiation", "active_lease"],
          "priority": "medium",
          "visual_spec": {
            "typography": "Date numbers: Outfit regular 14px - clarity over personality. Pricing deltas: IBM Plex Mono regular 12px - signals precision. Legend labels: Outfit regular 13px",
            "colors": "GREEN dates (opportunity recaptured): var(--accent) #2d5a3d background at 20% opacity, var(--accent) text. YELLOW dates (neutral): var(--signal-warn-bg) #fef3e2 background, var(--signal-warn) #c17a28 text. RED dates (opportunity cost): var(--signal-danger-bg) #fde8e8 background, var(--signal-danger) #b83a3a text. Inactive dates: var(--ink-ghost) #bdb8b0",
            "spacing": "8px between calendar cells for touch targets. 16px for legend spacing. Calendar date cells: 40px minimum for accessibility",
            "layout": "Calendar grid with color-coded states for original dates when guest selects new dates. Legend positioned above calendar showing three states with icons. Pricing comparison panel below calendar"
          },
          "interaction_spec": {
            "default": "Calendar shows current booking with neutral styling. Original dates highlighted in accent-light. No consequence indicators until guest begins selecting new dates",
            "hover": "As guest hovers over potential new dates, calendar computes impact in real-time. Loading state shows subtle pulse on original dates (2s ease-in-out). Under 200ms to compute and display",
            "click": "Date selection triggers consequence calculation. Original dates show color-coded states within 200ms. Color transitions animate smoothly (150ms ease-in-out) to avoid jarring flashes",
            "states": "Green with checkmark: 'Your Feb 1-8 dates will become available for other guests'. Yellow with dash icon: 'Your Feb 1-8 dates may remain blocked for 2-3 days'. Red with info icon: 'Your Feb 1-8 dates cannot be rebooked this season'. Pattern awareness (3+ reschedules): 'This is your 3rd rescheduling. Previous changes have cost Nneka approximately $400 in lost bookings.'"
          },
          "copy_spec": {
            "headline": "Impact on original dates",
            "body": "Green: 'Your [dates] will become available for other guests' (opportunity recaptured). Yellow: 'Your [dates] may remain blocked for 2-3 days' (neutral). Red: 'Your [dates] cannot be rebooked this season' (opportunity cost)",
            "cta": "N/A - Calendar is informational feedback, not action element",
            "microcopy": "Legend: 'See how your date change affects availability'. Pattern awareness (3+ reschedules): 'Consider booking with more certainty next time.' Educational tooltip on first reschedule: 'Colors show impact on host's calendar. Green is ideal, yellow is neutral, red creates opportunity cost.'"
          },
          "html_css_snippet": "<div><div style=\"display: flex; gap: 24px; margin-bottom: 16px;\"><div style=\"display: flex; gap: 8px;\"><div style=\"width: 16px; height: 16px; background: rgba(45,90,61,0.2); border-radius: 4px;\"></div><span>Becomes available</span></div></div><div style=\"display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px;\"><!-- Calendar cells --></div></div>",
          "before_after": {
            "before": "Guest requests new dates with no visibility into host consequences. Brad pushes dates back, Nneka can't book original dates to others, creating opportunity cost. Guest receives no feedback about impact. Pattern continues until host reaches financial breaking point and changes policy suddenly.",
            "after": "As guest selects new dates, calendar immediately shows color-coded impact on original dates: green (dates become available - good for host), yellow (may remain blocked - neutral), red (cannot rebook - costs host). Pricing comparison shows seasonal delta. Guest makes informed decision understanding full impact. After 3rd reschedule, sees aggregate cost pattern, encouraging more thoughtful future bookings."
          }
        },
        {
          "id": "ui-005",
          "title": "Five-Stage Asynchronous Feedback Progress Indicator",
          "source_elements": ["works-002", "communicates-003", "looks-003", "behaves-001", "feels-001"],
          "category": "feedback",
          "journey_phases": ["negotiation", "active_lease"],
          "priority": "high",
          "visual_spec": {
            "typography": "Stage labels: Outfit medium 14px for clarity and accessibility. Timestamps: Outfit regular 13px for secondary information",
            "colors": "Completed stages: var(--accent) #2d5a3d. Current stage in progress: var(--ink-soft) #4a4640. Delay stage (Stage 3): var(--signal-warn) #c17a28. Future stages not yet reached: var(--ink-ghost) #bdb8b0. Connecting line: var(--ink-ghost)",
            "spacing": "40px vertical spacing between stages for touch-friendly interaction. 8px between icon and label text. 24px padding around entire progress indicator. Progress line: 4px width. Progress circles: 24px diameter. Icons inside circles: 16px",
            "layout": "Vertical progress bar with 4px connecting line between stages. Completed stages show filled circles, current stage pulses gently (2s ease-in-out), future stages show outline circles. Icons: checkmark (completed), eye (reviewing), clock (delay), checkmark/warning (decision)"
          },
          "interaction_spec": {
            "default": "Progress indicator hidden until request submitted. Appears immediately on submission with Stage 1 active",
            "hover": "N/A - Progress indicator is informational, not interactive",
            "click": "N/A - Display only, no click interactions",
            "states": "Stage 1 (instant): Checkmark icon, accent color, 'Request received. Nneka typically responds within 24 hours.' Stage 2 (1-4 hours): Eye icon, accent color fading to ink-soft, 'Nneka is reviewing.' Stage 3 (4-12 hours): Clock icon, signal-warn color, 'Checking availability across calendars.' Stage 4 (decision): Green checkmark OR amber warning, 'Approved' or 'Alternative dates available.' Pulsing animation only on current stage (2s ease-in-out), 10% scale variation"
          },
          "copy_spec": {
            "headline": "Request Status",
            "body": "Stage 1: 'Request received. Nneka typically responds within 24 hours.' Stage 2: 'Nneka is reviewing your request.' Stage 3: 'Nneka is checking availability across her calendars. We'll update you as soon as she responds.' Stage 4 Approved: 'Approved! Your new dates are Feb 1-8 at $1,280/month.' Stage 4 Denied: 'Not available. Those dates are already booked. Here are nearby alternatives.'",
            "cta": "N/A - Progress indicator is informational feedback, actions appear after Stage 4 completion",
            "microcopy": "Timestamps under each stage: 'Today at 2:45 PM' / '3 hours ago' to show progress. Proactive check-in if Stage 3 extends beyond average: 'This is taking longer than usual. Nneka is likely checking multiple calendars.'"
          },
          "html_css_snippet": "<div style=\"max-width: 400px; padding: 24px; background: white; border-radius: 12px;\"><h3>Request Status</h3><div style=\"position: relative;\"><div style=\"position: absolute; left: 12px; width: 4px; background: #bdb8b0;\"></div><div style=\"margin-bottom: 40px; display: flex; gap: 8px;\"><div style=\"width: 24px; height: 24px; border-radius: 50%; background: #2d5a3d;\"></div><div>Request received</div></div></div></div>",
          "before_after": {
            "before": "Guest texts 'can I do another day?' and waits in silence for hours or days. No acknowledgment that request was received. No timeline for response. No status updates during wait. Guest experiences anxiety wondering if request was lost, if host saw it, when answer will come.",
            "after": "Guest submits request. Stage 1 appears instantly (under 100ms): 'Request received. Nneka typically responds within 24 hours.' Vertical progress indicator shows current stage with pulsing animation. When Nneka opens request, Stage 2 updates automatically: 'Nneka is reviewing.' If delay extends, Stage 3 explains: 'Checking availability across calendars.' Guest always knows current status, eliminating anxiety during wait."
          }
        },
        {
          "id": "ui-006",
          "title": "Seasonal Pricing Calendar Heatmap with Interactive Tooltips",
          "source_elements": ["works-006", "communicates-001", "looks-004", "behaves-006", "feels-005"],
          "category": "pricing",
          "journey_phases": ["listing_evaluation", "proposal_creation"],
          "priority": "medium",
          "visual_spec": {
            "typography": "Pricing ranges: IBM Plex Mono regular 13px for precision/reliability. Season labels: Outfit medium 14px for clarity. Month names: Outfit regular 12px",
            "colors": "Winter months: cool blue-tinted surface rgba(45,90,61,0.1). Summer months: warm amber-tinted surface rgba(193,122,40,0.15). Spring/Fall: neutral var(--surface-warm) #fdfcfa. Current month border: var(--accent) #2d5a3d. Tooltip background: var(--surface) with shadow-md",
            "spacing": "8px between calendar month cells. 16px padding inside tooltip. 24px between calendar and explanation text. Calendar cell size: 80px for month representation. Tooltip max-width: 200px",
            "layout": "12-month calendar grid (3 rows x 4 columns) showing full year at-a-glance. Color temperature gradient provides instant seasonal awareness. Current month highlighted with accent border. Tooltip appears on hover showing pricing range for that season"
          },
          "interaction_spec": {
            "default": "Calendar displays full year with color temperature gradient. Current month has accent border to anchor guest's temporal context",
            "hover": "50ms delay before tooltip appears (prevents spam during cursor movement). Tooltip shows: 'Winter: $1,170-1,240/mo' with season name and pricing range. Tooltip follows cursor during month cell hover",
            "click": "N/A - Calendar is informational visualization, not interactive selector (date selection happens in separate interface)",
            "states": "Winter (Dec-Feb): Cool tinted background. Summer (Jun-Aug): Warm tinted background. Spring (Mar-May) / Fall (Sep-Nov): Neutral warm surface. Current month: Accent green border for temporal anchoring. Tooltip positioning: If near screen edge, repositions to opposite side to remain visible"
          },
          "copy_spec": {
            "headline": "Seasonal Pricing",
            "body": "Contextual explanation below calendar: 'Rates vary by season. Winter: $1,170-1,240/mo. Summer: $1,320-1,400/mo.' When guest selects dates: 'Your selected dates (Jan 15-Feb 15) are in winter pricing range.'",
            "cta": "N/A - Calendar is informational, not action-oriented",
            "microcopy": "Tooltip content: '[Season]: $[low]-[high]/mo'. First-time user helper text: 'Pricing varies by season. Hover to see ranges.' Educational note: 'Winter dates typically cost less than summer dates.'"
          },
          "html_css_snippet": "<div><h3>Seasonal Pricing</h3><div style=\"display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;\"><div style=\"width: 80px; height: 60px; padding: 12px; background: rgba(45,90,61,0.1); border-radius: 6px;\">Jan</div><!-- More months --></div><div style=\"padding: 16px; background: #fdfcfa; border-radius: 8px; margin-top: 24px;\">Winter: $1,170-1,240/mo</div></div>",
          "before_after": {
            "before": "Listing shows single price '$1,170/month' with no seasonal context. Guest books at winter pricing without knowing summer would be $1,350. During rescheduling to summer dates, pricing increase feels like surprise or bait-and-switch. False conceptual model (price = fixed) created during evaluation breaks during rescheduling.",
            "after": "Listing shows 'Starting at $1,170/month' with seasonal calendar heatmap below. Guest sees at-a-glance that winter (cool tinted) costs less than summer (warm tinted). Hovers over summer months to see '$1,320-1,400/mo' range. Books with awareness that pricing varies seasonally. When rescheduling to summer, pricing increase is expected and understood."
          }
        },
        {
          "id": "ui-007",
          "title": "Predictive Approval Badge with Alternative Date Cards",
          "source_elements": ["works-004", "communicates-005", "behaves-005", "feels-003"],
          "category": "feedback",
          "journey_phases": ["negotiation", "active_lease"],
          "priority": "medium",
          "visual_spec": {
            "typography": "Badge label: Outfit semibold 14px. Alternative date cards: Outfit regular 14px for dates, IBM Plex Mono regular 13px for pricing. Helper text: Outfit regular 13px",
            "colors": "Likely approved badge: var(--accent) #2d5a3d background, var(--surface) white text. Unavailable badge: var(--signal-warn) #c17a28 background, var(--surface) white text. Uncertain badge: var(--ink-ghost) #bdb8b0 background, var(--ink) text. Alternative date cards: var(--surface) background with var(--border) border, hover shows accent border",
            "spacing": "Badge padding: 8px 16px. Gap between badge and explanation: 8px. Alternative date cards: 16px padding, 12px gap between cards. Icon size: 16px checkmark/info/dash",
            "layout": "Badge appears above date selection after guest picks dates. Green badge (likely approved) with checkmark icon. Amber badge (unavailable) with info icon shows 3 alternative date cards immediately below. Gray badge (uncertain) with dash icon. Cards display in horizontal row on desktop, stack vertically on mobile"
          },
          "interaction_spec": {
            "default": "Date picker interface with no dates selected. Prediction badge hidden. Helper text: 'Select your new dates to see if they're available.'",
            "hover": "Alternative date cards show subtle shadow elevation and accent border on hover to signal interactivity",
            "click": "Clicking alternative date card pre-fills those dates into main date picker and recalculates prediction. Card animates with scale (1.0 to 1.02) over 150ms ease-out",
            "states": "Loading (200ms after date selection): Badge with pulse animation 'Checking availability...' in ink-soft. Likely approved: Green badge with checkmark 'Likely approved based on Nneka's calendar' + pricing preview + confident CTA 'Request these dates'. Unavailable: Amber badge 'These dates appear unavailable' + 3 alternative cards with dates/pricing/green badges + secondary button 'Request anyway'. Uncertain: Gray badge 'Approval uncertain' + explanation + CTA 'Send request for review'"
          },
          "copy_spec": {
            "headline": "Availability Prediction",
            "body": "Likely approved: 'Based on Nneka's availability, your requested dates will likely be approved. These dates are available and within Nneka's flexibility policy.' Unavailable: 'These dates appear unavailable. Nneka's calendar shows these dates are blocked. Try these nearby dates instead:' Uncertain: 'Approval uncertain. These dates may work, but Nneka needs to review. Dates are available but outside her usual flexibility policy (>14 day shift).'",
            "cta": "Likely approved: 'Request these dates' (confident). Unavailable: 'Request anyway' (secondary button), 'Request [alternative dates]' (primary per card). Uncertain: 'Send request for review'",
            "microcopy": "First-time rescheduler tooltip: 'This prediction is based on Nneka's calendar and policies. She still reviews each request.' Loading state: 'Checking availability...' Error state: 'Cannot verify availability. Your request will be manually reviewed.'"
          },
          "html_css_snippet": "<div><div style=\"display: inline-flex; gap: 8px; padding: 8px 16px; background: #2d5a3d; color: white; border-radius: 20px;\"><span>✓</span><span>Likely approved</span></div><p>These dates are available and within Nneka's flexibility policy.</p><button>Request these dates</button></div>",
          "before_after": {
            "before": "Guest selects new dates, submits request, then waits 24 hours to discover request will be denied because dates are already blocked. Time wasted waiting for obvious denial. No guidance on which dates would work. Must guess and resubmit repeatedly.",
            "after": "Guest selects dates. Within 200ms, sees green 'Likely approved' badge with pricing preview and confident 'Request these dates' CTA. If dates unavailable, amber badge appears with 3 alternative date cards showing pricing and 'Likely approved' indicators. Guest can click alternative card to pre-fill those dates or 'Request anyway' as secondary option. Crisis resolved in seconds, not hours."
          }
        },
        {
          "id": "ui-008",
          "title": "Micro-Animation Button Press with Success Checkmark",
          "source_elements": ["looks-007", "behaves-007", "feels-004"],
          "category": "feedback",
          "journey_phases": ["proposal_creation", "negotiation", "active_lease"],
          "priority": "medium",
          "visual_spec": {
            "typography": "Button text: Outfit semibold 16px. Success message: Outfit medium 14px",
            "colors": "Button background: var(--accent) #2d5a3d. Button text: var(--surface) #ffffff. Button hover: var(--accent-bright) #3a7a52. Success checkmark: var(--accent). Loading spinner: var(--surface) white on accent background",
            "spacing": "Button padding: 12px 24px. Icon size: 20px for checkmark/spinner. Gap between icon and text: 8px",
            "layout": "Full-width button on mobile, auto-width on desktop. Checkmark/spinner centered in button during state transitions. Success checkmark scales from 0 to 1.0 with spring overshoot to 1.05"
          },
          "interaction_spec": {
            "default": "Button at rest, scale 1.0, no animation",
            "hover": "Subtle background color shift to accent-bright over 100ms ease",
            "click": "Press: Scale down to 0.97 in 80ms ease-out. Release: Spring return to 1.0 over 400ms with subtle overshoot. Loading: Button content fades to spinner over 100ms, spinner rotates continuously (linear, 1s per rotation). Success: Spinner fades out, checkmark scales in from 0 to 1.05 to 1.0 over 400ms spring, holds for 1 second before transitioning",
            "states": "Default: 'Request these dates' with no icon. Loading: Spinner rotating with no text visible. Success: Checkmark with brief 'Sent' text, then transition to next screen. Error: X icon with shake animation (3 degrees left-right-left, 200ms), button returns to default after 2 seconds for retry"
          },
          "copy_spec": {
            "headline": "N/A - Button is action element",
            "body": "N/A",
            "cta": "Default: 'Request these dates' / 'Confirm new dates'. Success: 'Sent' (brief confirmation). Error: Button returns to default state with retry affordance",
            "microcopy": "Loading state shows spinner only, no text. Success state shows checkmark + 'Sent' for 1 second before transitioning"
          },
          "html_css_snippet": "<button style=\"padding: 12px 24px; background: #2d5a3d; color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 80ms ease-out;\">Request these dates</button>",
          "before_after": {
            "before": "Guest clicks 'Submit request' button. No visual feedback. 300ms delay while waiting for server response creates uncertainty: 'Did it work? Should I click again?' Generic loading spinner eventually appears. Final state shows text confirmation with no visual celebration.",
            "after": "Guest clicks button. Immediate scale-down to 0.97 in 80ms confirms click registered. Spring return to 1.0 over 400ms feels responsive and confident. Within 100ms, button content fades to rotating spinner, confirming processing has begun. After server response, spinner fades out and green checkmark springs in (0 to 1.05 to 1.0 over 400ms) with brief 'Sent' text. Guest feels platform is instant and capable. Holds for 1 second before transitioning to next screen, providing closure."
          }
        },
        {
          "id": "ui-009",
          "title": "Warm Welcome Screen - Human-to-Digital Continuity",
          "source_elements": ["communicates-008", "looks-008", "feels-006"],
          "category": "trust_signal",
          "journey_phases": ["discovery", "onboarding"],
          "priority": "high",
          "visual_spec": {
            "typography": "Greeting: Instrument Serif medium 24px for warmth and personality. Body text: Outfit regular 16px for clarity. Bryant's name: Outfit semibold 16px for emphasis",
            "colors": "Background: var(--surface-warm) #fdfcfa for warm, approachable feel. Text: var(--ink) #1a1714 for primary, var(--ink-soft) #4a4640 for secondary. Accent elements: var(--accent) #2d5a3d. Illustration backgrounds: var(--accent-light) #e8f0eb with var(--ink-soft) outlines",
            "spacing": "Top padding: 40px for comfortable entry. Gap between greeting and body: 16px. Gap between body and CTA: 24px. Illustration max-height: 240px. Padding around illustration: 24px",
            "layout": "Centered column layout, max-width 600px. Bryant's photo (80px circle) positioned top-left or centered depending on viewport. Illustration in background (optional, decorative). Greeting references specific conversation details. Primary CTA button below fold"
          },
          "interaction_spec": {
            "default": "Page loads with all trust elements (Bryant's name/photo, conversation reference, warm greeting) visible within first 5 seconds. Illustration fades in smoothly over 300ms to establish presence without rush",
            "hover": "Bryant's contact card shows subtle shadow elevation on hover if clickable",
            "click": "Primary CTA ('View your matches' or 'See listings') navigates to personalized results",
            "states": "First visit: Full welcome with Bryant's context and conversation reference. Return visit: Condensed version ('Welcome back, Maria!') with Bryant still visible. Error state (cannot load user context): Generic but warm welcome with fallback to human contact: 'Questions? Message Bryant.'"
          },
          "copy_spec": {
            "headline": "Hi Maria! As Bryant mentioned...",
            "body": "Bryant mentioned you're looking for flexible weeknight stays near downtown. Here are listings that match your needs, all with the rescheduling flexibility you asked about.",
            "cta": "See your matches",
            "microcopy": "Bryant's contact visible: 'Your contact: Bryant' with email/phone. Footer text: 'Questions? Message Bryant anytime.' First email subject line: 'Maria, here are the listings Bryant mentioned' (from bryant@splitlease.com, not noreply)"
          },
          "html_css_snippet": "<div style=\"max-width: 600px; margin: 0 auto; padding: 40px 24px; background: #fdfcfa;\"><div style=\"display: flex; gap: 16px; margin-bottom: 32px;\"><img src=\"bryant.jpg\" style=\"width: 48px; height: 48px; border-radius: 50%;\"><div><div style=\"font-weight: 600;\">Your contact: Bryant</div><div>bryant@splitlease.com</div></div></div><h1 style=\"font-size: 24px; margin-bottom: 16px;\">Hi Maria! As Bryant mentioned...</h1><p>Bryant mentioned you're looking for flexible weeknight stays near downtown.</p><button style=\"width: 100%; padding: 16px; background: #2d5a3d; color: white; border: none; border-radius: 10px; margin-top: 24px;\">See your matches</button></div>",
          "before_after": {
            "before": "Guest clicks platform link after warm phone call with Bryant. Encounters cold corporate interface: 'Welcome to Split Lease. Create your account and explore available listings in your area.' No mention of Bryant, no reference to conversation, stark white backgrounds with sharp corners. Guest experiences emotional disconnect: warmth (Bryant's voice) → coldness (generic platform). System 1 evaluates as separate entity from Bryant, requiring trust rebuild from zero.",
            "after": "Guest clicks platform link. First screen shows Bryant's photo and name within 2 seconds: immediate recognition. Greeting reads 'Hi Maria! As Bryant mentioned...' connecting to prior interaction. Body text references specific conversation details: 'flexible weeknight stays near downtown.' Warm visual design with rounded corners, soft backgrounds (surface-warm), and organic illustration style. Guest feels welcomed - this is continuation of Bryant's service, not new uncertain territory. Trust transfers seamlessly from human to digital touchpoint."
          }
        },
        {
          "id": "ui-010",
          "title": "Progressive Disclosure Pricing Tooltip - Hover-Activated Detail",
          "source_elements": ["works-006", "communicates-001", "behaves-006", "feels-005"],
          "category": "pricing",
          "journey_phases": ["listing_evaluation", "proposal_creation"],
          "priority": "medium",
          "visual_spec": {
            "typography": "Tooltip content: Outfit regular 13px for compact readability. Pricing: IBM Plex Mono regular 13px for precision. 'Learn more' link: Outfit medium 12px",
            "colors": "Tooltip background: var(--surface) #ffffff with shadow-md for elevation. Text: var(--ink) #1a1714 for primary, var(--ink-soft) #4a4640 for explanations. Border: var(--border) #e2dfd9 subtle outline. 'Learn more' link: var(--accent) #2d5a3d",
            "spacing": "Tooltip padding: 12px. Max-width: 200px to prevent excessive line length. Gap between pricing and explanation: 8px. Arrow/pointer: 8px triangle",
            "layout": "Tooltip appears 8px above/below triggering element. Auto-repositions if near screen edge. Arrow points to trigger element. Close on mouse leave with 100ms delay to prevent accidental dismissal"
          },
          "interaction_spec": {
            "default": "Pricing shown as simple range: 'Starting at $1,170/month. Rates vary by season.' No tooltip visible until hover or focus",
            "hover": "50ms delay before tooltip appears (prevents spam during cursor movement). Tooltip fades in over 100ms ease-out. Shows: 'Winter: $1,170-1,240/mo. Rates vary by season. Summer dates typically cost more.' Optional 'Learn more' link expands to full seasonal pricing breakdown",
            "click": "'Learn more' link in tooltip expands accordion section below main pricing to show full seasonal calendar with detailed ranges. Accordion animation: 200ms ease-out",
            "states": "Tier 1 (listing page): Simple 'Starting at $1,170/month. Rates vary by season.' Tier 2 (hover tooltip): 'Winter: $1,170-1,240/mo. Summer: $1,320-1,400/mo. Your dates determine final price.' Tier 3 (expanded accordion): Full seasonal calendar heatmap with month-by-month breakdown. Novice users see all three tiers. Expert users (3+ listings viewed) see Tier 1 + direct link to Tier 3, skipping Tier 2 tooltip"
          },
          "copy_spec": {
            "headline": "Seasonal Pricing (tooltip title, optional)",
            "body": "Tier 1: 'Starting at $1,170/month. Rates vary by season.' Tier 2 tooltip: 'Winter: $1,170-1,240/mo. Summer: $1,320-1,400/mo. Rates vary by season.' Tier 3 expanded: Full explanation with calendar visualization and seasonal ranges",
            "cta": "'Learn more' link in Tier 2 tooltip expands Tier 3 accordion",
            "microcopy": "First-time users see Tier 2 tooltip automatically on first hover with helper icon. Expert users (toggle enabled) see condensed version. Tooltip for selected dates: 'Your Jan 15-Feb 15 dates: $1,170/month (winter rates).'"
          },
          "html_css_snippet": "<div style=\"position: relative; display: inline-block;\"><span>Starting at $1,170/month <span style=\"color: #6b7280;\">Rates vary by season</span></span><div style=\"display: none; position: absolute; padding: 12px; background: white; border: 1px solid #e5e7eb; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); max-width: 200px;\"><div>Winter: $1,170-1,240/mo<br>Summer: $1,320-1,400/mo</div><a href=\"#\" style=\"color: #2d5a3d;\">Learn more →</a></div></div>",
          "before_after": {
            "before": "Listing shows single price '$1,170/month' with no indication that pricing varies. Guest books without seasonal context. During rescheduling, discovers pricing increase to $1,350 for summer dates, feels surprised or deceived. Alternative: Listing shows full 3-paragraph explanation of seasonal pricing methodology overwhelming guest before they've even decided if they're interested.",
            "after": "Listing shows 'Starting at $1,170/month. Rates vary by season' with subtle info icon (Tier 1 - scannable). Guest hovers over 'vary by season' and tooltip appears in 50ms showing 'Winter: $1,170-1,240/mo, Summer: $1,320-1,400/mo' (Tier 2 - contextual precision). If guest wants full details, clicks 'Learn more' in tooltip to expand accordion below with seasonal calendar heatmap (Tier 3 - comprehensive). Guest controls depth of information, gets exactly what they need when they need it."
          }
        }
      ]
    };

    // ========================================
    // CATEGORY COLORS MAPPING
    // ========================================
    const categoryColors = {
      trust_signal: { bg: 'var(--cat-trust-light)', color: 'var(--cat-trust)' },
      social_proof: { bg: 'var(--cat-social-light)', color: 'var(--cat-social)' },
      commitment_chain: { bg: 'var(--cat-commitment-light)', color: 'var(--cat-commitment)' },
      comprehension: { bg: 'var(--cat-comprehension-light)', color: 'var(--cat-comprehension)' },
      feedback: { bg: 'var(--cat-feedback-light)', color: 'var(--cat-feedback)' },
      navigation: { bg: 'var(--cat-navigation-light)', color: 'var(--cat-navigation)' },
      pricing: { bg: 'var(--cat-pricing-light)', color: 'var(--cat-pricing)' },
      timeline: { bg: 'var(--cat-timeline-light)', color: 'var(--cat-timeline)' },
      rescheduling: { bg: 'var(--cat-rescheduling-light)', color: 'var(--cat-rescheduling)' },
      flexibility: { bg: 'var(--cat-flexibility-light)', color: 'var(--cat-flexibility)' }
    };

    // ========================================
    // STATE
    // ========================================
    let compareSelection = [];

    // ========================================
    // INITIALIZATION
    // ========================================
    document.addEventListener('DOMContentLoaded', () => {
      renderCards(elementsData.elements);
      setupFilters();
    });

    // ========================================
    // RENDER FUNCTIONS
    // ========================================
    function renderCards(elements) {
      const grid = document.getElementById('cards-grid');
      grid.innerHTML = '';

      if (elements.length === 0) {
        grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--text-gray);">No elements match your filters.</div>';
        return;
      }

      elements.forEach(element => {
        const card = createCard(element);
        grid.appendChild(card);
      });
    }

    function createCard(element) {
      const card = document.createElement('div');
      card.className = 'card';
      card.dataset.id = element.id;

      const categoryStyle = categoryColors[element.category] || { bg: '#f3f4f6', color: '#6b7280' };

      card.innerHTML = `
        <div class="card-preview">
          <div class="preview-content">${element.html_css_snippet ? element.html_css_snippet.substring(0, 200) + '...' : 'No preview available'}</div>
        </div>
        <div class="card-body">
          <div class="card-header">
            <h3 class="card-title">${element.title}</h3>
            <span class="priority-badge priority-${element.priority}">${element.priority}</span>
          </div>
          <span class="category-badge" style="background: ${categoryStyle.bg}; color: ${categoryStyle.color};">
            ${element.category.replace(/_/g, ' ')}
          </span>
          <div class="phases">
            ${element.journey_phases.map(phase => `<span class="phase-tag">${phase.replace(/_/g, ' ')}</span>`).join('')}
          </div>
        </div>
        <div class="card-footer">
          <span>${element.id}</span>
          <label class="compare-checkbox">
            <input type="checkbox" onchange="toggleCompare('${element.id}')">
            Compare
          </label>
        </div>
      `;

      card.onclick = (e) => {
        if (e.target.type !== 'checkbox') {
          openModal(element);
        }
      };

      return card;
    }

    // ========================================
    // MODAL FUNCTIONS
    // ========================================
    function openModal(element) {
      const overlay = document.getElementById('modal-overlay');
      const title = document.getElementById('modal-title');
      const body = document.getElementById('modal-body');

      title.textContent = element.title;

      const categoryStyle = categoryColors[element.category] || { bg: '#f3f4f6', color: '#6b7280' };

      body.innerHTML = `
        <div class="modal-section">
          <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem;">
            <span class="category-badge" style="background: ${categoryStyle.bg}; color: ${categoryStyle.color};">
              ${element.category.replace(/_/g, ' ')}
            </span>
            <span class="priority-badge priority-${element.priority}">${element.priority} priority</span>
          </div>
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.5rem;">
            ${element.journey_phases.map(phase => `<span class="phase-tag">${phase.replace(/_/g, ' ')}</span>`).join('')}
          </div>
        </div>

        <div class="modal-section">
          <h3 class="modal-section-title">📐 Visual Specification</h3>
          <div class="modal-section-content">
            <div class="spec-grid">
              <span class="spec-label">Typography:</span>
              <span class="spec-value">${element.visual_spec.typography}</span>

              <span class="spec-label">Colors:</span>
              <span class="spec-value">${element.visual_spec.colors}</span>

              <span class="spec-label">Spacing:</span>
              <span class="spec-value">${element.visual_spec.spacing}</span>

              <span class="spec-label">Layout:</span>
              <span class="spec-value">${element.visual_spec.layout}</span>
            </div>
          </div>
        </div>

        <div class="modal-section">
          <h3 class="modal-section-title">⚡ Interaction Specification</h3>
          <div class="modal-section-content">
            <div class="spec-grid">
              <span class="spec-label">Default:</span>
              <span class="spec-value">${element.interaction_spec.default}</span>

              <span class="spec-label">Hover:</span>
              <span class="spec-value">${element.interaction_spec.hover}</span>

              <span class="spec-label">Click:</span>
              <span class="spec-value">${element.interaction_spec.click}</span>

              <span class="spec-label">States:</span>
              <span class="spec-value">${element.interaction_spec.states}</span>
            </div>
          </div>
        </div>

        <div class="modal-section">
          <h3 class="modal-section-title">✍️ Copy Specification</h3>
          <div class="modal-section-content">
            <div class="spec-grid">
              <span class="spec-label">Headline:</span>
              <span class="spec-value">${element.copy_spec.headline}</span>

              <span class="spec-label">Body:</span>
              <span class="spec-value">${element.copy_spec.body}</span>

              <span class="spec-label">CTA:</span>
              <span class="spec-value">${element.copy_spec.cta}</span>

              <span class="spec-label">Microcopy:</span>
              <span class="spec-value">${element.copy_spec.microcopy}</span>
            </div>
          </div>
        </div>

        <div class="modal-section">
          <h3 class="modal-section-title">🎨 Live HTML Preview</h3>
          <div class="live-preview">
            ${element.html_css_snippet || '<p style="color: var(--text-gray);">No preview available</p>'}
          </div>
        </div>

        <div class="modal-section">
          <h3 class="modal-section-title">🔄 Before/After Comparison</h3>
          <div class="before-after">
            <div class="before-after-item">
              <div class="before-after-label before-label">
                ❌ Before
              </div>
              <div class="before-after-text">${element.before_after.before}</div>
            </div>
            <div class="before-after-item">
              <div class="before-after-label after-label">
                ✅ After
              </div>
              <div class="before-after-text">${element.before_after.after}</div>
            </div>
          </div>
        </div>

        <div class="modal-section">
          <h3 class="modal-section-title">🔗 Source Elements</h3>
          <div class="source-elements">
            ${element.source_elements.map(src => `<span class="source-element-tag">${src}</span>`).join('')}
          </div>
        </div>
      `;

      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      const overlay = document.getElementById('modal-overlay');
      overlay.classList.remove('active');
      document.body.style.overflow = '';
    }

    function closeModalOnOverlay(event) {
      if (event.target.id === 'modal-overlay') {
        closeModal();
      }
    }

    // ========================================
    // FILTER FUNCTIONS
    // ========================================
    function setupFilters() {
      const categoryFilter = document.getElementById('filter-category');
      const phaseFilter = document.getElementById('filter-phase');
      const priorityFilter = document.getElementById('filter-priority');
      const searchBox = document.getElementById('search-box');

      [categoryFilter, phaseFilter, priorityFilter, searchBox].forEach(el => {
        el.addEventListener('change', applyFilters);
        el.addEventListener('input', applyFilters);
      });
    }

    function applyFilters() {
      const category = document.getElementById('filter-category').value;
      const phase = document.getElementById('filter-phase').value;
      const priority = document.getElementById('filter-priority').value;
      const search = document.getElementById('search-box').value.toLowerCase();

      let filtered = elementsData.elements.filter(element => {
        const matchCategory = !category || element.category === category;
        const matchPhase = !phase || element.journey_phases.includes(phase);
        const matchPriority = !priority || element.priority === priority;
        const matchSearch = !search ||
          element.title.toLowerCase().includes(search) ||
          element.id.toLowerCase().includes(search) ||
          element.category.toLowerCase().includes(search);

        return matchCategory && matchPhase && matchPriority && matchSearch;
      });

      renderCards(filtered);
    }

    function resetFilters() {
      document.getElementById('filter-category').value = '';
      document.getElementById('filter-phase').value = '';
      document.getElementById('filter-priority').value = '';
      document.getElementById('search-box').value = '';
      applyFilters();
    }

    // ========================================
    // COMPARE FUNCTIONS
    // ========================================
    function toggleCompare(id) {
      const element = elementsData.elements.find(el => el.id === id);
      const index = compareSelection.findIndex(el => el.id === id);

      if (index > -1) {
        compareSelection.splice(index, 1);
        document.querySelector(`[data-id="${id}"]`).classList.remove('selected');
      } else {
        if (compareSelection.length < 2) {
          compareSelection.push(element);
          document.querySelector(`[data-id="${id}"]`).classList.add('selected');
        } else {
          alert('You can only compare 2 elements at a time. Uncheck one to select another.');
          event.target.checked = false;
          return;
        }
      }

      updateComparePanel();
    }

    function updateComparePanel() {
      const panel = document.getElementById('compare-panel');
      const count = document.getElementById('compare-count');
      const content = document.getElementById('compare-content');
      const viewBtn = document.getElementById('compare-view-btn');

      count.textContent = compareSelection.length;

      if (compareSelection.length > 0) {
        panel.classList.add('active');
      } else {
        panel.classList.remove('active');
      }

      if (compareSelection.length === 2) {
        viewBtn.disabled = false;
      } else {
        viewBtn.disabled = true;
      }

      content.innerHTML = compareSelection.map(el => {
        const categoryStyle = categoryColors[el.category] || { bg: '#f3f4f6', color: '#6b7280' };
        return `
          <div class="compare-item">
            <div class="compare-item-title">${el.title}</div>
            <div style="margin-bottom: 0.75rem;">
              <span class="category-badge" style="background: ${categoryStyle.bg}; color: ${categoryStyle.color}; font-size: 0.75rem;">
                ${el.category.replace(/_/g, ' ')}
              </span>
            </div>
            <div class="compare-item-details">
              <strong>Priority:</strong> ${el.priority}<br>
              <strong>Phases:</strong> ${el.journey_phases.join(', ').replace(/_/g, ' ')}<br>
              <strong>ID:</strong> ${el.id}
            </div>
          </div>
        `;
      }).join('');
    }

    function viewComparison() {
      if (compareSelection.length !== 2) return;

      const [el1, el2] = compareSelection;
      const overlay = document.getElementById('modal-overlay');
      const title = document.getElementById('modal-title');
      const body = document.getElementById('modal-body');

      title.textContent = 'Side-by-Side Comparison';

      const cat1Style = categoryColors[el1.category] || { bg: '#f3f4f6', color: '#6b7280' };
      const cat2Style = categoryColors[el2.category] || { bg: '#f3f4f6', color: '#6b7280' };

      body.innerHTML = `
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
          <div>
            <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">${el1.title}</h3>
            <div style="margin-bottom: 1rem;">
              <span class="category-badge" style="background: ${cat1Style.bg}; color: ${cat1Style.color};">
                ${el1.category.replace(/_/g, ' ')}
              </span>
              <span class="priority-badge priority-${el1.priority}" style="margin-left: 0.5rem;">${el1.priority}</span>
            </div>
            <div style="font-size: 0.875rem; color: var(--text-gray);">
              <strong>ID:</strong> ${el1.id}<br>
              <strong>Phases:</strong> ${el1.journey_phases.join(', ').replace(/_/g, ' ')}
            </div>
          </div>
          <div>
            <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">${el2.title}</h3>
            <div style="margin-bottom: 1rem;">
              <span class="category-badge" style="background: ${cat2Style.bg}; color: ${cat2Style.color};">
                ${el2.category.replace(/_/g, ' ')}
              </span>
              <span class="priority-badge priority-${el2.priority}" style="margin-left: 0.5rem;">${el2.priority}</span>
            </div>
            <div style="font-size: 0.875rem; color: var(--text-gray);">
              <strong>ID:</strong> ${el2.id}<br>
              <strong>Phases:</strong> ${el2.journey_phases.join(', ').replace(/_/g, ' ')}
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
          <div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--primary-purple); margin-bottom: 0.5rem;">Visual Spec</h4>
            <div style="background: var(--bg-light); padding: 1rem; border-radius: var(--rounded-lg); font-size: 0.875rem; line-height: 1.6;">
              <strong>Typography:</strong> ${el1.visual_spec.typography}<br><br>
              <strong>Colors:</strong> ${el1.visual_spec.colors}
            </div>
          </div>
          <div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--primary-purple); margin-bottom: 0.5rem;">Visual Spec</h4>
            <div style="background: var(--bg-light); padding: 1rem; border-radius: var(--rounded-lg); font-size: 0.875rem; line-height: 1.6;">
              <strong>Typography:</strong> ${el2.visual_spec.typography}<br><br>
              <strong>Colors:</strong> ${el2.visual_spec.colors}
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
          <div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--primary-purple); margin-bottom: 0.5rem;">Copy Spec</h4>
            <div style="background: var(--bg-light); padding: 1rem; border-radius: var(--rounded-lg); font-size: 0.875rem; line-height: 1.6;">
              <strong>Headline:</strong> ${el1.copy_spec.headline}<br><br>
              <strong>CTA:</strong> ${el1.copy_spec.cta}
            </div>
          </div>
          <div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--primary-purple); margin-bottom: 0.5rem;">Copy Spec</h4>
            <div style="background: var(--bg-light); padding: 1rem; border-radius: var(--rounded-lg); font-size: 0.875rem; line-height: 1.6;">
              <strong>Headline:</strong> ${el2.copy_spec.headline}<br><br>
              <strong>CTA:</strong> ${el2.copy_spec.cta}
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
          <div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--primary-purple); margin-bottom: 0.5rem;">Before/After</h4>
            <div style="background: var(--bg-light); padding: 1rem; border-radius: var(--rounded-lg); font-size: 0.875rem; line-height: 1.6;">
              <div style="color: #DC3545; font-weight: 600; margin-bottom: 0.5rem;">Before:</div>
              <p style="margin-bottom: 1rem;">${el1.before_after.before}</p>
              <div style="color: #2d5a3d; font-weight: 600; margin-bottom: 0.5rem;">After:</div>
              <p>${el1.before_after.after}</p>
            </div>
          </div>
          <div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--primary-purple); margin-bottom: 0.5rem;">Before/After</h4>
            <div style="background: var(--bg-light); padding: 1rem; border-radius: var(--rounded-lg); font-size: 0.875rem; line-height: 1.6;">
              <div style="color: #DC3545; font-weight: 600; margin-bottom: 0.5rem;">Before:</div>
              <p style="margin-bottom: 1rem;">${el2.before_after.before}</p>
              <div style="color: #2d5a3d; font-weight: 600; margin-bottom: 0.5rem;">After:</div>
              <p>${el2.before_after.after}</p>
            </div>
          </div>
        </div>
      `;

      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function clearComparison() {
      compareSelection.forEach(el => {
        const card = document.querySelector(`[data-id="${el.id}"]`);
        if (card) {
          card.classList.remove('selected');
          const checkbox = card.querySelector('input[type="checkbox"]');
          if (checkbox) checkbox.checked = false;
        }
      });
      compareSelection = [];
      updateComparePanel();
    }

    // ESC key to close modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
      }
    });
  </script>
</body>
</html>
