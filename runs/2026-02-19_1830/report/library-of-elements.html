<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UI Elements Library — Run 2026-02-19_1830</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-purple: #31135D;
    --secondary-purple: #4B47CE;
    --accent-purple: rgb(109, 49, 194);
    --bg-page: #f8f6fb;
    --bg-white: #ffffff;
    --bg-off-white: rgb(252, 250, 255);
    --text-dark: #1a1a1a;
    --text-description: #374151;
    --text-gray: #6b7280;
    --text-light-gray: #9ca3af;
    --border-color: #e5e7eb;
    --rounded-xl: 12px;
    --rounded-2xl: 16px;
    --shadow-card: 0 2px 8px rgba(49, 19, 93, 0.08);
    --shadow-card-hover: 0 8px 24px rgba(49, 19, 93, 0.14);
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-page);
    color: var(--text-dark);
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  /* ── Header ── */
  .lib-header {
    background: linear-gradient(135deg, var(--primary-purple) 0%, #5a2d8f 100%);
    padding: 48px 32px 40px;
    color: #fff;
  }
  .lib-header__inner { max-width: 1200px; margin: 0 auto; }
  .lib-header__title {
    font-family: 'DM Sans', sans-serif;
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 8px;
  }
  .lib-header__meta {
    font-size: 14px;
    opacity: 0.8;
    margin-bottom: 4px;
  }
  .lib-header__lens {
    font-size: 13px;
    opacity: 0.65;
    max-width: 600px;
  }

  /* ── Toolbar ── */
  .lib-toolbar {
    max-width: 1200px;
    margin: 0 auto;
    padding: 24px 32px 0;
  }
  .lib-search {
    width: 100%;
    max-width: 420px;
    padding: 10px 16px 10px 40px;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    font-size: 14px;
    font-family: 'Inter', sans-serif;
    background: var(--bg-white) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E") 14px center no-repeat;
    outline: none;
    transition: border-color 0.2s;
  }
  .lib-search:focus { border-color: var(--secondary-purple); }

  .lib-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 16px;
  }
  .lib-filters__group {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
  }
  .lib-filters__label {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-gray);
    margin-right: 2px;
  }
  .lib-filter-btn {
    font-family: 'Inter', sans-serif;
    font-size: 12px;
    font-weight: 500;
    padding: 5px 12px;
    border: 1px solid var(--border-color);
    border-radius: 20px;
    background: var(--bg-white);
    color: var(--text-description);
    cursor: pointer;
    transition: all 0.15s ease;
    white-space: nowrap;
  }
  .lib-filter-btn:hover { border-color: var(--secondary-purple); color: var(--secondary-purple); }
  .lib-filter-btn.active {
    background: var(--secondary-purple);
    color: #fff;
    border-color: var(--secondary-purple);
  }

  .lib-filters__sep {
    width: 1px;
    height: 20px;
    background: var(--border-color);
    margin: 0 8px;
  }

  /* ── Grid ── */
  .lib-grid {
    max-width: 1200px;
    margin: 0 auto;
    padding: 24px 32px 64px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 24px;
  }

  /* ── Card ── */
  .lib-card {
    background: var(--bg-white);
    border: 1px solid var(--border-color);
    border-radius: var(--rounded-2xl);
    overflow: hidden;
    box-shadow: var(--shadow-card);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
  }
  .lib-card:hover {
    box-shadow: var(--shadow-card-hover);
    transform: translateY(-2px);
  }
  .lib-card.hidden { display: none; }

  .lib-card__preview {
    width: 100%;
    height: 260px;
    border: none;
    background: var(--bg-off-white);
    display: block;
    pointer-events: none;
    overflow: hidden;
  }

  .lib-card__body { padding: 16px 20px 20px; flex: 1; display: flex; flex-direction: column; }

  .lib-card__name {
    font-family: 'DM Sans', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 8px;
    line-height: 1.3;
  }

  .lib-card__badges { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 10px; }

  .lib-badge {
    font-size: 11px;
    font-weight: 600;
    padding: 3px 10px;
    border-radius: 20px;
    text-transform: capitalize;
  }
  .lib-badge--category {
    background: rgba(75, 71, 206, 0.1);
    color: var(--secondary-purple);
  }
  .lib-badge--priority-high {
    background: rgba(49, 19, 93, 0.1);
    color: var(--primary-purple);
  }
  .lib-badge--priority-medium {
    background: rgba(193, 122, 40, 0.1);
    color: #c17a28;
  }
  .lib-badge--phase {
    background: #f3f4f6;
    color: var(--text-gray);
    font-weight: 500;
  }

  .lib-card__desc {
    font-size: 13px;
    color: var(--text-description);
    line-height: 1.5;
    margin-top: auto;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* ── No Results ── */
  .lib-empty {
    grid-column: 1 / -1;
    text-align: center;
    padding: 64px 32px;
    color: var(--text-gray);
    font-size: 15px;
    display: none;
  }
  .lib-empty.visible { display: block; }

  /* ── Modal ── */
  .lib-modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 9999;
    align-items: center;
    justify-content: center;
    padding: 24px;
  }
  .lib-modal-overlay.open { display: flex; }

  .lib-modal {
    background: var(--bg-white);
    border-radius: var(--rounded-2xl);
    max-width: 860px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 16px 48px rgba(49, 19, 93, 0.2);
  }

  .lib-modal__preview-wrap {
    background: var(--bg-off-white);
    padding: 24px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 340px;
  }
  .lib-modal__preview {
    width: 100%;
    max-width: 640px;
    height: 380px;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    background: #fff;
  }

  .lib-modal__content { padding: 28px 32px 32px; }

  .lib-modal__header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 16px; }

  .lib-modal__name {
    font-family: 'DM Sans', sans-serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--text-dark);
    line-height: 1.3;
  }

  .lib-modal__close {
    width: 36px;
    height: 36px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--bg-white);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-left: 16px;
    transition: background 0.15s;
  }
  .lib-modal__close:hover { background: #f3f4f6; }
  .lib-modal__close svg { width: 18px; height: 18px; stroke: var(--text-gray); fill: none; stroke-width: 2; }

  .lib-modal__badges { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 20px; }

  .lib-modal__desc {
    font-size: 14px;
    color: var(--text-description);
    line-height: 1.6;
    margin-bottom: 24px;
  }

  .lib-modal__section-title {
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--primary-purple);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 10px;
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
  }

  .lib-modal__problem {
    font-size: 14px;
    color: var(--text-description);
    line-height: 1.6;
    margin-bottom: 20px;
  }

  .lib-modal__spec-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 20px;
  }
  .lib-modal__spec-item { }
  .lib-modal__spec-label {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.4px;
    color: var(--text-gray);
    margin-bottom: 4px;
  }
  .lib-modal__spec-value {
    font-size: 13px;
    color: var(--text-dark);
    line-height: 1.4;
  }

  .lib-modal__copy-list {
    list-style: none;
    padding: 0;
  }
  .lib-modal__copy-list li {
    font-size: 13px;
    color: var(--text-description);
    padding: 4px 0;
    display: flex;
    gap: 8px;
  }
  .lib-modal__copy-list li strong {
    color: var(--text-dark);
    min-width: 100px;
    flex-shrink: 0;
  }

  .lib-modal__dont-list {
    list-style: none;
    padding: 0;
  }
  .lib-modal__dont-list li {
    font-size: 13px;
    color: #b91c1c;
    padding: 3px 0 3px 20px;
    position: relative;
  }
  .lib-modal__dont-list li::before {
    content: '\00d7';
    position: absolute;
    left: 0;
    font-weight: 700;
    font-size: 16px;
    line-height: 1.3;
  }

  /* ── Responsive ── */
  @media (max-width: 768px) {
    .lib-header { padding: 32px 20px; }
    .lib-header__title { font-size: 24px; }
    .lib-toolbar { padding: 20px 20px 0; }
    .lib-grid { padding: 20px 20px 48px; grid-template-columns: 1fr; }
    .lib-modal__spec-grid { grid-template-columns: 1fr; }
    .lib-modal__content { padding: 20px; }
  }
</style>
</head>
<body>

<!-- ── Header ── -->
<header class="lib-header">
  <div class="lib-header__inner">
    <h1 class="lib-header__title">UI Elements Library</h1>
    <p class="lib-header__meta">Run 2026-02-19_1830 &middot; Host Journey &middot; 7 elements &middot; 33 principles</p>
    <p class="lib-header__lens">Lens: Freud, Civilization and Its Discontents (Ch III &amp; V) &mdash; Sources of Unhappiness + Individual Instinct vs Civilization's Demands</p>
  </div>
</header>

<!-- ── Toolbar ── -->
<div class="lib-toolbar">
  <input type="text" class="lib-search" id="searchInput" placeholder="Search elements by name...">
  <div class="lib-filters" id="filtersBar">
    <div class="lib-filters__group">
      <span class="lib-filters__label">Category</span>
      <button class="lib-filter-btn active" data-filter="category" data-value="all">All</button>
      <button class="lib-filter-btn" data-filter="category" data-value="card">Card</button>
      <button class="lib-filter-btn" data-filter="category" data-value="dashboard">Dashboard</button>
      <button class="lib-filter-btn" data-filter="category" data-value="modal">Modal</button>
    </div>
    <div class="lib-filters__sep"></div>
    <div class="lib-filters__group">
      <span class="lib-filters__label">Priority</span>
      <button class="lib-filter-btn active" data-filter="priority" data-value="all">All</button>
      <button class="lib-filter-btn" data-filter="priority" data-value="high">High</button>
      <button class="lib-filter-btn" data-filter="priority" data-value="medium">Medium</button>
    </div>
    <div class="lib-filters__sep"></div>
    <div class="lib-filters__group">
      <span class="lib-filters__label">Phase</span>
      <button class="lib-filter-btn active" data-filter="phase" data-value="all">All</button>
      <button class="lib-filter-btn" data-filter="phase" data-value="discovery">Discovery</button>
      <button class="lib-filter-btn" data-filter="phase" data-value="evaluation">Evaluation</button>
      <button class="lib-filter-btn" data-filter="phase" data-value="listing_creation">Listing Creation</button>
      <button class="lib-filter-btn" data-filter="phase" data-value="pricing">Pricing</button>
      <button class="lib-filter-btn" data-filter="phase" data-value="proposal_mgmt">Proposal Mgmt</button>
      <button class="lib-filter-btn" data-filter="phase" data-value="active_lease">Active Lease</button>
      <button class="lib-filter-btn" data-filter="phase" data-value="retention">Retention</button>
    </div>
  </div>
</div>

<!-- ── Grid ── -->
<div class="lib-grid" id="elementsGrid">
  <p class="lib-empty" id="emptyState">No elements match your filters.</p>
</div>

<!-- ── Modal ── -->
<div class="lib-modal-overlay" id="modalOverlay">
  <div class="lib-modal" id="modalContent"></div>
</div>

<script>
// ── Element Data ──
const ELEMENTS = [
  {
    id: "ds-ui-1830-001",
    name: "Discovery Earnings Estimator Card",
    category: "card",
    priority: "high",
    phases: ["discovery", "evaluation"],
    description: "A self-contained earnings card shown to prospective hosts before any registration or sign-up is required. It surfaces local market demand, average host earnings, and guest search volume -- all without asking the host for a single piece of information. Freud\u2019s insight that premature civilizational demands trigger instinctual revolt informs the zero-ask design: the host sees value before the platform asks for anything.",
    problem: "Hosts in discovery bounce when the platform demands registration before demonstrating value. Freud identifies this as premature civilizational demand that violates the pleasure principle. This card delivers concrete local earnings data, demand signals, and satisfaction proof without asking for a single piece of information -- protecting the host\u2019s pre-civilizational curiosity and making the first contact feel generous rather than extractive.",
    effort: "medium",
    source_elements: ["works-001", "communicates-001", "looks-001", "behaves-003", "feels-001"],
    visual_spec: {
      layout: "Single card, max-width 480px, centered. Top section: headline earnings figure. Middle section: three supporting metrics in a horizontal row. Bottom section: soft CTA text link, no button.",
      background: "rgb(252, 250, 255)",
      border_radius: "12px",
      earnings_color: "#31135D (brand authority)",
      metric_icons: "rgb(109, 49, 194)"
    },
    copy_spec: {
      headline: "$3,200/mo",
      subhead: "Average host earnings in your area",
      cta: "See how your space compares"
    },
    copy_donts: [
      "Never use urgency language ('Limited spots!', 'Sign up now!')",
      "Never ask a question before giving an answer",
      "Never frame the host\u2019s current situation as a problem"
    ],
    html_css: "<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');.sl-discovery-card{font-family:'Inter',sans-serif;max-width:480px;margin:0 auto;background:rgb(252,250,255);border:1px solid #e5e7eb;border-radius:12px;padding:32px;box-shadow:0 2px 4px rgba(49,19,93,0.2)}.sl-discovery-card__headline{font-family:'DM Sans',sans-serif;font-size:36px;font-weight:700;color:#31135D;margin:0 0 4px 0;line-height:1.2}.sl-discovery-card__subhead{font-size:14px;font-weight:400;color:#374151;margin:0 0 24px 0;line-height:1.5}.sl-discovery-card__metrics{display:flex;gap:16px;margin-bottom:24px}.sl-discovery-card__metric{flex:1;text-align:center;padding:12px 8px;background:#fff;border-radius:8px;border:1px solid #f3f4f6}.sl-discovery-card__metric-icon{width:24px;height:24px;margin:0 auto 8px;color:rgb(109,49,194)}.sl-discovery-card__metric-icon svg{width:24px;height:24px;stroke:rgb(109,49,194);fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}.sl-discovery-card__metric-value{font-size:14px;font-weight:600;color:#1a1a1a;margin:0 0 2px 0}.sl-discovery-card__metric-label{font-size:12px;font-weight:400;color:#6b7280;margin:0}.sl-discovery-card__body{font-size:14px;color:#374151;line-height:1.5;margin:0 0 20px 0}.sl-discovery-card__cta{font-size:14px;font-weight:600;color:rgb(109,49,194);text-decoration:none;display:inline-flex;align-items:center;gap:6px;transition:text-decoration 0.2s ease}.sl-discovery-card__cta:hover{text-decoration:underline}.sl-discovery-card__cta svg{width:16px;height:16px;stroke:rgb(109,49,194);fill:none;stroke-width:2}</style><div class=\"sl-discovery-card\"><h2 class=\"sl-discovery-card__headline\">$3,200/mo</h2><p class=\"sl-discovery-card__subhead\">Average host earnings in your area</p><div class=\"sl-discovery-card__metrics\"><div class=\"sl-discovery-card__metric\"><div class=\"sl-discovery-card__metric-icon\"><svg viewBox=\"0 0 24 24\"><path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"/><circle cx=\"9\" cy=\"7\" r=\"4\"/><path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"/><path d=\"M16 3.13a4 4 0 0 1 0 7.75\"/></svg></div><p class=\"sl-discovery-card__metric-value\">47 professionals</p><p class=\"sl-discovery-card__metric-label\">Active searches</p></div><div class=\"sl-discovery-card__metric\"><div class=\"sl-discovery-card__metric-icon\"><svg viewBox=\"0 0 24 24\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"/><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"/><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"/></svg></div><p class=\"sl-discovery-card__metric-value\">12 weeks</p><p class=\"sl-discovery-card__metric-label\">Avg. stay length</p></div><div class=\"sl-discovery-card__metric\"><div class=\"sl-discovery-card__metric-icon\"><svg viewBox=\"0 0 24 24\"><polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\"/></svg></div><p class=\"sl-discovery-card__metric-value\">4.8 / 5</p><p class=\"sl-discovery-card__metric-label\">Host satisfaction</p></div></div><p class=\"sl-discovery-card__body\">Vetted professionals in your neighborhood are looking for weekday spaces. See what your place could earn -- no sign-up required.</p><a href=\"#\" class=\"sl-discovery-card__cta\">See how your space compares <svg viewBox=\"0 0 24 24\"><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/><polyline points=\"12 5 19 12 12 19\"/></svg></a></div>"
  },
  {
    id: "ds-ui-1830-002",
    name: "Listing Wizard Progress Card with Auto-Save",
    category: "card",
    priority: "high",
    phases: ["listing_creation", "pricing"],
    description: "A dashboard card that shows the host\u2019s listing creation progress with a visual completion bar, step-by-step status, and one-click resume or pause controls. This card embodies Freud\u2019s insight that listing creation is the peak of instinctual renunciation -- converting private space into public artifact. The auto-save indicator reassures the host that every keystroke is preserved.",
    problem: "Hosts abandon the listing wizard at the peak of instinctual renunciation because their investment is not visibly preserved and there is no dignified exit. Freud warns that \u2018if the deprivation is not made good economically, one may be certain of producing serious disorders.\u2019 This card makes every step\u2019s progress visible and saved, provides a frictionless pause, and frames completion as building an achievement rather than filling out a form.",
    effort: "medium",
    source_elements: ["works-001", "works-002", "communicates-001", "looks-001", "looks-003", "looks-004", "behaves-002", "behaves-005", "feels-003"],
    visual_spec: {
      layout: "Card with 16px padding. Top row: listing name + auto-save indicator. Progress bar below. Step checklist with icons. Bottom row: Resume CTA + Pause text link.",
      background: "#ffffff",
      border_radius: "12px",
      progress_fill: "rgb(109, 49, 194)",
      amber_badge: "#c17a28 on #fef3e2"
    },
    copy_spec: {
      headline: "2BR Williamsburg Walk-Up",
      subhead: "4 of 6 steps complete",
      cta: "Continue listing"
    },
    copy_donts: [
      "Never say 'Your listing is only X% complete' -- frame progress positively",
      "Never use bare imperatives ('Upload photos', 'Set your price')",
      "Never treat the wizard as a form -- each step is a dignified exchange"
    ],
    html_css: "<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');.sl-wizard-card{font-family:'Inter',sans-serif;max-width:480px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:24px;box-shadow:0 2px 4px rgba(49,19,93,0.2)}.sl-wizard-card__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.sl-wizard-card__title{font-family:'DM Sans',sans-serif;font-size:18px;font-weight:700;color:#1a1a1a;margin:0}.sl-wizard-card__save{font-size:12px;font-weight:500;color:#6b7280;display:flex;align-items:center;gap:4px}.sl-wizard-card__save svg{width:14px;height:14px;stroke:#4B47CE;fill:none;stroke-width:2}.sl-wizard-card__encourage{font-size:14px;color:#374151;margin:8px 0 16px 0;line-height:1.5}.sl-wizard-card__progress-bar{height:6px;background:#f3f4f6;border-radius:3px;margin-bottom:4px;overflow:hidden}.sl-wizard-card__progress-fill{height:100%;width:67%;background:rgb(109,49,194);border-radius:3px;transition:width 0.3s ease-out}.sl-wizard-card__progress-text{font-size:14px;font-weight:600;color:#31135D;margin:0 0 16px 0}.sl-wizard-card__steps{list-style:none;padding:0;margin:0 0 20px 0}.sl-wizard-card__step{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151}.sl-wizard-card__step:last-child{border-bottom:none}.sl-wizard-card__step-icon{width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.sl-wizard-card__step-icon--done{background:#4B47CE}.sl-wizard-card__step-icon--done svg{width:12px;height:12px;stroke:#fff;fill:none;stroke-width:2.5}.sl-wizard-card__step-icon--current{background:#fef3e2;border:2px solid #c17a28}.sl-wizard-card__step-icon--pending{background:#f3f4f6}.sl-wizard-card__step--current .sl-wizard-card__step-label{font-weight:600;color:#1a1a1a}.sl-wizard-card__actions{display:flex;align-items:center;justify-content:space-between}.sl-wizard-card__resume{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,#4B47CE 0%,#7C3AED 100%);color:#fff;border:none;border-radius:8px;padding:10px 20px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;transition:opacity 0.2s ease}.sl-wizard-card__resume:hover{opacity:0.9}.sl-wizard-card__pause{font-size:13px;font-weight:500;color:#6b7280;background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif;transition:text-decoration 0.2s ease}.sl-wizard-card__pause:hover{text-decoration:underline}</style><div class=\"sl-wizard-card\"><div class=\"sl-wizard-card__header\"><h3 class=\"sl-wizard-card__title\">2BR Williamsburg Walk-Up</h3><span class=\"sl-wizard-card__save\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg> Saved just now</span></div><p class=\"sl-wizard-card__encourage\">Your space is looking great. Two more steps to publish.</p><div class=\"sl-wizard-card__progress-bar\"><div class=\"sl-wizard-card__progress-fill\"></div></div><p class=\"sl-wizard-card__progress-text\">4 of 6 steps complete</p><ul class=\"sl-wizard-card__steps\"><li class=\"sl-wizard-card__step\"><span class=\"sl-wizard-card__step-icon sl-wizard-card__step-icon--done\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg></span><span class=\"sl-wizard-card__step-label\">Space details</span></li><li class=\"sl-wizard-card__step\"><span class=\"sl-wizard-card__step-icon sl-wizard-card__step-icon--done\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg></span><span class=\"sl-wizard-card__step-label\">Features & amenities</span></li><li class=\"sl-wizard-card__step\"><span class=\"sl-wizard-card__step-icon sl-wizard-card__step-icon--done\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg></span><span class=\"sl-wizard-card__step-label\">Lease style</span></li><li class=\"sl-wizard-card__step\"><span class=\"sl-wizard-card__step-icon sl-wizard-card__step-icon--done\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg></span><span class=\"sl-wizard-card__step-label\">Pricing</span></li><li class=\"sl-wizard-card__step sl-wizard-card__step--current\"><span class=\"sl-wizard-card__step-icon sl-wizard-card__step-icon--current\"></span><span class=\"sl-wizard-card__step-label\">House rules</span></li><li class=\"sl-wizard-card__step\"><span class=\"sl-wizard-card__step-icon sl-wizard-card__step-icon--pending\"></span><span class=\"sl-wizard-card__step-label\">Photos</span></li></ul><div class=\"sl-wizard-card__actions\"><button class=\"sl-wizard-card__resume\">Continue listing <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" stroke=\"#fff\" fill=\"none\" stroke-width=\"2\"><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/><polyline points=\"12 5 19 12 12 19\"/></svg></button><button class=\"sl-wizard-card__pause\">Pause this listing</button></div></div>"
  },
  {
    id: "ds-ui-1830-003",
    name: "Host Dashboard Urgency-First Action Panel",
    category: "dashboard",
    priority: "high",
    phases: ["listing_creation", "proposal_mgmt", "active_lease", "retention"],
    description: "The top section of the host dashboard that surfaces action-required items with amber urgency indicators, structured as Freud\u2019s civilizational order -- predictable, fixed-position, and anxiety-reducing. This panel implements urgency-first dashboard hierarchy, ritual visual cadence, and amber-not-red urgency system.",
    problem: "Hosts waste mental energy scanning a disordered dashboard to find what needs their attention. Freud identifies order as \u2018a kind of repetition-compulsion by which doubt and hesitation shall be avoided.\u2019 This fixed-position panel surfaces urgent items first, every visit, in the same place, using warm amber signals that motivate action without triggering the alarm response that red would produce.",
    effort: "medium",
    source_elements: ["works-004", "works-006", "communicates-004", "looks-004", "looks-005", "behaves-004", "feels-005"],
    visual_spec: {
      layout: "Full-width panel at the top of the dashboard. Up to 5 action items in a vertical stack. Each item: icon + description + deadline + primary action button.",
      background: "#ffffff",
      border_radius: "0 (full-width panel)",
      urgency_badge: "#c17a28 on #fef3e2",
      action_link: "rgb(109, 49, 194)"
    },
    copy_spec: {
      headline: "Needs your attention",
      subhead: "Action-required items sorted by urgency",
      cta: "Review / Continue"
    },
    copy_donts: [
      "Never use red badges for routine attention items -- only for errors",
      "Never mix informational items into the action panel",
      "Never change the panel\u2019s position on the page across visits"
    ],
    html_css: "<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');.sl-action-panel{font-family:'Inter',sans-serif;max-width:640px;background:#fff;padding:24px;border-bottom:1px solid #e5e7eb}.sl-action-panel__heading{font-family:'DM Sans',sans-serif;font-size:18px;font-weight:700;color:#1a1a1a;margin:0 0 16px 0}.sl-action-panel__list{list-style:none;padding:0;margin:0}.sl-action-panel__item{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:8px;transition:background 0.15s ease;cursor:pointer;margin-bottom:4px}.sl-action-panel__item:hover{background:#f9fafb}.sl-action-panel__item-icon{width:36px;height:36px;border-radius:50%;background:#fef3e2;display:flex;align-items:center;justify-content:center;flex-shrink:0}.sl-action-panel__item-icon svg{width:18px;height:18px;stroke:#c17a28;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}.sl-action-panel__item-content{flex:1;min-width:0}.sl-action-panel__item-desc{font-size:14px;font-weight:500;color:#1a1a1a;margin:0 0 2px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sl-action-panel__item-deadline{font-size:12px;font-weight:600;color:#c17a28;margin:0}.sl-action-panel__item-action{font-size:13px;font-weight:600;color:rgb(109,49,194);background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif;white-space:nowrap;padding:6px 12px;border-radius:6px;transition:background 0.15s ease}.sl-action-panel__item-action:hover{background:rgb(252,250,255)}</style><div class=\"sl-action-panel\"><h2 class=\"sl-action-panel__heading\">Needs your attention</h2><ul class=\"sl-action-panel__list\"><li class=\"sl-action-panel__item\"><div class=\"sl-action-panel__item-icon\"><svg viewBox=\"0 0 24 24\"><path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"/></svg></div><div class=\"sl-action-panel__item-content\"><p class=\"sl-action-panel__item-desc\">New proposal from Sarah Chen</p><p class=\"sl-action-panel__item-deadline\">Respond by Feb 21</p></div><button class=\"sl-action-panel__item-action\">Review</button></li><li class=\"sl-action-panel__item\"><div class=\"sl-action-panel__item-icon\"><svg viewBox=\"0 0 24 24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/><line x1=\"9\" y1=\"3\" x2=\"9\" y2=\"21\"/></svg></div><div class=\"sl-action-panel__item-content\"><p class=\"sl-action-panel__item-desc\">2BR Williamsburg listing is 67% complete</p><p class=\"sl-action-panel__item-deadline\">2 steps remaining</p></div><button class=\"sl-action-panel__item-action\">Continue</button></li><li class=\"sl-action-panel__item\"><div class=\"sl-action-panel__item-icon\"><svg viewBox=\"0 0 24 24\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"/><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"/><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"/></svg></div><div class=\"sl-action-panel__item-content\"><p class=\"sl-action-panel__item-desc\">Date change request from Marcus</p><p class=\"sl-action-panel__item-deadline\">Awaiting your approval</p></div><button class=\"sl-action-panel__item-action\">Review</button></li></ul></div>"
  },
  {
    id: "ds-ui-1830-004",
    name: "Proposal Review Card with Trust-First Architecture",
    category: "card",
    priority: "high",
    phases: ["proposal_mgmt"],
    description: "A proposal card that resolves the host\u2019s stranger-threat anxiety by placing guest trust signals (verification, lease history, review rating, stated purpose) above proposal terms (dates, pricing, duration). Freud\u2019s Ch V insight that \u2018men are not gentle, friendly creatures\u2019 informs the architecture: the host\u2019s instinctual distrust of the stranger must be resolved before they can rationally evaluate terms.",
    problem: "Hosts freeze or decline proposals because they encounter financial terms before resolving the fundamental question: is this stranger safe? Freud identifies that \u2018men are not gentle, friendly creatures\u2019 and the host\u2019s instinct defaults to distrust when trust evidence is buried. This card places verification status, lease history, rating, and stated purpose above all terms, resolving the stranger-threat question within 3 seconds.",
    effort: "high",
    source_elements: ["works-003", "communicates-002", "communicates-003", "looks-002", "looks-003", "looks-007", "behaves-001", "behaves-006", "feels-004"],
    visual_spec: {
      layout: "Card divided into three zones: Trust Zone (top, purple-tinted), Terms Zone (middle, white), Action Zone (bottom). Max-width 520px.",
      background: "Trust: rgb(252, 250, 255). Terms/Actions: #ffffff.",
      border_radius: "12px",
      verification_badge: "#31135D background, white checkmark",
      accept_button: "linear-gradient(135deg, #4B47CE, #7C3AED)"
    },
    copy_spec: {
      headline: "Sarah Chen",
      subhead: "Verified \u00b7 3 completed leases \u00b7 4.9 avg",
      cta: "Accept proposal"
    },
    copy_donts: [
      "Never lead with financial terms before trust evidence",
      "Never use urgency language that pressures acceptance",
      "Never label decline as 'Reject' -- use 'Decline'"
    ],
    html_css: "<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');.sl-proposal-card{font-family:'Inter',sans-serif;max-width:520px;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px rgba(49,19,93,0.2)}.sl-proposal-trust{background:rgb(252,250,255);padding:20px 24px}.sl-proposal-trust__header{display:flex;align-items:center;gap:14px;margin-bottom:14px}.sl-proposal-trust__avatar{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#31135D 0%,#5a2d8f 100%);display:flex;align-items:center;justify-content:center;color:#fff;font-family:'DM Sans',sans-serif;font-size:18px;font-weight:700;flex-shrink:0}.sl-proposal-trust__name-group{flex:1}.sl-proposal-trust__name{font-family:'DM Sans',sans-serif;font-size:20px;font-weight:700;color:#1a1a1a;margin:0}.sl-proposal-trust__badge{display:inline-flex;align-items:center;gap:4px;background:#31135D;color:#fff;font-size:11px;font-weight:600;padding:2px 8px;border-radius:10px;margin-top:4px}.sl-proposal-trust__badge svg{width:12px;height:12px;stroke:#fff;fill:none;stroke-width:2.5}.sl-proposal-trust__metrics{display:flex;gap:16px;margin-bottom:14px}.sl-proposal-trust__metric{text-align:center}.sl-proposal-trust__metric-val{font-size:13px;font-weight:600;color:#31135D;margin:0}.sl-proposal-trust__metric-label{font-size:12px;color:#6b7280;margin:0}.sl-proposal-trust__purpose{font-size:14px;color:#374151;line-height:1.5;margin:0;padding-top:12px;border-top:1px solid #e5e7eb}.sl-proposal-terms{background:#fff;padding:20px 24px;display:flex;gap:20px}.sl-proposal-terms__item{flex:1}.sl-proposal-terms__label{font-size:12px;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:0.5px;margin:0 0 4px 0}.sl-proposal-terms__value{font-size:16px;font-weight:600;color:#1a1a1a;margin:0}.sl-proposal-actions{background:#fff;padding:16px 24px;border-top:1px solid #f3f4f6;display:flex;align-items:center;gap:12px}.sl-proposal-actions__accept{background:linear-gradient(135deg,#4B47CE 0%,#7C3AED 100%);color:#fff;border:none;border-radius:8px;padding:10px 24px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;transition:opacity 0.2s ease}.sl-proposal-actions__accept:hover{opacity:0.9}.sl-proposal-actions__counter{font-size:14px;font-weight:500;color:rgb(109,49,194);background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif}.sl-proposal-actions__counter:hover{text-decoration:underline}.sl-proposal-actions__decline{font-size:14px;font-weight:500;color:#6b7280;background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif;margin-left:auto}.sl-proposal-actions__decline:hover{text-decoration:underline}</style><div class=\"sl-proposal-card\"><div class=\"sl-proposal-trust\"><div class=\"sl-proposal-trust__header\"><div class=\"sl-proposal-trust__avatar\">SC</div><div class=\"sl-proposal-trust__name-group\"><h3 class=\"sl-proposal-trust__name\">Sarah Chen</h3><span class=\"sl-proposal-trust__badge\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg> Verified</span></div></div><div class=\"sl-proposal-trust__metrics\"><div class=\"sl-proposal-trust__metric\"><p class=\"sl-proposal-trust__metric-val\">3 leases</p><p class=\"sl-proposal-trust__metric-label\">Completed</p></div><div class=\"sl-proposal-trust__metric\"><p class=\"sl-proposal-trust__metric-val\">4.9</p><p class=\"sl-proposal-trust__metric-label\">Avg rating</p></div><div class=\"sl-proposal-trust__metric\"><p class=\"sl-proposal-trust__metric-val\">2025</p><p class=\"sl-proposal-trust__metric-label\">Member since</p></div></div><p class=\"sl-proposal-trust__purpose\">Works at Deloitte, needs a weekday space near Midtown for 10 weeks starting March 1.</p></div><div class=\"sl-proposal-terms\"><div class=\"sl-proposal-terms__item\"><p class=\"sl-proposal-terms__label\">Dates</p><p class=\"sl-proposal-terms__value\">Mar 1 -- May 10</p></div><div class=\"sl-proposal-terms__item\"><p class=\"sl-proposal-terms__label\">Duration</p><p class=\"sl-proposal-terms__value\">10 weeks</p></div><div class=\"sl-proposal-terms__item\"><p class=\"sl-proposal-terms__label\">Rate</p><p class=\"sl-proposal-terms__value\">$185/night</p></div></div><div class=\"sl-proposal-actions\"><button class=\"sl-proposal-actions__accept\">Accept proposal</button><button class=\"sl-proposal-actions__counter\">Adjust terms</button><button class=\"sl-proposal-actions__decline\">Decline</button></div></div>"
  },
  {
    id: "ds-ui-1830-005",
    name: "Bidirectional Protection Confirmation Dialog",
    category: "modal",
    priority: "medium",
    phases: ["proposal_mgmt", "active_lease"],
    description: "A warm, purple-tinted confirmation surface that replaces standard modal dialogs at every point where the platform enforces a rule. It leads with a protection headline and shield icon, shows the bidirectional constraint in parallel statements, and offers a single clear action. Freud\u2019s \u2018first requisite of culture is justice\u2019 drives the design.",
    problem: "Hosts experience platform rules as one-sided bureaucratic constraints, developing what Freud calls \u2018antagonism against civilization\u2019 that accumulates toward exit at retention. Standard confirmation dialogs feel like legal notices. This protection dialog leads with a shield icon and \u2018Both parties are protected\u2019 headline, presents reciprocal constraints in visual parallel, and transforms the host\u2019s experience from \u2018I am being controlled\u2019 to \u2018I am being protected.\u2019",
    effort: "low",
    source_elements: ["works-006", "communicates-002", "looks-002", "looks-007", "behaves-006", "feels-006"],
    visual_spec: {
      layout: "Centered surface (max-width 440px) over subtle dark backdrop. Shield icon + headline, two parallel constraint statements, action buttons.",
      background: "#F7F2FA",
      border_radius: "16px",
      shield_icon: "rgb(109, 49, 194)",
      primary_button: "rgb(109, 49, 194)"
    },
    copy_spec: {
      headline: "Both parties are protected",
      subhead: "Mutual constraint, mutual safety",
      cta: "Confirm date change request"
    },
    copy_donts: [
      "Never lead with the restriction ('Date changes require mutual approval')",
      "Never use legal language ('Per the lease agreement...')",
      "Never use punitive framing ('Failure to respond will result in...')",
      "Never use red for the secondary action unless genuinely destructive"
    ],
    html_css: "<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');.sl-protection-overlay{position:relative;background:rgba(0,0,0,0.06);display:flex;align-items:center;justify-content:center;padding:24px;font-family:'Inter',sans-serif;min-height:360px}.sl-protection-dialog{max-width:440px;width:90%;background:#F7F2FA;border:1px solid #e5e7eb;border-radius:16px;padding:28px;box-shadow:0 6px 24px rgba(49,19,93,0.15)}.sl-protection-dialog__header{display:flex;align-items:flex-start;gap:12px;margin-bottom:16px}.sl-protection-dialog__icon{width:40px;height:40px;border-radius:10px;background:rgba(109,49,194,0.12);display:flex;align-items:center;justify-content:center;flex-shrink:0}.sl-protection-dialog__icon svg{width:22px;height:22px;stroke:rgb(109,49,194);fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}.sl-protection-dialog__headline{font-family:'DM Sans',sans-serif;font-size:18px;font-weight:700;color:#31135D;margin:0;padding-top:6px}.sl-protection-dialog__body{margin-bottom:24px}.sl-protection-dialog__statement{font-size:14px;color:#374151;line-height:1.5;margin:0 0 10px 0;padding-left:16px;position:relative}.sl-protection-dialog__statement::before{content:'';position:absolute;left:0;top:7px;width:6px;height:6px;border-radius:50%;background:rgb(109,49,194)}.sl-protection-dialog__summary{font-size:13px;color:#6b7280;margin:14px 0 0 0;font-style:italic}.sl-protection-dialog__actions{display:flex;gap:12px}.sl-protection-dialog__primary{flex:1;background:rgb(109,49,194);color:#fff;border:none;border-radius:8px;padding:11px 20px;font-size:14px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;transition:opacity 0.2s ease}.sl-protection-dialog__primary:hover{opacity:0.9}.sl-protection-dialog__secondary{background:transparent;color:#374151;border:1px solid #e5e7eb;border-radius:8px;padding:11px 20px;font-size:14px;font-weight:500;font-family:'Inter',sans-serif;cursor:pointer;transition:background 0.15s ease}.sl-protection-dialog__secondary:hover{background:rgba(255,255,255,0.5)}</style><div class=\"sl-protection-overlay\"><div class=\"sl-protection-dialog\" role=\"dialog\" aria-labelledby=\"protectionHeadline\"><div class=\"sl-protection-dialog__header\"><div class=\"sl-protection-dialog__icon\"><svg viewBox=\"0 0 24 24\"><path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"/></svg></div><h2 class=\"sl-protection-dialog__headline\" id=\"protectionHeadline\">Both parties are protected</h2></div><div class=\"sl-protection-dialog__body\"><p class=\"sl-protection-dialog__statement\">Sarah cannot change your agreed schedule without your approval.</p><p class=\"sl-protection-dialog__statement\">You also cannot change the schedule without Sarah's agreement.</p><p class=\"sl-protection-dialog__summary\">This keeps things fair for both of you.</p></div><div class=\"sl-protection-dialog__actions\"><button class=\"sl-protection-dialog__primary\">Confirm date change request</button><button class=\"sl-protection-dialog__secondary\">Cancel</button></div></div></div>"
  },
  {
    id: "ds-ui-1830-006",
    name: "Stay Cycle Ritual Card",
    category: "card",
    priority: "high",
    phases: ["active_lease"],
    description: "A per-stay card within the Stays Manager that tracks the three-beat ritual cadence: arrival confirmation, cleaning photo submission, and micro-review. Freud identifies \u2018order as a kind of repetition-compulsion by which doubt and hesitation shall be avoided\u2019 -- this card is that order made concrete.",
    problem: "During the active lease, hosts experience recurring anxiety about whether the stranger in their space is respecting the arrangement. Information voids between stays fill with worry. Freud\u2019s order principle prescribes predictable rituals. This card provides three structured beats (arrival, cleaning, review) in an identical layout every cycle, giving the host regular evidence that the civilizational contract is holding.",
    effort: "high",
    source_elements: ["works-004", "communicates-005", "looks-005", "looks-001", "behaves-004", "feels-005"],
    visual_spec: {
      layout: "Card with fixed internal grid: Top row (guest avatar + dates + status badge), middle (2x2 cleaning photo grid), bottom (micro-review prompt or summary). Max-width 480px.",
      background: "rgb(252, 250, 255)",
      border_radius: "12px",
      status_badge: "#4B47CE background, white text",
      beat_complete: "#4B47CE check icon"
    },
    copy_spec: {
      headline: "Stay 8 of 10",
      subhead: "Feb 17 -- Feb 20 \u00b7 Sarah Chen",
      cta: "How was this stay?"
    },
    copy_donts: [
      "Never over-celebrate routine compliance ('Amazing! Photos submitted!')",
      "Never alarm on delayed rituals ('WARNING: Photos not received!')",
      "Never change the card layout between stays"
    ],
    html_css: "<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');.sl-ritual-card{font-family:'Inter',sans-serif;max-width:480px;background:rgb(252,250,255);border:1px solid #e5e7eb;border-radius:12px;padding:20px;box-shadow:0 2px 4px rgba(49,19,93,0.2)}.sl-ritual-card__header{display:flex;align-items:center;gap:12px;margin-bottom:16px}.sl-ritual-card__avatar{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#31135D 0%,#5a2d8f 100%);display:flex;align-items:center;justify-content:center;color:#fff;font-family:'DM Sans',sans-serif;font-size:15px;font-weight:700;flex-shrink:0}.sl-ritual-card__info{flex:1}.sl-ritual-card__stay-label{font-size:14px;font-weight:600;color:#1a1a1a;margin:0}.sl-ritual-card__dates{font-size:13px;color:#374151;margin:2px 0 0 0}.sl-ritual-card__status{font-size:12px;font-weight:600;color:#fff;background:#4B47CE;padding:4px 10px;border-radius:10px;white-space:nowrap}.sl-ritual-card__beats{display:flex;gap:8px;margin-bottom:16px}.sl-ritual-card__beat{flex:1;display:flex;align-items:center;gap:6px;padding:8px 10px;background:#fff;border-radius:8px;border:1px solid #f3f4f6}.sl-ritual-card__beat-icon{width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.sl-ritual-card__beat-icon--done{background:#4B47CE}.sl-ritual-card__beat-icon--done svg{width:11px;height:11px;stroke:#fff;fill:none;stroke-width:2.5}.sl-ritual-card__beat-icon--pending{background:#f3f4f6}.sl-ritual-card__beat-label{font-size:11px;color:#374151;line-height:1.3}.sl-ritual-card__photos{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:16px}.sl-ritual-card__photo{aspect-ratio:4/3;border-radius:8px;overflow:hidden;background:#f3f4f6;position:relative;cursor:pointer;transition:transform 0.15s ease,box-shadow 0.15s ease}.sl-ritual-card__photo:hover{transform:scale(1.02);box-shadow:0 2px 8px rgba(0,0,0,0.08)}.sl-ritual-card__photo img{width:100%;height:100%;object-fit:cover}.sl-ritual-card__summary{display:flex;align-items:center;gap:8px;padding:12px;background:#fff;border-radius:8px;border:1px solid #f3f4f6}.sl-ritual-card__summary-icon svg{width:18px;height:18px;stroke:#4B47CE;fill:none;stroke-width:2}.sl-ritual-card__summary-text{font-size:13px;color:#374151;margin:0}</style><div class=\"sl-ritual-card\"><div class=\"sl-ritual-card__header\"><div class=\"sl-ritual-card__avatar\">SC</div><div class=\"sl-ritual-card__info\"><p class=\"sl-ritual-card__stay-label\">Stay 8 of 10</p><p class=\"sl-ritual-card__dates\">Feb 17 -- Feb 20 &middot; Sarah Chen</p></div><span class=\"sl-ritual-card__status\">Cleaning Submitted</span></div><div class=\"sl-ritual-card__beats\"><div class=\"sl-ritual-card__beat\"><span class=\"sl-ritual-card__beat-icon sl-ritual-card__beat-icon--done\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg></span><span class=\"sl-ritual-card__beat-label\">Arrival confirmed</span></div><div class=\"sl-ritual-card__beat\"><span class=\"sl-ritual-card__beat-icon sl-ritual-card__beat-icon--done\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg></span><span class=\"sl-ritual-card__beat-label\">Cleaning photos</span></div><div class=\"sl-ritual-card__beat\"><span class=\"sl-ritual-card__beat-icon sl-ritual-card__beat-icon--pending\"></span><span class=\"sl-ritual-card__beat-label\">Review</span></div></div><div class=\"sl-ritual-card__photos\"><div class=\"sl-ritual-card__photo\" style=\"background:linear-gradient(135deg,#e8e4f0,#f0ecf5)\"></div><div class=\"sl-ritual-card__photo\" style=\"background:linear-gradient(135deg,#ece8f2,#f2eef7)\"></div><div class=\"sl-ritual-card__photo\" style=\"background:linear-gradient(135deg,#e6e2ee,#eeeaf4)\"></div><div class=\"sl-ritual-card__photo\" style=\"background:linear-gradient(135deg,#eae6f0,#f0ecf5)\"></div></div><div class=\"sl-ritual-card__summary\"><span class=\"sl-ritual-card__summary-icon\"><svg viewBox=\"0 0 24 24\"><polyline points=\"20 6 9 17 4 12\"/></svg></span><p class=\"sl-ritual-card__summary-text\">Cleaning photos submitted. Your space looks great.</p></div></div>"
  },
  {
    id: "ds-ui-1830-007",
    name: "Hosting Summary and Retention Continuation Card",
    category: "card",
    priority: "high",
    phases: ["retention"],
    description: "A celebration card that appears 24 hours after the final stay of a lease, presenting the host\u2019s cumulative hosting record before offering a one-action continuation path. Freud\u2019s \u2018narcissism of minor differences\u2019 predicts that the host\u2019s retrospective assessment will anchor on small grievances unless counteracted by visible cumulative evidence.",
    problem: "At retention, hosts perform a retrospective cost-benefit analysis where Freud\u2019s \u2018narcissism of minor differences\u2019 anchors on small grievances rather than cumulative benefits. Without a visible counter-narrative, the host remembers the one bad week instead of the $12,400 earned. This card presents cumulative evidence at hero scale before any re-listing prompt, frames continuation as a one-tap action (not a restart).",
    effort: "medium",
    source_elements: ["works-005", "communicates-006", "looks-006", "looks-003", "behaves-007", "feels-007"],
    visual_spec: {
      layout: "Card with generous padding. Hero earnings figure at top. Three supporting metrics. Hosting timeline bar. Continue Hosting CTA. Max-width 520px.",
      background: "rgb(252, 250, 255)",
      border_radius: "16px",
      hero_earnings: "#31135D at 36px",
      cta_button: "linear-gradient(135deg, #4B47CE, #7C3AED)"
    },
    copy_spec: {
      headline: "$12,400",
      subhead: "Total earned since you started hosting",
      cta: "Continue Hosting"
    },
    copy_donts: [
      "Never present re-listing as a new decision ('Ready to host again?')",
      "Never surface negative data in the retention summary",
      "Never introduce new demands at the retention moment ('Update your photos first')",
      "Never use urgency language ('Don\u2019t lose your hosting streak!')"
    ],
    html_css: "<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap');.sl-retention-card{font-family:'Inter',sans-serif;max-width:520px;background:rgb(252,250,255);border:1px solid #e5e7eb;border-radius:16px;padding:32px;box-shadow:0 2px 4px rgba(49,19,93,0.2)}.sl-retention-card__congrats{font-size:14px;color:#374151;margin:0 0 8px 0}.sl-retention-card__hero{font-family:'DM Sans',sans-serif;font-size:36px;font-weight:700;color:#31135D;margin:0;line-height:1.2}.sl-retention-card__hero-label{font-size:14px;color:#6b7280;margin:4px 0 24px 0}.sl-retention-card__metrics{display:flex;gap:24px;margin-bottom:20px}.sl-retention-card__metric{flex:1;text-align:center;padding:16px 8px;background:#fff;border-radius:10px;border:1px solid #f3f4f6}.sl-retention-card__metric-icon{margin:0 auto 8px;width:28px;height:28px}.sl-retention-card__metric-icon svg{width:28px;height:28px;stroke:rgb(109,49,194);fill:none;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round}.sl-retention-card__metric-value{font-size:20px;font-weight:600;color:#1a1a1a;margin:0}.sl-retention-card__metric-label{font-size:12px;color:#6b7280;margin:4px 0 0 0}.sl-retention-card__timeline{height:8px;background:#f3f4f6;border-radius:4px;margin-bottom:8px;overflow:hidden;display:flex;gap:3px}.sl-retention-card__timeline-seg{border-radius:4px;background:rgb(109,49,194)}.sl-retention-card__timeline-seg--1{flex:3;opacity:0.5}.sl-retention-card__timeline-seg--2{flex:4;opacity:0.7}.sl-retention-card__timeline-seg--3{flex:3;opacity:1}.sl-retention-card__timeline-label{font-size:12px;color:#6b7280;margin:0 0 24px 0;text-align:center}.sl-retention-card__actions{display:flex;flex-direction:column;align-items:center;gap:12px}.sl-retention-card__cta{width:100%;background:linear-gradient(135deg,#4B47CE 0%,#7C3AED 100%);color:#fff;border:none;border-radius:10px;padding:14px 28px;font-size:16px;font-weight:600;font-family:'Inter',sans-serif;cursor:pointer;transition:opacity 0.2s ease}.sl-retention-card__cta:hover{opacity:0.9}.sl-retention-card__secondary{font-size:14px;font-weight:500;color:rgb(109,49,194);background:none;border:none;cursor:pointer;font-family:'Inter',sans-serif}.sl-retention-card__secondary:hover{text-decoration:underline}</style><div class=\"sl-retention-card\"><p class=\"sl-retention-card__congrats\">Your 3rd lease is complete.</p><h2 class=\"sl-retention-card__hero\">$12,400</h2><p class=\"sl-retention-card__hero-label\">Total earned since you started hosting</p><div class=\"sl-retention-card__metrics\"><div class=\"sl-retention-card__metric\"><div class=\"sl-retention-card__metric-icon\"><svg viewBox=\"0 0 24 24\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"/><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"/><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"/></svg></div><p class=\"sl-retention-card__metric-value\">28 stays</p><p class=\"sl-retention-card__metric-label\">Successful</p></div><div class=\"sl-retention-card__metric\"><div class=\"sl-retention-card__metric-icon\"><svg viewBox=\"0 0 24 24\"><polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\"/></svg></div><p class=\"sl-retention-card__metric-value\">4.8</p><p class=\"sl-retention-card__metric-label\">Avg rating</p></div><div class=\"sl-retention-card__metric\"><div class=\"sl-retention-card__metric-icon\"><svg viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><polyline points=\"12 6 12 12 16 14\"/></svg></div><p class=\"sl-retention-card__metric-value\">14 mo</p><p class=\"sl-retention-card__metric-label\">Hosting tenure</p></div></div><div class=\"sl-retention-card__timeline\"><div class=\"sl-retention-card__timeline-seg sl-retention-card__timeline-seg--1\"></div><div class=\"sl-retention-card__timeline-seg sl-retention-card__timeline-seg--2\"></div><div class=\"sl-retention-card__timeline-seg sl-retention-card__timeline-seg--3\"></div></div><p class=\"sl-retention-card__timeline-label\">Your hosting journey across 3 leases</p><div class=\"sl-retention-card__actions\"><button class=\"sl-retention-card__cta\">Continue Hosting</button><button class=\"sl-retention-card__secondary\">Review listing details first</button></div></div>"
  }
];

// ── State ──
const state = {
  search: '',
  category: 'all',
  priority: 'all',
  phase: 'all'
};

// ── DOM ──
const grid = document.getElementById('elementsGrid');
const emptyState = document.getElementById('emptyState');
const searchInput = document.getElementById('searchInput');
const filtersBar = document.getElementById('filtersBar');
const modalOverlay = document.getElementById('modalOverlay');
const modalContent = document.getElementById('modalContent');

// ── Render Cards ──
function renderCards() {
  // Remove existing cards (keep empty state)
  grid.querySelectorAll('.lib-card').forEach(c => c.remove());

  let visibleCount = 0;

  ELEMENTS.forEach(el => {
    const card = document.createElement('div');
    card.className = 'lib-card';
    card.dataset.id = el.id;
    card.dataset.category = el.category;
    card.dataset.priority = el.priority;
    card.dataset.phases = el.phases.join(',');
    card.dataset.name = el.name.toLowerCase();

    // Check filters
    const matchSearch = !state.search || el.name.toLowerCase().includes(state.search.toLowerCase());
    const matchCategory = state.category === 'all' || el.category === state.category;
    const matchPriority = state.priority === 'all' || el.priority === state.priority;
    const matchPhase = state.phase === 'all' || el.phases.includes(state.phase);

    if (!matchSearch || !matchCategory || !matchPriority || !matchPhase) {
      card.classList.add('hidden');
    } else {
      visibleCount++;
    }

    // Phase labels
    const phaseLabels = {
      discovery: 'Discovery',
      evaluation: 'Evaluation',
      listing_creation: 'Listing Creation',
      pricing: 'Pricing',
      proposal_mgmt: 'Proposal Mgmt',
      active_lease: 'Active Lease',
      retention: 'Retention'
    };

    // Build card HTML
    const phaseBadges = el.phases.map(p =>
      '<span class="lib-badge lib-badge--phase">' + (phaseLabels[p] || p) + '</span>'
    ).join('');

    card.innerHTML =
      '<iframe class="lib-card__preview" srcdoc="' + escapeAttr(el.html_css) + '" sandbox="allow-same-origin" scrolling="no" loading="lazy"></iframe>' +
      '<div class="lib-card__body">' +
        '<h3 class="lib-card__name">' + escapeHtml(el.name) + '</h3>' +
        '<div class="lib-card__badges">' +
          '<span class="lib-badge lib-badge--category">' + el.category + '</span>' +
          '<span class="lib-badge lib-badge--priority-' + el.priority + '">' + el.priority + ' priority</span>' +
          phaseBadges +
        '</div>' +
        '<p class="lib-card__desc">' + escapeHtml(el.description) + '</p>' +
      '</div>';

    card.addEventListener('click', () => openModal(el));

    grid.insertBefore(card, emptyState);
  });

  emptyState.classList.toggle('visible', visibleCount === 0);
}

function escapeHtml(str) {
  return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
}

function escapeAttr(str) {
  return str.replace(/&/g, '&amp;').replace(/"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
}

// ── Filter logic ──
function applyFilters() {
  grid.querySelectorAll('.lib-card').forEach(card => {
    const name = card.dataset.name;
    const cat = card.dataset.category;
    const pri = card.dataset.priority;
    const phases = card.dataset.phases.split(',');

    const matchSearch = !state.search || name.includes(state.search.toLowerCase());
    const matchCategory = state.category === 'all' || cat === state.category;
    const matchPriority = state.priority === 'all' || pri === state.priority;
    const matchPhase = state.phase === 'all' || phases.includes(state.phase);

    card.classList.toggle('hidden', !(matchSearch && matchCategory && matchPriority && matchPhase));
  });

  const visibleCount = grid.querySelectorAll('.lib-card:not(.hidden)').length;
  emptyState.classList.toggle('visible', visibleCount === 0);
}

searchInput.addEventListener('input', (e) => {
  state.search = e.target.value;
  applyFilters();
});

filtersBar.addEventListener('click', (e) => {
  const btn = e.target.closest('.lib-filter-btn');
  if (!btn) return;

  const filterType = btn.dataset.filter;
  const value = btn.dataset.value;
  state[filterType] = value;

  // Update active states within same group
  btn.closest('.lib-filters__group').querySelectorAll('.lib-filter-btn').forEach(b => {
    b.classList.toggle('active', b.dataset.value === value);
  });

  applyFilters();
});

// ── Modal ──
function openModal(el) {
  const phaseLabels = {
    discovery: 'Discovery',
    evaluation: 'Evaluation',
    listing_creation: 'Listing Creation',
    pricing: 'Pricing',
    proposal_mgmt: 'Proposal Mgmt',
    active_lease: 'Active Lease',
    retention: 'Retention'
  };

  const phaseBadges = el.phases.map(p =>
    '<span class="lib-badge lib-badge--phase">' + (phaseLabels[p] || p) + '</span>'
  ).join('');

  const copyItems = Object.entries(el.copy_spec).map(([k, v]) =>
    '<li><strong>' + escapeHtml(k.replace(/_/g, ' ')) + ':</strong> ' + escapeHtml(String(v)) + '</li>'
  ).join('');

  const dontItems = el.copy_donts.map(d =>
    '<li>' + escapeHtml(d) + '</li>'
  ).join('');

  const sourceEls = el.source_elements.map(s =>
    '<span class="lib-badge lib-badge--phase">' + s + '</span>'
  ).join(' ');

  modalContent.innerHTML =
    '<div class="lib-modal__preview-wrap">' +
      '<iframe class="lib-modal__preview" srcdoc="' + escapeAttr(el.html_css) + '" sandbox="allow-same-origin"></iframe>' +
    '</div>' +
    '<div class="lib-modal__content">' +
      '<div class="lib-modal__header">' +
        '<h2 class="lib-modal__name">' + escapeHtml(el.name) + '</h2>' +
        '<button class="lib-modal__close" id="modalClose"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>' +
      '</div>' +
      '<div class="lib-modal__badges">' +
        '<span class="lib-badge lib-badge--category">' + el.category + '</span>' +
        '<span class="lib-badge lib-badge--priority-' + el.priority + '">' + el.priority + ' priority</span>' +
        '<span class="lib-badge lib-badge--phase">' + el.effort + ' effort</span>' +
        phaseBadges +
      '</div>' +
      '<p class="lib-modal__desc">' + escapeHtml(el.description) + '</p>' +

      '<h3 class="lib-modal__section-title">Problem It Solves</h3>' +
      '<p class="lib-modal__problem">' + escapeHtml(el.problem) + '</p>' +

      '<h3 class="lib-modal__section-title">Visual Spec</h3>' +
      '<div class="lib-modal__spec-grid">' +
        Object.entries(el.visual_spec).map(([k, v]) =>
          '<div class="lib-modal__spec-item"><div class="lib-modal__spec-label">' + escapeHtml(k.replace(/_/g, ' ')) + '</div><div class="lib-modal__spec-value">' + escapeHtml(String(v)) + '</div></div>'
        ).join('') +
      '</div>' +

      '<h3 class="lib-modal__section-title">Copy Spec</h3>' +
      '<ul class="lib-modal__copy-list">' + copyItems + '</ul>' +

      '<h3 class="lib-modal__section-title">Copy Don\'ts</h3>' +
      '<ul class="lib-modal__dont-list">' + dontItems + '</ul>' +

      '<h3 class="lib-modal__section-title">Source Elements</h3>' +
      '<div style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:20px">' + sourceEls + '</div>' +

      '<div style="font-size:12px;color:var(--text-gray);padding-top:12px;border-top:1px solid var(--border-color)">ID: ' + el.id + '</div>' +
    '</div>';

  modalOverlay.classList.add('open');
  document.body.style.overflow = 'hidden';

  document.getElementById('modalClose').addEventListener('click', closeModal);
}

function closeModal() {
  modalOverlay.classList.remove('open');
  document.body.style.overflow = '';
}

modalOverlay.addEventListener('click', (e) => {
  if (e.target === modalOverlay) closeModal();
});

document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') closeModal();
});

// ── Init ──
renderCards();
</script>
</body>
</html>