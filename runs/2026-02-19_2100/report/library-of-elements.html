<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library of Elements â€” Design Stack v2 | Run 2026-02-19_2100</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --primary-purple:#31135D;
  --secondary-purple:rgb(109,49,194);
  --accent-purple:rgb(140,104,238);
  --bg-white:#ffffff;
  --bg-light:#f9fafb;
  --bg-light-gray:#f3f4f6;
  --bg-off-white:rgb(252,250,255);
  --text-dark:#1a1a1a;
  --text-gray:#6b7280;
  --text-light-gray:#9ca3af;
  --text-description:#374151;
  --border-color:#e5e7eb;
  --shadow-sm:0 1px 3px rgba(0,0,0,0.05);
  --shadow-md:0 2px 8px rgba(0,0,0,0.08);
  --shadow-lg:0 4px 16px rgba(0,0,0,0.1);
  --shadow-purple-md:0 4px 8px rgba(49,19,93,0.15);
  --rounded-sm:4px;--rounded-md:6px;--rounded-lg:8px;--rounded-xl:12px;--rounded-2xl:16px;--rounded-pill:20px;
  --font-inter:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  --font-dm:'DM Sans',sans-serif;
  --transition-fast:0.15s;--transition-base:0.2s;--transition-slow:0.3s;
}
html{scroll-behavior:smooth}
body{font-family:var(--font-inter);background:var(--bg-light);color:var(--text-dark);line-height:1.5;-webkit-font-smoothing:antialiased}
.lib-header{background:linear-gradient(135deg,#31135D 0%,#4a1f8a 50%,#5a2d8f 100%);padding:48px 32px 40px;position:relative;overflow:hidden}
.lib-header::before{content:'';position:absolute;top:-60%;right:-10%;width:500px;height:500px;background:radial-gradient(circle,rgba(140,104,238,0.15) 0%,transparent 70%);pointer-events:none}
.lib-header__inner{max-width:1320px;margin:0 auto;position:relative;z-index:1}
.lib-header__badge{display:inline-block;background:rgba(255,255,255,0.12);color:rgba(255,255,255,0.85);font-size:11px;font-weight:600;padding:4px 12px;border-radius:var(--rounded-pill);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:16px;backdrop-filter:blur(4px)}
.lib-header__title{font-size:36px;font-weight:800;color:#fff;margin-bottom:8px;letter-spacing:-0.5px}
.lib-header__sub{font-family:var(--font-dm);font-size:16px;color:rgba(255,255,255,0.7);max-width:600px;line-height:1.6}
.lib-header__meta{display:flex;gap:24px;margin-top:20px;flex-wrap:wrap}
.lib-header__meta-item{font-size:12px;color:rgba(255,255,255,0.55);font-family:var(--font-dm)}
.lib-header__meta-item strong{color:rgba(255,255,255,0.85);font-weight:600}
.lib-toolbar{position:sticky;top:0;z-index:100;background:rgba(255,255,255,0.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border-color);padding:12px 32px;transition:box-shadow var(--transition-base)}
.lib-toolbar.scrolled{box-shadow:var(--shadow-md)}
.lib-toolbar__inner{max-width:1320px;margin:0 auto;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.lib-search{position:relative;flex:1;min-width:220px;max-width:400px}
.lib-search__input{width:100%;padding:9px 14px 9px 36px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);font-family:var(--font-inter);font-size:13px;background:var(--bg-white);color:var(--text-dark);transition:border-color var(--transition-fast);outline:none}
.lib-search__input:focus{border-color:var(--secondary-purple)}
.lib-search__icon{position:absolute;left:11px;top:50%;transform:translateY(-50%);color:var(--text-light-gray);font-size:14px;pointer-events:none}
.lib-filters{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.lib-filter-group{position:relative}
.lib-filter-btn{display:inline-flex;align-items:center;gap:5px;padding:7px 14px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);background:var(--bg-white);font-family:var(--font-inter);font-size:12px;font-weight:500;color:var(--text-gray);cursor:pointer;transition:border-color var(--transition-fast),color var(--transition-fast);white-space:nowrap}
.lib-filter-btn:hover,.lib-filter-btn.active{border-color:var(--secondary-purple);color:var(--secondary-purple)}
.lib-filter-btn .arrow{font-size:10px;margin-left:2px;transition:transform var(--transition-fast)}
.lib-filter-btn.active .arrow{transform:rotate(180deg)}
.lib-filter-dropdown{position:absolute;top:calc(100% + 4px);left:0;min-width:200px;background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-lg);box-shadow:var(--shadow-lg);padding:6px 0;display:none;z-index:200}
.lib-filter-dropdown.open{display:block}
.lib-filter-option{display:flex;align-items:center;gap:8px;padding:8px 14px;font-size:12px;color:var(--text-dark);cursor:pointer;transition:background var(--transition-fast)}
.lib-filter-option:hover{background:var(--bg-light)}
.lib-filter-option input[type=checkbox]{accent-color:var(--secondary-purple)}
.lib-count{font-size:12px;color:var(--text-light-gray);font-family:var(--font-dm);margin-left:auto;white-space:nowrap}
.lib-grid-wrap{max-width:1320px;margin:0 auto;padding:24px 32px 64px}
.lib-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:20px}
.lib-empty{grid-column:1/-1;text-align:center;padding:80px 24px;color:var(--text-light-gray);font-size:15px}
.lib-card{background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-xl);overflow:hidden;transition:box-shadow var(--transition-base),border-color var(--transition-base),transform var(--transition-base);cursor:pointer;display:flex;flex-direction:column}
.lib-card:hover{box-shadow:var(--shadow-purple-md);border-color:rgba(109,49,194,0.25);transform:translateY(-2px)}
.lib-card__preview{width:100%;height:220px;border-bottom:1px solid var(--border-color);background:var(--bg-light);position:relative;overflow:hidden}
.lib-card__preview iframe{width:100%;height:100%;border:none;pointer-events:none;transform-origin:top left}
.lib-card__body{padding:16px 18px;flex:1;display:flex;flex-direction:column}
.lib-card__top-row{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}
.lib-card__cat{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;padding:3px 9px;border-radius:var(--rounded-pill);background:rgba(109,49,194,0.08);color:var(--secondary-purple)}
.lib-card__id{font-size:10px;color:var(--text-light-gray);margin-left:auto;font-family:var(--font-dm)}
.lib-card__name{font-size:16px;font-weight:700;color:var(--text-dark);margin-bottom:6px;line-height:1.3}
.lib-card__desc{font-family:var(--font-dm);font-size:13px;color:var(--text-gray);line-height:1.5;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;flex:1}
.lib-card__phases{display:flex;gap:4px;flex-wrap:wrap;margin-bottom:10px}
.lib-card__phase{font-size:10px;padding:2px 8px;border-radius:var(--rounded-sm);background:var(--bg-light-gray);color:var(--text-gray);font-weight:500}
.lib-card__sources{font-size:10px;color:var(--text-light-gray);font-family:var(--font-dm);border-top:1px solid var(--border-color);padding-top:10px;margin-top:auto}
.lib-card__sources strong{color:var(--text-gray);font-weight:600}
.lib-overlay{position:fixed;inset:0;background:rgba(49,19,93,0.5);z-index:1000;display:none;align-items:flex-start;justify-content:center;padding:40px 24px;overflow-y:auto;backdrop-filter:blur(4px);animation:fadeIn var(--transition-base) ease}
.lib-overlay.open{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.lib-modal{background:var(--bg-white);border-radius:var(--rounded-2xl);width:100%;max-width:900px;box-shadow:0 24px 64px rgba(49,19,93,0.3);animation:slideUp var(--transition-slow) ease;margin-bottom:40px}
.lib-modal__preview{width:100%;min-height:300px;max-height:450px;border-radius:var(--rounded-2xl) var(--rounded-2xl) 0 0;overflow:hidden;background:var(--bg-light);border-bottom:1px solid var(--border-color);position:relative}
.lib-modal__preview iframe{width:100%;height:400px;border:none}
.lib-modal__close{position:absolute;top:14px;right:14px;z-index:10;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.9);border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;color:var(--text-dark);transition:background var(--transition-fast)}
.lib-modal__close:hover{background:var(--bg-white)}
.lib-modal__content{padding:28px 32px 32px}
.lib-modal__header{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.lib-modal__title{font-size:24px;font-weight:800;color:var(--text-dark);flex:1;min-width:200px}
.lib-modal__desc{font-family:var(--font-dm);font-size:14px;color:var(--text-description);line-height:1.7;margin-bottom:24px}
.lib-modal__section{margin-bottom:24px}
.lib-modal__section-title{font-size:13px;font-weight:700;color:var(--primary-purple);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid rgba(109,49,194,0.1)}
.lib-modal__phases-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.lib-modal__sources-row{font-size:12px;color:var(--text-gray);font-family:var(--font-dm)}
.lib-modal__sources-row code{background:var(--bg-light-gray);padding:2px 6px;border-radius:var(--rounded-sm);font-size:11px;color:var(--secondary-purple);margin:0 2px}
@media(max-width:768px){
  .lib-header{padding:32px 20px}.lib-header__title{font-size:26px}
  .lib-toolbar{padding:10px 16px}.lib-grid-wrap{padding:16px 16px 48px}
  .lib-grid{grid-template-columns:1fr;gap:16px}
  .lib-modal__content{padding:20px}.lib-modal{max-width:100%}.lib-overlay{padding:20px 12px}
}
</style>
</head>
<body>
<header class="lib-header">
  <div class="lib-header__inner">
    <span class="lib-header__badge">Design Stack v2 &middot; Layer 8 Element Factory</span>
    <h1 class="lib-header__title">Library of Elements</h1>
    <p class="lib-header__sub">Browsable catalog of production-ready UI elements for the Split Lease guest journey. Each element includes live preview and design specs.</p>
    <div class="lib-header__meta">
      <span class="lib-header__meta-item"><strong>Run:</strong> 2026-02-19_2100</span>
      <span class="lib-header__meta-item"><strong>Journey:</strong> Guest</span>
      <span class="lib-header__meta-item"><strong>Elements:</strong> 7</span>
      <span class="lib-header__meta-item"><strong>Style:</strong> Split Lease Purple Palette</span>
    </div>
  </div>
</header>

<div class="lib-toolbar" id="toolbar">
  <div class="lib-toolbar__inner">
    <div class="lib-search">
      <span class="lib-search__icon">&#128269;</span>
      <input class="lib-search__input" type="text" id="searchInput" placeholder="Search elements by name or description...">
    </div>
    <div class="lib-filters">
      <div class="lib-filter-group">
        <button class="lib-filter-btn" data-filter="phase">Phase <span class="arrow">&#9662;</span></button>
        <div class="lib-filter-dropdown" data-filter-for="phase">
          <label class="lib-filter-option"><input type="checkbox" value="acceptance"> acceptance</label>
          <label class="lib-filter-option"><input type="checkbox" value="discovery"> discovery</label>
          <label class="lib-filter-option"><input type="checkbox" value="listing_evaluation"> listing evaluation</label>
          <label class="lib-filter-option"><input type="checkbox" value="move_in"> move in</label>
          <label class="lib-filter-option"><input type="checkbox" value="proposal_creation"> proposal creation</label>
          <label class="lib-filter-option"><input type="checkbox" value="search"> search</label>
        </div>
      </div>
    </div>
    <span class="lib-count" id="resultCount">7 elements</span>
  </div>
</div>

<div class="lib-grid-wrap">
  <div class="lib-grid" id="elementGrid"></div>
</div>

<div class="lib-overlay" id="modalOverlay">
  <div class="lib-modal" id="modalContent"></div>
</div>

<script>
const ELEMENTS = [
  {
      id: "ds-ui-2100-001",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["discovery"],
      priority: "high",
      description: "A hero section for the discovery page that earns guest belief by showing evidence of the platform's collective fiction before requesting any participation. Real listings with photos and prices are immediately visible, flanked by a social proof aggregate that demonstrates other strangers already trust this platform. No signup prompts, no preference questionnaires, no AI prompts appear in the first viewport. The search bar is present but secondary -- the guest can browse passively before choosing to refine. This implements the Sapiens principle that collective fictions sustain themselves through demonstrated reality, not persuasion.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --bg-off-white: rgb(252, 250, 255);
    --border-color: #e5e7eb;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --text-light-gray: #9ca3af;
  }
  body { font-family: 'Inter', sans-serif; background: var(--bg-off-white); }
  .discovery-hero {
    max-width: 1120px;
    margin: 0 auto;
    padding: 40px 24px;
  }
  .hero-header {
    margin-bottom: 24px;
  }
  .hero-headline {
    font-family: 'Inter', sans-serif;
    font-size: 28px;
    font-weight: 700;
    color: var(--primary-purple);
    margin-bottom: 8px;
    line-height: 1.2;
  }
  .social-proof-line {
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: var(--secondary-purple);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .proof-dot {
    width: 8px;
    height: 8px;
    background: var(--secondary-purple);
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }
  .search-bar {
    width: 100%;
    padding: 14px 20px;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: var(--text-dark);
    background: #fff;
    outline: none;
    transition: border-color 0.2s ease;
    margin-bottom: 32px;
  }
  .search-bar::placeholder { color: var(--text-light-gray); }
  .search-bar:focus { border-color: var(--secondary-purple); }
  .listing-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }
  @media (max-width: 768px) {
    .listing-grid { grid-template-columns: repeat(2, 1fr); }
    .hero-headline { font-size: 24px; }
  }
  @media (max-width: 480px) {
    .listing-grid { grid-template-columns: 1fr; }
  }
  .listing-card {
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(26,23,20,0.06);
    transition: box-shadow 0.2s cubic-bezier(0.16, 1, 0.3, 1), transform 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    cursor: pointer;
    animation: cardFadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) both;
  }
  .listing-card:nth-child(1) { animation-delay: 0ms; }
  .listing-card:nth-child(2) { animation-delay: 50ms; }
  .listing-card:nth-child(3) { animation-delay: 100ms; }
  .listing-card:hover {
    box-shadow: 0 2px 8px rgba(26,23,20,0.08);
    transform: translateY(-2px);
  }
  @keyframes cardFadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .card-image {
    width: 100%;
    height: 180px;
    background: linear-gradient(135deg, #e8e4f0 0%, #d4cfe6 100%);
    position: relative;
  }
  .card-badge {
    position: absolute;
    top: 12px;
    left: 12px;
    background: var(--primary-purple);
    color: #fff;
    font-family: 'DM Sans', sans-serif;
    font-size: 11px;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 6px;
  }
  .card-info {
    padding: 16px;
  }
  .card-price {
    font-family: 'Inter', sans-serif;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 4px;
  }
  .card-neighborhood {
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-gray);
    margin-bottom: 8px;
  }
  .card-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 11px;
    color: var(--text-light-gray);
  }
  .meta-dot {
    width: 6px;
    height: 6px;
    background: #4B47CE;
    border-radius: 50%;
  }
</style>
</head>
<body>
<section class="discovery-hero">
  <div class="hero-header">
    <h1 class="hero-headline">Shared spaces in your city</h1>
    <div class="social-proof-line">
      <span class="proof-dot"></span>
      2,400+ verified stays across 180 neighborhoods
    </div>
  </div>
  <input type="text" class="search-bar" placeholder="Search by neighborhood or address...">
  <div class="listing-grid">
    <div class="listing-card">
      <div class="card-image"><span class="card-badge">Verified</span></div>
      <div class="card-info">
        <div class="card-price">\$1,200/mo &middot; 3 days/week</div>
        <div class="card-neighborhood">Williamsburg, Brooklyn</div>
        <div class="card-meta"><span class="meta-dot"></span> Available from Mar 15 &middot; Responds same day</div>
      </div>
    </div>
    <div class="listing-card">
      <div class="card-image"><span class="card-badge">Verified</span></div>
      <div class="card-info">
        <div class="card-price">\$980/mo &middot; 2 days/week</div>
        <div class="card-neighborhood">Park Slope, Brooklyn</div>
        <div class="card-meta"><span class="meta-dot"></span> Available from Apr 1 &middot; Responds within 2hrs</div>
      </div>
    </div>
    <div class="listing-card">
      <div class="card-image"><span class="card-badge">Verified</span></div>
      <div class="card-info">
        <div class="card-price">\$1,450/mo &middot; 4 days/week</div>
        <div class="card-neighborhood">Upper West Side, Manhattan</div>
        <div class="card-meta"><span class="meta-dot"></span> Available now &middot; 12 verified reviews</div>
      </div>
    </div>
  </div>
</section>
</body>
</html>`
    },
  {
      id: "ds-ui-2100-002",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["search","discovery"],
      priority: "high",
      description: "An enriched listing card with three-layer progressive gossip architecture. The glance layer (always visible) shows photo, price, neighborhood, and a verification badge. The scan layer (revealed on hover) slides in availability status, host response time, photo count, and a save action. The design implements Harari's gossip theory: each data point is a trust signal that enables the guest to assess a stranger without meeting them. The hover transition uses shadow elevation and background warmth shift to create a clear distinction between scanning and engaged states.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --bg-off-white: rgb(252, 250, 255);
    --border-color: #e5e7eb;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --text-light-gray: #9ca3af;
  }
  body { font-family: 'Inter', sans-serif; background: var(--bg-off-white); padding: 40px; display: flex; justify-content: center; }
  .listing-card {
    width: 340px;
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(26,23,20,0.06);
    transition: box-shadow 0.2s cubic-bezier(0.16, 1, 0.3, 1), background-color 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    cursor: pointer;
  }
  .listing-card:hover {
    box-shadow: 0 2px 8px rgba(26,23,20,0.08);
    background-color: #fdfcfa;
  }
  .listing-card:hover .gossip-row {
    opacity: 1;
    transform: translateY(0);
  }
  .listing-card:hover .save-btn {
    opacity: 1;
  }
  .card-photo {
    width: 100%;
    height: 200px;
    background: linear-gradient(135deg, #ddd5ee 0%, #c4b8df 100%);
    position: relative;
  }
  .verified-badge {
    position: absolute;
    top: 12px;
    left: 12px;
    background: var(--primary-purple);
    color: #fff;
    font-family: 'DM Sans', sans-serif;
    font-size: 11px;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .verified-badge svg { width: 12px; height: 12px; }
  .photo-count {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(26,23,20,0.6);
    color: #fff;
    font-family: 'Inter', sans-serif;
    font-size: 11px;
    font-weight: 500;
    padding: 3px 8px;
    border-radius: 4px;
  }
  .card-body {
    padding: 16px;
  }
  .card-price {
    font-family: 'Inter', sans-serif;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 4px;
  }
  .card-location {
    display: inline-block;
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-gray);
    background: #f3f4f6;
    padding: 3px 10px;
    border-radius: 20px;
    margin-bottom: 10px;
  }
  .gossip-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding-top: 10px;
    border-top: 1px solid #f3f4f6;
    opacity: 0;
    transform: translateY(6px);
    transition: opacity 0.2s cubic-bezier(0.16, 1, 0.3, 1) 0.15s, transform 0.2s cubic-bezier(0.16, 1, 0.3, 1) 0.15s;
  }
  .gossip-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-family: 'Inter', sans-serif;
    font-size: 11px;
    color: var(--text-light-gray);
  }
  .avail-dot {
    width: 6px;
    height: 6px;
    background: #4B47CE;
    border-radius: 50%;
  }
  .save-btn {
    margin-left: auto;
    opacity: 0;
    transition: opacity 0.2s ease;
    background: none;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 4px 10px;
    font-family: 'Inter', sans-serif;
    font-size: 11px;
    color: var(--text-gray);
    cursor: pointer;
  }
  .save-btn:hover {
    border-color: var(--secondary-purple);
    color: var(--secondary-purple);
  }
</style>
</head>
<body>
<div class="listing-card">
  <div class="card-photo">
    <span class="verified-badge">
      <svg viewBox="0 0 12 12" fill="none"><path d="M10 3.5L4.5 9L2 6.5" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Verified
    </span>
    <span class="photo-count">8 photos</span>
  </div>
  <div class="card-body">
    <div class="card-price">\$1,200/mo &middot; 3 days/week</div>
    <span class="card-location">Williamsburg, Brooklyn</span>
    <div class="gossip-row">
      <div class="gossip-item"><span class="avail-dot"></span> Available Mar 15</div>
      <div class="gossip-item">Responds same day</div>
      <button class="save-btn">Save</button>
    </div>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-2100-003",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["listing_evaluation"],
      priority: "high",
      description: "The top section of the listing detail page, structured with trust-first information architecture. The host identity block (photo, name, verification badge, response rate) sits on a warm accent background immediately below the photo gallery. Below that, a review summary line with star rating and most recent review quote provides peer trust evidence before any listing description. This implements the Sapiens cross-activation principle: a past guest's testimony activates a future guest's trust more effectively than any platform assertion. The 'Contact Host' and 'Create Proposal' CTAs are always visible as sticky actions.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-off-white: rgb(252, 250, 255);
    --border-color: #e5e7eb;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --text-light-gray: #9ca3af;
    --gradient-purple-button: linear-gradient(135deg, #4B47CE 0%, #7C3AED 100%);
  }
  body { font-family: 'Inter', sans-serif; background: #fff; }
  .photo-gallery {
    width: 100%;
    height: 320px;
    background: linear-gradient(135deg, #ddd5ee 0%, #c4b8df 50%, #b5aad4 100%);
    position: relative;
  }
  .photo-count-badge {
    position: absolute;
    bottom: 16px;
    right: 16px;
    background: rgba(26,23,20,0.6);
    color: #fff;
    font-size: 12px;
    font-weight: 500;
    padding: 6px 12px;
    border-radius: 6px;
  }
  .listing-detail-header {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 24px;
  }
  .host-identity-row {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px 24px;
    background: var(--bg-off-white);
    border-left: 3px solid var(--secondary-purple);
    border-radius: 0 12px 12px 0;
    margin: 24px 0 20px 0;
  }
  .host-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--secondary-purple), var(--accent-purple));
    border: 2px solid var(--secondary-purple);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 700;
    font-size: 18px;
    flex-shrink: 0;
  }
  .host-details {
    flex: 1;
  }
  .host-name {
    font-family: 'Inter', sans-serif;
    font-size: 18px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 2px;
  }
  .host-meta {
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    color: var(--text-gray);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .verify-chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: var(--primary-purple);
    color: #fff;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 4px;
  }
  .verify-chip svg { width: 10px; height: 10px; }
  .review-section {
    margin-bottom: 20px;
  }
  .review-summary {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
  }
  .star-rating {
    color: #f59e0b;
    font-size: 16px;
    letter-spacing: 1px;
  }
  .review-count {
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-gray);
  }
  .read-all {
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    color: var(--secondary-purple);
    text-decoration: none;
    font-weight: 600;
    margin-left: auto;
  }
  .read-all:hover { text-decoration: underline; }
  .review-quote {
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    font-style: italic;
    color: var(--text-gray);
    background: #fafafa;
    padding: 14px 18px;
    border-radius: 10px;
    border-left: 3px solid #e5e7eb;
    line-height: 1.6;
  }
  .review-author {
    font-style: normal;
    font-weight: 600;
    color: var(--text-dark);
  }
  .action-bar {
    display: flex;
    gap: 12px;
    padding: 16px 0;
    border-top: 1px solid #f3f4f6;
    position: sticky;
    bottom: 0;
    background: #fff;
  }
  .btn-contact {
    flex: 1;
    padding: 14px 24px;
    border: 1.5px solid var(--secondary-purple);
    border-radius: 10px;
    background: #fff;
    color: var(--secondary-purple);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease, color 0.2s ease;
  }
  .btn-contact:hover {
    background: var(--bg-off-white);
  }
  .btn-propose {
    flex: 1;
    padding: 14px 24px;
    border: none;
    border-radius: 10px;
    background: var(--gradient-purple-button);
    color: #fff;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s ease;
  }
  .btn-propose:hover { opacity: 0.9; }
</style>
</head>
<body>
<div class="photo-gallery">
  <span class="photo-count-badge">1 / 12 photos</span>
</div>
<div class="listing-detail-header">
  <div class="host-identity-row">
    <div class="host-avatar">S</div>
    <div class="host-details">
      <div class="host-name">Hosted by Sara</div>
      <div class="host-meta">
        <span class="verify-chip">
          <svg viewBox="0 0 10 10" fill="none"><path d="M8.5 3L3.75 7.5L1.5 5.25" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          ID Verified
        </span>
        Responds within 2 hours &middot; Hosting since 2024
      </div>
    </div>
  </div>
  <div class="review-section">
    <div class="review-summary">
      <span class="star-rating">&#9733;&#9733;&#9733;&#9733;&#9733;</span>
      <span class="review-count">4.8 from 12 verified reviews</span>
      <a href="#" class="read-all">Read all</a>
    </div>
    <div class="review-quote">
      &ldquo;Sara was incredibly welcoming on my first day and left a handwritten note with neighborhood recommendations. The space was exactly as described.&rdquo;
      <br><span class="review-author">&mdash; James, October 2025</span>
    </div>
  </div>
  <div class="action-bar">
    <button class="btn-contact">Contact Sara</button>
    <button class="btn-propose">Create Proposal</button>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-2100-004",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["listing_evaluation","proposal_creation"],
      priority: "high",
      description: "A slide-up message overlay that enables the guest to gossip directly with the host before committing to a formal proposal. The overlay shows the host's name, photo, and response time, with a text input and send button. This implements the Sapiens gossip theory: humans evolved to assess potential cooperators through direct interpersonal communication. The messaging channel reduces the 'cooperation vacuum' where the guest has interest but no low-stakes way to act on it. The overlay preserves the listing detail context behind a dimmed backdrop.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --bg-off-white: rgb(252, 250, 255);
    --border-color: #e5e7eb;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --text-light-gray: #9ca3af;
    --gradient-purple-button: linear-gradient(135deg, #4B47CE 0%, #7C3AED 100%);
  }
  body { font-family: 'Inter', sans-serif; background: #f0eef5; min-height: 100vh; display: flex; align-items: flex-end; justify-content: center; }
  .overlay-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.4);
    display: flex;
    align-items: flex-end;
    justify-content: center;
    animation: backdropIn 0.25s ease;
  }
  @keyframes backdropIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .message-overlay {
    width: 100%;
    max-width: 480px;
    background: #fff;
    border-radius: 16px 16px 0 0;
    padding: 24px;
    animation: slideUp 0.25s cubic-bezier(0.16, 1, 0.3, 1);
  }
  @keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
  }
  .overlay-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }
  .overlay-host {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .overlay-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--secondary-purple), rgb(140, 104, 238));
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 700;
    font-size: 16px;
  }
  .overlay-host-info h3 {
    font-family: 'Inter', sans-serif;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 2px;
  }
  .overlay-host-info p {
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    color: var(--text-light-gray);
  }
  .close-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: #f3f4f6;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-gray);
    font-size: 16px;
    transition: background 0.15s ease;
  }
  .close-btn:hover { background: #e5e7eb; }
  .message-input {
    width: 100%;
    min-height: 100px;
    padding: 14px 16px;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: var(--text-dark);
    resize: vertical;
    outline: none;
    transition: border-color 0.2s ease;
    line-height: 1.5;
    margin-bottom: 16px;
  }
  .message-input::placeholder { color: var(--text-light-gray); }
  .message-input:focus { border-color: var(--secondary-purple); }
  .send-btn {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: 10px;
    background: var(--gradient-purple-button);
    color: #fff;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s ease;
  }
  .send-btn:hover { opacity: 0.9; }
  .send-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
  .char-hint {
    font-family: 'DM Sans', sans-serif;
    font-size: 11px;
    color: var(--text-light-gray);
    text-align: right;
    margin-top: -12px;
    margin-bottom: 16px;
  }
</style>
</head>
<body>
<div class="overlay-backdrop">
  <div class="message-overlay">
    <div class="overlay-header">
      <div class="overlay-host">
        <div class="overlay-avatar">S</div>
        <div class="overlay-host-info">
          <h3>Message Sara</h3>
          <p>Usually responds within 2 hours</p>
        </div>
      </div>
      <button class="close-btn">&times;</button>
    </div>
    <textarea class="message-input" placeholder="Ask about availability, house rules, or the neighborhood..."></textarea>
    <div class="char-hint">Minimum 10 characters</div>
    <button class="send-btn" disabled>Send Message</button>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-2100-005",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["proposal_creation"],
      priority: "high",
      description: "A pre-populated proposal summary card with a live price breakdown panel. The card pre-fills listing-derived terms (dates, schedule, price) so the guest confirms rather than constructs. The price panel updates in real-time as any field changes. The submit button uses the reserved gradient-purple treatment for binding actions, creating a ceremonial distinction from ordinary UI interactions. This implements Harari's incorporation ritual metaphor: the proposal is the moment dates and prices become an intersubjective reality shared between two strangers.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --bg-off-white: rgb(252, 250, 255);
    --border-color: #e5e7eb;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --text-light-gray: #9ca3af;
    --gradient-purple-button: linear-gradient(135deg, #4B47CE 0%, #7C3AED 100%);
  }
  body { font-family: 'Inter', sans-serif; background: #f9fafb; padding: 40px 20px; display: flex; justify-content: center; }
  .proposal-container {
    width: 100%;
    max-width: 720px;
  }
  .proposal-header {
    margin-bottom: 24px;
  }
  .proposal-header h2 {
    font-size: 22px;
    font-weight: 700;
    color: var(--primary-purple);
    margin-bottom: 4px;
  }
  .proposal-header p {
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    color: var(--text-gray);
  }
  .proposal-card {
    background: var(--bg-off-white);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    padding: 28px;
    display: grid;
    grid-template-columns: 1fr 280px;
    gap: 28px;
  }
  @media (max-width: 640px) {
    .proposal-card { grid-template-columns: 1fr; }
  }
  .form-section h3 {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 16px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'DM Sans', sans-serif;
  }
  .form-group {
    margin-bottom: 16px;
  }
  .form-label {
    display: block;
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-gray);
    margin-bottom: 6px;
  }
  .form-input {
    width: 100%;
    padding: 10px 14px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: var(--text-dark);
    background: #fff;
    outline: none;
    transition: border-color 0.2s ease;
  }
  .form-input:focus { border-color: var(--secondary-purple); }
  .form-input.pre-filled {
    background: #fff;
    color: var(--text-dark);
  }
  .price-panel {
    background: #fff;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 20px;
    align-self: start;
    position: sticky;
    top: 20px;
  }
  .price-panel h3 {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-gray);
    margin-bottom: 16px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'DM Sans', sans-serif;
  }
  .price-line {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 13px;
  }
  .price-line .label { color: var(--text-gray); }
  .price-line .value { color: var(--text-dark); font-weight: 500; }
  .price-divider {
    height: 1px;
    background: var(--border-color);
    margin: 14px 0;
  }
  .price-total {
    display: flex;
    justify-content: space-between;
    font-family: 'Inter', sans-serif;
  }
  .price-total .label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-dark);
  }
  .price-total .value {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary-purple);
  }
  .submit-btn {
    width: 100%;
    padding: 16px;
    border: none;
    border-radius: 10px;
    background: var(--gradient-purple-button);
    color: #fff;
    font-family: 'Inter', sans-serif;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 20px;
    transition: opacity 0.2s ease;
    position: relative;
    overflow: hidden;
  }
  .submit-btn:hover { opacity: 0.92; }
  .submit-btn::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 3px;
    background: rgba(255,255,255,0.5);
    transition: width 0.3s linear;
  }
  .submit-btn.loading::after { width: 100%; }
</style>
</head>
<body>
<div class="proposal-container">
  <div class="proposal-header">
    <h2>Your proposal to Sara</h2>
    <p>Bright 2-bed in Williamsburg, Brooklyn</p>
  </div>
  <div class="proposal-card">
    <div class="form-section">
      <h3>Proposed Terms</h3>
      <div class="form-group">
        <label class="form-label">Start Date</label>
        <input type="text" class="form-input pre-filled" value="March 15, 2026">
      </div>
      <div class="form-group">
        <label class="form-label">Duration</label>
        <input type="text" class="form-input pre-filled" value="10 weeks">
      </div>
      <div class="form-group">
        <label class="form-label">Days per Week</label>
        <input type="text" class="form-input pre-filled" value="3 days (Mon, Tue, Wed)">
      </div>
      <div class="form-group">
        <label class="form-label">Message to Host (optional)</label>
        <input type="text" class="form-input" placeholder="Add a note about your stay...">
      </div>
    </div>
    <div class="price-panel">
      <h3>Price Breakdown</h3>
      <div class="price-line">
        <span class="label">Base rate (10 wks &times; 3 days)</span>
        <span class="value">\$3,360</span>
      </div>
      <div class="price-line">
        <span class="label">Platform fee</span>
        <span class="value">\$240</span>
      </div>
      <div class="price-divider"></div>
      <div class="price-total">
        <span class="label">Total</span>
        <span class="value">\$3,600</span>
      </div>
      <button class="submit-btn">Send Proposal to Sara</button>
    </div>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-2100-006",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["acceptance"],
      priority: "high",
      description: "A full-viewport overlay that marks the moment the negotiable fiction becomes a binding agreement. After the guest clicks 'Yes, Proceed', the overlay appears with a ceremonial check animation, the host's name, the confirmed terms, and immediate next-steps orientation (House Manual access, move-in date). This implements Harari's insight that ritual moments require distinct treatment -- the acceptance confirmation must feel different from every other interaction in the product to mark the cooperation threshold. The spring-eased check animation is the only 'celebratory' motion in the entire guest journey.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-off-white: rgb(252, 250, 255);
    --border-color: #e5e7eb;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --text-light-gray: #9ca3af;
    --gradient-purple-button: linear-gradient(135deg, #4B47CE 0%, #7C3AED 100%);
  }
  body { font-family: 'Inter', sans-serif; margin: 0; }
  .confirmation-overlay {
    position: fixed;
    inset: 0;
    background: rgba(255, 255, 255, 0.96);
    display: flex;
    align-items: center;
    justify-content: center;
    animation: overlayIn 0.4s ease;
  }
  @keyframes overlayIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .confirmation-content {
    text-align: center;
    max-width: 420px;
    padding: 40px 24px;
  }
  .check-circle {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    background: var(--gradient-purple-button);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 24px;
    animation: checkBounce 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  @keyframes checkBounce {
    0% { transform: scale(0); }
    60% { transform: scale(1.15); }
    100% { transform: scale(1); }
  }
  .check-circle svg {
    width: 32px;
    height: 32px;
    animation: checkDraw 0.4s ease 0.3s both;
  }
  @keyframes checkDraw {
    from { stroke-dashoffset: 30; opacity: 0; }
    to { stroke-dashoffset: 0; opacity: 1; }
  }
  .confirm-title {
    font-family: 'Inter', sans-serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--primary-purple);
    margin-bottom: 8px;
    animation: textUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
  }
  .confirm-terms {
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    color: var(--text-gray);
    margin-bottom: 32px;
    animation: textUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) 0.3s both;
  }
  @keyframes textUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .next-steps {
    background: var(--bg-off-white);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 20px;
    text-align: left;
    margin-bottom: 24px;
    animation: textUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) 0.4s both;
  }
  .next-steps h4 {
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    font-weight: 600;
    color: var(--text-light-gray);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
  }
  .next-step-item {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: var(--text-dark);
  }
  .next-step-item:last-child { margin-bottom: 0; }
  .step-icon {
    width: 28px;
    height: 28px;
    border-radius: 8px;
    background: var(--bg-off-white);
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    flex-shrink: 0;
  }
  .dashboard-btn {
    display: inline-block;
    padding: 14px 40px;
    background: var(--gradient-purple-button);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s ease;
    animation: textUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) 0.5s both;
    text-decoration: none;
  }
  .dashboard-btn:hover { opacity: 0.9; }
</style>
</head>
<body>
<div class="confirmation-overlay">
  <div class="confirmation-content">
    <div class="check-circle">
      <svg viewBox="0 0 32 32" fill="none">
        <path d="M8 16L14 22L24 10" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="30" />
      </svg>
    </div>
    <h2 class="confirm-title">Agreement confirmed with Sara</h2>
    <p class="confirm-terms">10 weeks in Williamsburg, Brooklyn &middot; Starting March 15, 2026</p>
    <div class="next-steps">
      <h4>What happens next</h4>
      <div class="next-step-item">
        <span class="step-icon">&#128214;</span>
        Your House Manual is ready to review
      </div>
      <div class="next-step-item">
        <span class="step-icon">&#128172;</span>
        Sara has been notified and will reach out
      </div>
      <div class="next-step-item">
        <span class="step-icon">&#128197;</span>
        Your first check-in is March 15 at 3:00 PM
      </div>
    </div>
    <a href="#" class="dashboard-btn">Go to Your Dashboard</a>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-2100-007",
      name: undefined,
      category: "card",
      source_elements: [],
      journey_phases: ["move_in","acceptance"],
      priority: "high",
      description: "A structured, card-based House Manual that codifies the cooperation norms between guest and host for the fiction-to-reality transition at move-in. Four distinct section cards (Arrival, House Rules, Space Guide, Neighborhood) each use a warm surface background with a serif heading and section icon. Critical items (check-in code, emergency contact) use an info-blue highlight bar. This implements the Sapiens insight that cooperation beyond intimate acquaintance requires codified rules -- the House Manual is the lease's 'law book' that replaces personal knowledge with structured norms.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-off-white: rgb(252, 250, 255);
    --border-color: #e5e7eb;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --text-light-gray: #9ca3af;
  }
  body { font-family: 'Inter', sans-serif; background: #f9fafb; padding: 40px 20px; }
  .manual-container {
    max-width: 640px;
    margin: 0 auto;
  }
  .manual-header {
    margin-bottom: 32px;
  }
  .manual-header h1 {
    font-size: 24px;
    font-weight: 700;
    color: var(--primary-purple);
    margin-bottom: 4px;
  }
  .manual-header p {
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    color: var(--text-gray);
  }
  .manual-section {
    background: var(--bg-off-white);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 20px;
  }
  .section-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 18px;
  }
  .section-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    background: #fff;
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
  }
  .section-header h2 {
    font-family: 'DM Sans', sans-serif;
    font-size: 18px;
    font-weight: 600;
    color: var(--text-dark);
  }
  .manual-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: var(--text-gray);
    line-height: 1.5;
  }
  .manual-item:last-child { margin-bottom: 0; }
  .item-bullet {
    width: 6px;
    height: 6px;
    background: var(--text-light-gray);
    border-radius: 50%;
    margin-top: 7px;
    flex-shrink: 0;
  }
  .critical-item {
    background: rgba(109, 49, 194, 0.06);
    border-left: 3px solid var(--secondary-purple);
    border-radius: 0 8px 8px 0;
    padding: 12px 16px;
    margin-bottom: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: var(--text-dark);
    font-weight: 500;
    line-height: 1.5;
  }
  .critical-label {
    font-family: 'DM Sans', sans-serif;
    font-size: 11px;
    font-weight: 600;
    color: var(--secondary-purple);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
  }
  .message-host-link {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    color: var(--secondary-purple);
    text-decoration: none;
    font-weight: 600;
    margin-top: 14px;
  }
  .message-host-link:hover { text-decoration: underline; }
</style>
</head>
<body>
<div class="manual-container">
  <div class="manual-header">
    <h1>Your House Manual</h1>
    <p>Sara's space in Williamsburg, Brooklyn</p>
  </div>

  <div class="manual-section">
    <div class="section-header">
      <span class="section-icon">&#128273;</span>
      <h2>Arrival & Check-In</h2>
    </div>
    <div class="critical-item">
      <div class="critical-label">Door Code</div>
      Enter code 4729# on the front door keypad. Unit 3B, second floor.
    </div>
    <div class="critical-item">
      <div class="critical-label">Check-In Time</div>
      March 15, 2026 at 3:00 PM. Sara will be available by message.
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Your bedroom is the second door on the left. Fresh linens are on the bed.</span>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>WiFi network: SaraHome &middot; Password: williamsburg2024</span>
    </div>
    <a href="#" class="message-host-link">&#128172; Message Sara about check-in</a>
  </div>

  <div class="manual-section">
    <div class="section-header">
      <span class="section-icon">&#128220;</span>
      <h2>House Rules</h2>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Quiet hours after 10 PM &mdash; both of us are light sleepers</span>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Kitchen is shared. Please clean up after cooking (dishwasher is your friend)</span>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>No smoking inside. Balcony is fine.</span>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Guests are welcome but please give a heads-up the day before</span>
    </div>
    <a href="#" class="message-host-link">&#128172; Message Sara about house rules</a>
  </div>

  <div class="manual-section">
    <div class="section-header">
      <span class="section-icon">&#127968;</span>
      <h2>Space Guide</h2>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Washer/dryer in the hallway closet. Detergent under the sink.</span>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Thermostat: set between 68-72&deg;F. The radiator takes about 20 minutes to warm up.</span>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Your shelf in the fridge is the middle one. Pantry shelf is labeled.</span>
    </div>
  </div>

  <div class="manual-section">
    <div class="section-header">
      <span class="section-icon">&#128205;</span>
      <h2>Neighborhood</h2>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>L train (Bedford Ave) is 4 minutes walk. G train (Metropolitan) is 7 minutes.</span>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Grocery: Whole Foods on Bedford (5 min) or Food Bazaar on Graham (3 min)</span>
    </div>
    <div class="manual-item">
      <span class="item-bullet"></span>
      <span>Best coffee: Devocion on Grand St. Best lunch: Los Tacos on Berry.</span>
    </div>
    <div class="critical-item">
      <div class="critical-label">Emergency</div>
      Building super: Mike, (718) 555-0142. Available 8AM-10PM.
    </div>
  </div>
</div>
</body>
</html>`
    }
];

function createSrcdoc(snippet) {
  return snippet;
}

function renderCards() {
  const grid = document.getElementById('elementGrid');
  const search = document.getElementById('searchInput').value.toLowerCase();
  const checkedPhases = Array.from(document.querySelectorAll('[data-filter-for="phase"] input:checked')).map(c => c.value);

  let filtered = ELEMENTS.filter(el => {
    if (search && !el.name.toLowerCase().includes(search) && !el.description.toLowerCase().includes(search)) return false;
    if (checkedPhases.length && !el.journey_phases.some(p => checkedPhases.includes(p))) return false;
    return true;
  });

  document.getElementById('resultCount').textContent = filtered.length + ' element' + (filtered.length !== 1 ? 's' : '');

  if (!filtered.length) {
    grid.innerHTML = '<div class="lib-empty">No elements match your filters.</div>';
    return;
  }

  grid.innerHTML = filtered.map((el, i) => {
    const phases = el.journey_phases.map(p => '<span class="lib-card__phase">' + p.replace(/_/g, ' ') + '</span>').join('');
    const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');
    return '<div class="lib-card" data-idx="' + ELEMENTS.indexOf(el) + '">' +
      '<div class="lib-card__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" loading="lazy" sandbox="allow-same-origin"></iframe></div>' +
      '<div class="lib-card__body">' +
        '<div class="lib-card__top-row"><span class="lib-card__cat">UI Element</span><span class="lib-card__id">' + el.id + '</span></div>' +
        '<div class="lib-card__name">' + el.name + '</div>' +
        '<div class="lib-card__desc">' + el.description + '</div>' +
        '<div class="lib-card__phases">' + phases + '</div>' +
        '<div class="lib-card__sources"><strong>Sources:</strong> ' + sources + '</div>' +
      '</div></div>';
  }).join('');
}

function escapeAttr(s) {
  return s.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function openModal(idx) {
  const el = ELEMENTS[idx];
  const overlay = document.getElementById('modalOverlay');
  const modal = document.getElementById('modalContent');
  const phases = el.journey_phases.map(p => '<span class="lib-card__phase" style="font-size:12px;padding:4px 10px;">' + p.replace(/_/g, ' ') + '</span>').join('');
  const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');

  modal.innerHTML =
    '<div class="lib-modal__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" sandbox="allow-same-origin"></iframe><button class="lib-modal__close" onclick="closeModal()">&times;</button></div>' +
    '<div class="lib-modal__content">' +
      '<div class="lib-modal__header"><h2 class="lib-modal__title">' + el.name + '</h2></div>' +
      '<p class="lib-modal__desc">' + el.description + '</p>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Journey Phases</div><div class="lib-modal__phases-row">' + phases + '</div></div>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Source Elements</div><div class="lib-modal__sources-row">' + sources + '</div></div>' +
    '</div>';

  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

// Event listeners
document.getElementById('searchInput').addEventListener('input', renderCards);
document.querySelectorAll('.lib-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const dropdown = btn.nextElementSibling;
    dropdown.classList.toggle('open');
    btn.classList.toggle('active');
  });
});
document.querySelectorAll('.lib-filter-dropdown input').forEach(cb => {
  cb.addEventListener('change', renderCards);
});
document.getElementById('elementGrid').addEventListener('click', e => {
  const card = e.target.closest('.lib-card');
  if (card) openModal(parseInt(card.dataset.idx));
});
document.getElementById('modalOverlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) closeModal();
});
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
window.addEventListener('scroll', () => {
  document.getElementById('toolbar').classList.toggle('scrolled', window.scrollY > 10);
});

// Initial render
renderCards();
</script>
</body>
</html>