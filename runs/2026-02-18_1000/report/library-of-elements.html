<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Library of Elements - DS 2026-02-18_1000 (Dana + Refactoring UI)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-purple: #31135D;
      --secondary-purple: rgb(109, 49, 194);
      --accent-purple: rgb(140, 104, 238);
      --text-dark: #1a1a1a;
      --text-gray: #6b7280;
      --text-light-gray: #9ca3af;
      --bg-white: #ffffff;
      --bg-light: #f9fafb;
      --bg-light-gray: #f3f4f6;
      --border-color: #e5e7eb;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
      --shadow-md: 0 2px 8px rgba(0,0,0,0.08);
      --shadow-lg: 0 4px 12px rgba(0,0,0,0.15);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg-light); color: var(--text-dark); }

    /* Header */
    .header { background: linear-gradient(135deg, #31135D 0%, #5a2d8f 100%); color: white; padding: 32px 40px; }
    .header h1 { font-size: 28px; font-weight: 700; margin-bottom: 4px; }
    .header .subtitle { font-size: 14px; opacity: 0.8; }
    .header .meta { display: flex; gap: 16px; margin-top: 12px; font-size: 12px; opacity: 0.7; }

    /* Filters */
    .filters { background: var(--bg-white); border-bottom: 1px solid var(--border-color); padding: 16px 40px; display: flex; gap: 12px; flex-wrap: wrap; align-items: center; position: sticky; top: 0; z-index: 100; box-shadow: var(--shadow-sm); }
    .search-input { padding: 8px 14px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 13px; font-family: 'Inter', sans-serif; width: 240px; }
    .search-input:focus { outline: none; border-color: var(--secondary-purple); box-shadow: 0 0 0 3px rgba(109,49,194,0.1); }
    .filter-chip { padding: 6px 14px; border-radius: 20px; font-size: 12px; font-weight: 500; border: 1px solid var(--border-color); background: var(--bg-white); color: var(--text-gray); cursor: pointer; transition: all 0.15s ease; font-family: 'Inter', sans-serif; }
    .filter-chip:hover { border-color: var(--secondary-purple); color: var(--secondary-purple); }
    .filter-chip.active { background: rgb(252,250,255); border-color: var(--secondary-purple); color: rgb(82,31,147); }

    /* Grid */
    .grid { padding: 24px 40px; display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 20px; }
    @media (max-width: 768px) { .grid { grid-template-columns: 1fr; padding: 16px; } .filters { padding: 12px 16px; } .header { padding: 24px 16px; } }

    /* Card */
    .card { background: var(--bg-white); border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; box-shadow: var(--shadow-sm); transition: box-shadow 0.2s ease, transform 0.2s ease; }
    .card:hover { box-shadow: var(--shadow-lg); transform: translateY(-2px); }
    .card-preview { height: 240px; border-bottom: 1px solid var(--border-color); position: relative; overflow: hidden; background: var(--bg-light); }
    .card-preview iframe { width: 100%; height: 100%; border: none; pointer-events: none; transform-origin: 0 0; }
    .card-body { padding: 16px 20px; }
    .card-name { font-size: 16px; font-weight: 600; color: var(--text-dark); margin-bottom: 4px; line-height: 1.3; }
    .card-desc { font-size: 13px; color: var(--text-gray); line-height: 1.5; margin-bottom: 12px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
    .card-meta { display: flex; flex-wrap: wrap; gap: 6px; }
    .tag { padding: 2px 8px; border-radius: 20px; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.03em; }
    .tag-category { background: rgba(75,71,206,0.1); color: #4B47CE; }
    .tag-phase { background: var(--bg-light-gray); color: var(--text-gray); }
    .tag-priority { font-weight: 700; }
    .tag-P0 { background: #fde8e8; color: #b83a3a; }
    .tag-P1 { background: #fef3e2; color: #c17a28; }
    .tag-P2 { background: var(--bg-light-gray); color: var(--text-gray); }
    .card-id { font-size: 10px; color: var(--text-light-gray); font-family: monospace; margin-top: 8px; }

    /* No results */
    .no-results { text-align: center; padding: 60px 40px; color: var(--text-light-gray); font-size: 16px; }

    /* Footer */
    .footer { text-align: center; padding: 32px; color: var(--text-light-gray); font-size: 11px; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Library of Elements</h1>
    <div class="subtitle">Design Stack Run 2026-02-18_1000 &mdash; Dana (Host) + Refactoring UI (Hierarchy, Spacing, Color)</div>
    <div class="meta">
      <span>8 UI Elements</span>
      <span>5 Categories</span>
      <span>Host Journey</span>
    </div>
  </div>

  <div class="filters">
    <input type="text" class="search-input" id="search" placeholder="Search elements...">
    <button class="filter-chip active" data-filter="all">All</button>
    <button class="filter-chip" data-filter="works">Works</button>
    <button class="filter-chip" data-filter="communicates">Communicates</button>
    <button class="filter-chip" data-filter="looks">Looks</button>
    <button class="filter-chip" data-filter="behaves">Behaves</button>
    <button class="filter-chip" data-filter="feels">Feels</button>
    <button class="filter-chip" data-filter="P0">P0 Only</button>
  </div>

  <div class="grid" id="grid"></div>
  <div class="no-results" id="no-results" style="display:none;">No elements match your search.</div>

  <div class="footer">SplitLease Design Stack v2.0 &mdash; Run 2026-02-18_1000</div>

  <script>
    const elements = [
      {
        "id": "ds-ui-1000-001",
        "name": "Guest Occupancy Day-Badge Row",
        "description": "A compact 7-circle day-badge row (M T W T F S S) that visually communicates a guest's weekly occupancy pattern at a glance. Active stay days use the brand purple fill; inactive days use a muted grey.",
        "category": "looks",
        "phase": ["proposal_mgmt", "active_lease", "listing_creation"],
        "priority": "P0",
        "html_css": ""
      },
      {
        "id": "ds-ui-1000-002",
        "name": "Guest Proposal Card with Type-First Hierarchy",
        "description": "A proposal card that places guest occupancy pattern and compatibility badges above dates and pricing, implementing the type-first information hierarchy. Inline accept/reject buttons for time-starved hosts.",
        "category": "works",
        "phase": ["proposal_mgmt"],
        "priority": "P0",
        "html_css": ""
      },
      {
        "id": "ds-ui-1000-003",
        "name": "Status-First Host Dashboard",
        "description": "A dashboard layout that places current status headline and action queue above all other content, designed for hosts who check in 5-second bursts between flights.",
        "category": "communicates",
        "phase": ["active_lease", "proposal_mgmt"],
        "priority": "P0",
        "html_css": ""
      },
      {
        "id": "ds-ui-1000-004",
        "name": "Between-Stay Status Display",
        "description": "A timeline-based status display for the period between guest stays. Shows last stay outcome, cleaning photo status, and next arrival date for absent hosts.",
        "category": "behaves",
        "phase": ["active_lease"],
        "priority": "P0",
        "html_css": ""
      },
      {
        "id": "ds-ui-1000-005",
        "name": "Guest Preference Quick-Set Panel",
        "description": "A rapid-selection panel for setting guest preferences during listing creation. Uses toggle chips and day-badge selector completable in 3-4 taps with smart defaults.",
        "category": "behaves",
        "phase": ["listing_creation"],
        "priority": "P1",
        "html_css": ""
      },
      {
        "id": "ds-ui-1000-006",
        "name": "Patient Follow-Up Email Template",
        "description": "An email template for post-call follow-up embodying respectful patience. Minimalist, sent from agent's name, with single CTA and explicit 'no rush' language.",
        "category": "feels",
        "phase": ["discovery", "evaluation"],
        "priority": "P1",
        "html_css": ""
      },
      {
        "id": "ds-ui-1000-007",
        "name": "Listing Import Confirmation Flow",
        "description": "A review-and-confirm interface for imported listing data. Shows pre-filled fields with check indicators for mapped data and accent highlights for fields needing attention.",
        "category": "works",
        "phase": ["listing_creation", "onboarding"],
        "priority": "P1",
        "html_css": ""
      },
      {
        "id": "ds-ui-1000-008",
        "name": "Notification Priority Escalation Card",
        "description": "Notification cards for time-sensitive actions with deadline information and visual urgency that adapts based on proximity to deadline. Three-tier system: batch, priority, escalation.",
        "category": "behaves",
        "phase": ["proposal_mgmt", "active_lease"],
        "priority": "P1",
        "html_css": ""
      }
    ];

    // Load full element data from the UI elements JSON
    (async function() {
      try {
        const resp = await fetch('../layer-8/ui-elements.json');
        if (resp.ok) {
          const fullData = await resp.json();
          fullData.forEach(full => {
            const el = elements.find(e => e.id === full.id);
            if (el) el.html_css = full.html_css || '';
          });
        }
      } catch(e) {
        console.log('Could not load ui-elements.json, using inline previews');
      }
      renderGrid();
    })();

    function renderCard(el) {
      const phases = el.phase.map(p => `<span class="tag tag-phase">${p.replace(/_/g,' ')}</span>`).join('');
      const previewHTML = el.html_css
        ? `<iframe srcdoc="${el.html_css.replace(/"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;')}" sandbox="allow-same-origin"></iframe>`
        : `<div style="display:flex;align-items:center;justify-content:center;height:100%;color:var(--text-light-gray);font-size:13px;">Preview unavailable</div>`;

      return `<div class="card" data-category="${el.category}" data-priority="${el.priority}" data-name="${el.name.toLowerCase()}" data-desc="${el.description.toLowerCase()}" data-phases="${el.phase.join(' ')}">
        <div class="card-preview">${el.html_css ? `<iframe srcdoc='${el.html_css.replace(/'/g, "&#39;")}' sandbox="allow-same-origin" style="width:200%;height:200%;transform:scale(0.5);"></iframe>` : `<div style="display:flex;align-items:center;justify-content:center;height:100%;color:var(--text-light-gray);font-size:13px;">Preview unavailable</div>`}</div>
        <div class="card-body">
          <div class="card-name">${el.name}</div>
          <div class="card-desc">${el.description}</div>
          <div class="card-meta">
            <span class="tag tag-category">${el.category}</span>
            <span class="tag tag-priority tag-${el.priority}">${el.priority}</span>
            ${phases}
          </div>
          <div class="card-id">${el.id}</div>
        </div>
      </div>`;
    }

    function renderGrid() {
      const grid = document.getElementById('grid');
      grid.innerHTML = elements.map(renderCard).join('');
    }

    // Filter logic
    let activeFilter = 'all';
    let searchQuery = '';

    function applyFilters() {
      const cards = document.querySelectorAll('.card');
      let visible = 0;
      cards.forEach(card => {
        let show = true;
        if (activeFilter !== 'all') {
          if (activeFilter === 'P0') {
            show = card.dataset.priority === 'P0';
          } else {
            show = card.dataset.category === activeFilter;
          }
        }
        if (show && searchQuery) {
          show = card.dataset.name.includes(searchQuery) || card.dataset.desc.includes(searchQuery) || card.dataset.phases.includes(searchQuery);
        }
        card.style.display = show ? '' : 'none';
        if (show) visible++;
      });
      document.getElementById('no-results').style.display = visible === 0 ? '' : 'none';
    }

    document.querySelectorAll('.filter-chip').forEach(chip => {
      chip.addEventListener('click', () => {
        document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
        chip.classList.add('active');
        activeFilter = chip.dataset.filter;
        applyFilters();
      });
    });

    document.getElementById('search').addEventListener('input', (e) => {
      searchQuery = e.target.value.toLowerCase();
      applyFilters();
    });
  </script>
</body>
</html>