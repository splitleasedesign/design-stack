<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library of Elements â€” Design Stack v2 | Run 2026-02-12_1357</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
/* ===== RESET & BASE ===== */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --primary-purple:#31135D;
  --secondary-purple:rgb(109,49,194);
  --accent-purple:rgb(140,104,238);
  --chat-purple:rgb(75,71,206);
  --bg-white:#ffffff;
  --bg-light:#f9fafb;
  --bg-light-gray:#f3f4f6;
  --bg-off-white:rgb(252,250,255);
  --text-dark:#1a1a1a;
  --text-gray:#6b7280;
  --text-light-gray:#9ca3af;
  --text-description:#374151;
  --border-color:#e5e7eb;
  --shadow-sm:0 1px 3px rgba(0,0,0,0.05);
  --shadow-md:0 2px 8px rgba(0,0,0,0.08);
  --shadow-lg:0 4px 16px rgba(0,0,0,0.1);
  --shadow-purple-md:0 4px 8px rgba(49,19,93,0.15);
  --shadow-purple-lg:0 6px 20px rgba(109,49,194,0.25);
  --rounded-sm:4px;
  --rounded-md:6px;
  --rounded-lg:8px;
  --rounded-xl:12px;
  --rounded-2xl:16px;
  --rounded-pill:20px;
  --font-inter:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  --font-dm:'DM Sans',sans-serif;
  --spacing-xs:4px;
  --spacing-sm:8px;
  --spacing-md:12px;
  --spacing-lg:16px;
  --spacing-xl:20px;
  --spacing-2xl:24px;
  --spacing-3xl:32px;
  --spacing-4xl:48px;
  --transition-fast:0.15s;
  --transition-base:0.2s;
  --transition-slow:0.3s;
}
html{scroll-behavior:smooth}
body{
  font-family:var(--font-inter);
  background:var(--bg-light);
  color:var(--text-dark);
  line-height:1.5;
  -webkit-font-smoothing:antialiased;
}

/* ===== HEADER ===== */
.lib-header{
  background:linear-gradient(135deg,#31135D 0%,#4a1f8a 50%,#5a2d8f 100%);
  padding:48px 32px 40px;
  position:relative;
  overflow:hidden;
}
.lib-header::before{
  content:'';position:absolute;top:-60%;right:-10%;width:500px;height:500px;
  background:radial-gradient(circle,rgba(140,104,238,0.15) 0%,transparent 70%);
  pointer-events:none;
}
.lib-header::after{
  content:'';position:absolute;bottom:-40%;left:-5%;width:400px;height:400px;
  background:radial-gradient(circle,rgba(75,71,206,0.12) 0%,transparent 70%);
  pointer-events:none;
}
.lib-header__inner{max-width:1320px;margin:0 auto;position:relative;z-index:1}
.lib-header__badge{
  display:inline-block;background:rgba(255,255,255,0.12);
  color:rgba(255,255,255,0.85);font-size:11px;font-weight:600;
  padding:4px 12px;border-radius:var(--rounded-pill);
  text-transform:uppercase;letter-spacing:0.8px;margin-bottom:16px;
  backdrop-filter:blur(4px);
}
.lib-header__title{
  font-size:36px;font-weight:800;color:#fff;margin-bottom:8px;letter-spacing:-0.5px;
}
.lib-header__sub{
  font-family:var(--font-dm);font-size:16px;color:rgba(255,255,255,0.7);
  max-width:600px;line-height:1.6;
}
.lib-header__meta{
  display:flex;gap:24px;margin-top:20px;flex-wrap:wrap;
}
.lib-header__meta-item{
  font-size:12px;color:rgba(255,255,255,0.55);font-family:var(--font-dm);
}
.lib-header__meta-item strong{color:rgba(255,255,255,0.85);font-weight:600}

/* ===== TOOLBAR ===== */
.lib-toolbar{
  position:sticky;top:0;z-index:100;
  background:rgba(255,255,255,0.92);
  backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border-color);
  padding:12px 32px;
  transition:box-shadow var(--transition-base);
}
.lib-toolbar.scrolled{box-shadow:var(--shadow-md)}
.lib-toolbar__inner{
  max-width:1320px;margin:0 auto;
  display:flex;align-items:center;gap:12px;flex-wrap:wrap;
}
.lib-search{
  position:relative;flex:1;min-width:220px;max-width:400px;
}
.lib-search__input{
  width:100%;padding:9px 14px 9px 36px;
  border:1px solid var(--border-color);border-radius:var(--rounded-lg);
  font-family:var(--font-inter);font-size:13px;
  background:var(--bg-white);color:var(--text-dark);
  transition:border-color var(--transition-fast);
  outline:none;
}
.lib-search__input:focus{border-color:var(--secondary-purple)}
.lib-search__icon{
  position:absolute;left:11px;top:50%;transform:translateY(-50%);
  color:var(--text-light-gray);font-size:14px;pointer-events:none;
}
.lib-filters{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.lib-filter-group{position:relative}
.lib-filter-btn{
  display:inline-flex;align-items:center;gap:5px;
  padding:7px 14px;border:1px solid var(--border-color);
  border-radius:var(--rounded-lg);background:var(--bg-white);
  font-family:var(--font-inter);font-size:12px;font-weight:500;
  color:var(--text-gray);cursor:pointer;
  transition:border-color var(--transition-fast),color var(--transition-fast);
  white-space:nowrap;
}
.lib-filter-btn:hover,.lib-filter-btn.active{
  border-color:var(--secondary-purple);color:var(--secondary-purple);
}
.lib-filter-btn .arrow{font-size:10px;margin-left:2px;transition:transform var(--transition-fast)}
.lib-filter-btn.active .arrow{transform:rotate(180deg)}
.lib-filter-dropdown{
  position:absolute;top:calc(100% + 4px);left:0;min-width:200px;
  background:var(--bg-white);border:1px solid var(--border-color);
  border-radius:var(--rounded-lg);box-shadow:var(--shadow-lg);
  padding:6px 0;display:none;z-index:200;
}
.lib-filter-dropdown.open{display:block}
.lib-filter-option{
  display:flex;align-items:center;gap:8px;
  padding:8px 14px;font-size:12px;color:var(--text-dark);
  cursor:pointer;transition:background var(--transition-fast);
}
.lib-filter-option:hover{background:var(--bg-light)}
.lib-filter-option input[type=checkbox]{accent-color:var(--secondary-purple)}
.lib-active-filters{display:flex;gap:6px;flex-wrap:wrap;align-items:center}
.lib-active-tag{
  display:inline-flex;align-items:center;gap:4px;
  padding:4px 10px;background:rgba(109,49,194,0.08);
  border-radius:var(--rounded-pill);font-size:11px;
  color:var(--secondary-purple);font-weight:500;cursor:pointer;
}
.lib-active-tag:hover{background:rgba(109,49,194,0.15)}
.lib-clear-btn{
  background:none;border:none;font-size:11px;
  color:var(--text-gray);cursor:pointer;text-decoration:underline;
  font-family:var(--font-inter);
}
.lib-count{
  font-size:12px;color:var(--text-light-gray);font-family:var(--font-dm);
  margin-left:auto;white-space:nowrap;
}

/* ===== GRID ===== */
.lib-grid-wrap{max-width:1320px;margin:0 auto;padding:24px 32px 64px}
.lib-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(340px,1fr));
  gap:20px;
}
.lib-empty{
  grid-column:1/-1;text-align:center;padding:80px 24px;
  color:var(--text-light-gray);font-size:15px;
}

/* ===== CARD ===== */
.lib-card{
  background:var(--bg-white);border:1px solid var(--border-color);
  border-radius:var(--rounded-xl);overflow:hidden;
  transition:box-shadow var(--transition-base),border-color var(--transition-base),transform var(--transition-base);
  cursor:pointer;display:flex;flex-direction:column;
}
.lib-card:hover{
  box-shadow:var(--shadow-purple-md);
  border-color:rgba(109,49,194,0.25);
  transform:translateY(-2px);
}
.lib-card__preview{
  width:100%;height:220px;border-bottom:1px solid var(--border-color);
  background:var(--bg-light);position:relative;overflow:hidden;
}
.lib-card__preview iframe{
  width:100%;height:100%;border:none;pointer-events:none;
  transform-origin:top left;
}
.lib-card__body{padding:16px 18px;flex:1;display:flex;flex-direction:column}
.lib-card__top-row{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}
.lib-card__cat{
  font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;
  padding:3px 9px;border-radius:var(--rounded-pill);
  background:rgba(109,49,194,0.08);color:var(--secondary-purple);
}
.lib-card__priority{
  font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;
  padding:3px 9px;border-radius:var(--rounded-pill);
}
.lib-card__priority--high{background:rgba(239,68,68,0.08);color:#dc2626}
.lib-card__priority--medium{background:rgba(245,158,11,0.08);color:#b45309}
.lib-card__priority--low{background:var(--bg-light-gray);color:var(--text-gray)}
.lib-card__id{font-size:10px;color:var(--text-light-gray);margin-left:auto;font-family:var(--font-dm)}
.lib-card__name{font-size:16px;font-weight:700;color:var(--text-dark);margin-bottom:6px;line-height:1.3}
.lib-card__desc{
  font-family:var(--font-dm);font-size:13px;color:var(--text-gray);
  line-height:1.5;margin-bottom:12px;
  display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;
  flex:1;
}
.lib-card__phases{display:flex;gap:4px;flex-wrap:wrap;margin-bottom:10px}
.lib-card__phase{
  font-size:10px;padding:2px 8px;border-radius:var(--rounded-sm);
  background:var(--bg-light-gray);color:var(--text-gray);font-weight:500;
}
.lib-card__sources{
  font-size:10px;color:var(--text-light-gray);font-family:var(--font-dm);
  border-top:1px solid var(--border-color);padding-top:10px;margin-top:auto;
}
.lib-card__sources strong{color:var(--text-gray);font-weight:600}

/* ===== MODAL ===== */
.lib-overlay{
  position:fixed;inset:0;background:rgba(49,19,93,0.5);
  z-index:1000;display:none;align-items:flex-start;justify-content:center;
  padding:40px 24px;overflow-y:auto;
  backdrop-filter:blur(4px);
  animation:fadeIn var(--transition-base) ease;
}
.lib-overlay.open{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.lib-modal{
  background:var(--bg-white);border-radius:var(--rounded-2xl);
  width:100%;max-width:900px;
  box-shadow:0 24px 64px rgba(49,19,93,0.3);
  animation:slideUp var(--transition-slow) ease;
  margin-bottom:40px;
}
.lib-modal__preview{
  width:100%;min-height:300px;max-height:450px;
  border-radius:var(--rounded-2xl) var(--rounded-2xl) 0 0;
  overflow:hidden;background:var(--bg-light);
  border-bottom:1px solid var(--border-color);
  position:relative;
}
.lib-modal__preview iframe{width:100%;height:400px;border:none}
.lib-modal__close{
  position:absolute;top:14px;right:14px;z-index:10;
  width:36px;height:36px;border-radius:50%;
  background:rgba(255,255,255,0.9);border:1px solid var(--border-color);
  display:flex;align-items:center;justify-content:center;
  font-size:18px;cursor:pointer;color:var(--text-dark);
  transition:background var(--transition-fast);
}
.lib-modal__close:hover{background:var(--bg-white)}
.lib-modal__content{padding:28px 32px 32px}
.lib-modal__header{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.lib-modal__title{font-size:24px;font-weight:800;color:var(--text-dark);flex:1;min-width:200px}
.lib-modal__badges{display:flex;gap:6px;flex-wrap:wrap;align-items:center}
.lib-modal__desc{
  font-family:var(--font-dm);font-size:14px;color:var(--text-description);
  line-height:1.7;margin-bottom:24px;
}
.lib-modal__section{margin-bottom:24px}
.lib-modal__section-title{
  font-size:13px;font-weight:700;color:var(--primary-purple);
  text-transform:uppercase;letter-spacing:0.6px;
  margin-bottom:12px;padding-bottom:6px;
  border-bottom:2px solid rgba(109,49,194,0.1);
}
.lib-modal__spec-grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:16px;
}
.lib-modal__spec-block{
  background:var(--bg-light);border-radius:var(--rounded-lg);padding:14px 16px;
}
.lib-modal__spec-block h4{
  font-size:11px;font-weight:700;color:var(--secondary-purple);
  text-transform:uppercase;letter-spacing:0.5px;margin-bottom:8px;
}
.lib-modal__spec-item{
  font-size:12px;color:var(--text-description);line-height:1.6;
  font-family:var(--font-dm);
}
.lib-modal__spec-item strong{color:var(--text-dark);font-weight:600}
.lib-modal__phases-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.lib-modal__sources-row{
  font-size:12px;color:var(--text-gray);font-family:var(--font-dm);
}
.lib-modal__sources-row code{
  background:var(--bg-light-gray);padding:2px 6px;
  border-radius:var(--rounded-sm);font-size:11px;color:var(--secondary-purple);
  margin:0 2px;
}
/* Before/After */
.lib-modal__compare{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.lib-modal__compare-col{border-radius:var(--rounded-lg);padding:16px}
.lib-modal__compare-col--before{background:rgba(239,68,68,0.04);border:1px solid rgba(239,68,68,0.12)}
.lib-modal__compare-col--after{background:rgba(34,197,94,0.04);border:1px solid rgba(34,197,94,0.12)}
.lib-modal__compare-label{
  font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:0.6px;
  margin-bottom:8px;
}
.lib-modal__compare-col--before .lib-modal__compare-label{color:#dc2626}
.lib-modal__compare-col--after .lib-modal__compare-label{color:#15803d}
.lib-modal__compare-text{font-family:var(--font-dm);font-size:13px;color:var(--text-description);line-height:1.6}
/* Copy spec */
.lib-modal__copy-table{width:100%;border-collapse:collapse}
.lib-modal__copy-table th{
  text-align:left;font-size:11px;font-weight:600;
  color:var(--text-gray);padding:6px 10px;
  border-bottom:1px solid var(--border-color);
}
.lib-modal__copy-table td{
  font-size:12px;font-family:var(--font-dm);color:var(--text-description);
  padding:6px 10px;border-bottom:1px solid var(--bg-light-gray);
}
.lib-modal__copy-table td code{
  background:var(--bg-light-gray);padding:1px 5px;border-radius:3px;
  font-size:11px;color:var(--secondary-purple);
}

/* ===== RESPONSIVE ===== */
@media(max-width:768px){
  .lib-header{padding:32px 20px}
  .lib-header__title{font-size:26px}
  .lib-toolbar{padding:10px 16px}
  .lib-toolbar__inner{gap:8px}
  .lib-search{min-width:160px;max-width:none;flex:1 1 100%}
  .lib-grid-wrap{padding:16px 16px 48px}
  .lib-grid{grid-template-columns:1fr;gap:16px}
  .lib-modal__content{padding:20px}
  .lib-modal__compare{grid-template-columns:1fr}
  .lib-modal__spec-grid{grid-template-columns:1fr}
  .lib-modal{max-width:100%}
  .lib-overlay{padding:20px 12px}
}
@media(max-width:480px){
  .lib-header__title{font-size:22px}
  .lib-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="lib-header">
  <div class="lib-header__inner">
    <span class="lib-header__badge">Design Stack v2 &middot; Layer 8 Element Factory</span>
    <h1 class="lib-header__title">Library of Elements</h1>
    <p class="lib-header__sub">Browsable catalog of production-ready UI elements for the Split Lease guest journey. Each element includes live preview, specs, and before/after analysis.</p>
    <div class="lib-header__meta">
      <span class="lib-header__meta-item"><strong>Run:</strong> 2026-02-12_1357</span>
      <span class="lib-header__meta-item"><strong>Journey:</strong> Guest</span>
      <span class="lib-header__meta-item"><strong>Elements:</strong> 15</span>
      <span class="lib-header__meta-item"><strong>Style:</strong> Split Lease Purple Palette</span>
    </div>
  </div>
</header>

<!-- ===== TOOLBAR ===== -->
<div class="lib-toolbar" id="toolbar">
  <div class="lib-toolbar__inner">
    <div class="lib-search">
      <span class="lib-search__icon">&#128269;</span>
      <input class="lib-search__input" type="text" id="searchInput" placeholder="Search elements by name or description...">
    </div>
    <div class="lib-filters">
      <!-- Category filter -->
      <div class="lib-filter-group">
        <button class="lib-filter-btn" data-filter="category">Category <span class="arrow">&#9662;</span></button>
        <div class="lib-filter-dropdown" data-filter-for="category">
          <label class="lib-filter-option"><input type="checkbox" value="card"> Card</label>
          <label class="lib-filter-option"><input type="checkbox" value="progress"> Progress</label>
          <label class="lib-filter-option"><input type="checkbox" value="badge"> Badge</label>
          <label class="lib-filter-option"><input type="checkbox" value="indicator"> Indicator</label>
          <label class="lib-filter-option"><input type="checkbox" value="typography"> Typography</label>
          <label class="lib-filter-option"><input type="checkbox" value="modal"> Modal</label>
          <label class="lib-filter-option"><input type="checkbox" value="banner"> Banner</label>
          <label class="lib-filter-option"><input type="checkbox" value="hero"> Hero</label>
        </div>
      </div>
      <!-- Phase filter -->
      <div class="lib-filter-group">
        <button class="lib-filter-btn" data-filter="phase">Phase <span class="arrow">&#9662;</span></button>
        <div class="lib-filter-dropdown" data-filter-for="phase">
          <label class="lib-filter-option"><input type="checkbox" value="discovery"> Discovery</label>
          <label class="lib-filter-option"><input type="checkbox" value="search"> Search</label>
          <label class="lib-filter-option"><input type="checkbox" value="listing_evaluation"> Listing Evaluation</label>
          <label class="lib-filter-option"><input type="checkbox" value="proposal_creation"> Proposal Creation</label>
          <label class="lib-filter-option"><input type="checkbox" value="negotiation"> Negotiation</label>
          <label class="lib-filter-option"><input type="checkbox" value="acceptance"> Acceptance</label>
          <label class="lib-filter-option"><input type="checkbox" value="active_lease"> Active Lease</label>
        </div>
      </div>
      <!-- Priority filter -->
      <div class="lib-filter-group">
        <button class="lib-filter-btn" data-filter="priority">Priority <span class="arrow">&#9662;</span></button>
        <div class="lib-filter-dropdown" data-filter-for="priority">
          <label class="lib-filter-option"><input type="checkbox" value="high"> High</label>
          <label class="lib-filter-option"><input type="checkbox" value="medium"> Medium</label>
          <label class="lib-filter-option"><input type="checkbox" value="low"> Low</label>
        </div>
      </div>
    </div>
    <div class="lib-active-filters" id="activeFilters"></div>
    <span class="lib-count" id="resultCount">15 elements</span>
  </div>
</div>

<!-- ===== GRID ===== -->
<div class="lib-grid-wrap">
  <div class="lib-grid" id="elementGrid"></div>
</div>

<!-- ===== MODAL ===== -->
<div class="lib-overlay" id="modalOverlay">
  <div class="lib-modal" id="modalContent"></div>
</div>

<script>
// ===== DATA =====
const ELEMENTS = [
  {
    id:"ui-001",name:"Stays Manager Hero Card",category:"card",
    source_elements:["works-003","communicates-001","looks-001","behaves-001","feels-001","feels-007"],
    journey_phases:["active_lease"],priority:"high",
    description:"The primary glanceable surface of the Stays Manager. Displays current-week status with check-in/check-out dates, property thumbnail, nightly rate, and active status badge. Uses System 1 visual hierarchy so returning guests (13+ weekly visits) get instant recognition without reading. Purple left accent border signals active lease; elevated shadow draws the eye on page load.",
    visual_spec:{layout:"Horizontal card, 100% container width, min-height 120px",background:"var(--bg-white) with var(--shadow-purple-md) elevation",border:"4px solid var(--secondary-purple) left accent border",border_radius:"var(--rounded-xl) (12px)",typography:{property_name:"Inter, 18px, semibold",dates:"DM Sans, 14px, medium, gray",rate:"Inter, 28px, bold, primary-purple"},spacing:{padding:"20px",gap:"16px",thumbnail:"80px x 80px"},color_usage:{accent_border:"secondary-purple",rate_text:"primary-purple",badge_bg:"secondary-purple + white text"}},
    interaction_spec:{load_behavior:"Auto-focus with scale animation (1.0 to 1.01, 200ms)",hover:"Shadow deepens, cursor pointer",click:"Navigate to full stay detail",weekly_evolution:"After week 4, date range shortens to 'Week 5 of 13' format"},
    copy_spec:{property_name:"{{property.name}}",date_range:"{{check_in}} - {{check_out}}",rate_display:"${{monthly_total}}/mo",nightly_secondary:"${{nightly_rate}}/night",badge_text:"Active",empty_state:"No active stays -- ready to find your next spot?"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.hero-card-demo{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--accent-purple:rgb(140,104,238);--bg-white:#ffffff;--bg-light:#f9fafb;--text-dark:#1a1a1a;--text-gray:#6b7280;--shadow-purple-md:0 4px 8px rgba(49,19,93,0.15);--shadow-purple-lg:0 6px 20px rgba(109,49,194,0.35);--rounded-xl:12px;--rounded-lg:8px;--rounded-pill:20px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.hero-card{display:flex;align-items:center;gap:20px;background:var(--bg-white);border-left:4px solid var(--secondary-purple);border-radius:var(--rounded-xl);padding:20px;box-shadow:var(--shadow-purple-md);transition:box-shadow .2s ease,transform .2s ease;cursor:pointer;max-width:560px}.hero-card:hover{box-shadow:var(--shadow-purple-lg);transform:scale(1.01)}.hero-card__thumb{width:80px;height:80px;border-radius:var(--rounded-lg);background:linear-gradient(135deg,var(--secondary-purple),var(--accent-purple));flex-shrink:0;display:flex;align-items:center;justify-content:center;color:white;font-size:28px}.hero-card__body{flex:1;min-width:0}.hero-card__title{font-size:18px;font-weight:600;color:var(--text-dark);margin:0 0 4px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.hero-card__dates{font-family:var(--font-dm);font-size:14px;font-weight:500;color:var(--text-gray);margin:0 0 8px 0}.hero-card__rate-row{display:flex;align-items:baseline;gap:8px}.hero-card__rate{font-size:28px;font-weight:700;color:var(--primary-purple)}.hero-card__rate-unit{font-size:16px;font-weight:500;color:var(--primary-purple)}.hero-card__nightly{font-size:13px;color:var(--text-gray)}.hero-card__badge{align-self:flex-start;background:var(--secondary-purple);color:white;font-size:12px;font-weight:600;padding:4px 12px;border-radius:var(--rounded-pill);white-space:nowrap}</style><div class="hero-card-demo"><div class="hero-card"><div class="hero-card__thumb">&#127968;</div><div class="hero-card__body"><h3 class="hero-card__title">Sunny Loft in Capitol Hill</h3><p class="hero-card__dates">Mar 3 &ndash; May 26, 2026</p><div class="hero-card__rate-row"><span class="hero-card__rate">$2,450<span class="hero-card__rate-unit">/mo</span></span><span class="hero-card__nightly">$82/night</span></div></div><span class="hero-card__badge">Active</span></div></div>`,
    before_after:{before:"Flat data table listing all stays with columns for property, dates, status, and rate. Guests must scan rows to find current stay. No visual hierarchy; active and past stays look identical.",after:"Elevated hero card with purple accent border immediately signals the active stay. Property name, dates, and monthly rate are visible in a single glance (under 2 seconds). Status badge confirms 'Active' without reading table headers."}
  },
  {
    id:"ui-002",name:"Date Change Option Cards",category:"card",
    source_elements:["works-001","works-002","communicates-003","looks-003","behaves-002","feels-004"],
    journey_phases:["active_lease"],priority:"high",
    description:"Three side-by-side cards presenting the Replace, Add Nights, and Remove Nights date change options. Each card shows the action type, a brief description, and the financial delta (+/- amount). Color-coded badges distinguish cost increases (amber) from savings (green). This is tap 1 of the three-tap date change flow.",
    visual_spec:{layout:"Three cards horizontal (flex, gap 12px), stacks on mobile",background:"White per card, border-color 1px border",border_radius:"8px per card",typography:{option_label:"Inter, 16px, semibold",description:"DM Sans, 12px, gray",delta:"Inter, 18px, bold"},color_usage:{cost_increase:"amber bg, #b45309 text",cost_decrease:"green bg, #15803d text",selected_border:"2px solid secondary-purple"}},
    interaction_spec:{tap_1:"Select with purple border + scale 1.02, others dim to 60%",tap_2:"Date picker appears inline below cards",tap_3:"Confirm button with financial summary",timing_target:"Under 60 seconds total flow"},
    copy_spec:{replace_label:"Replace Dates",replace_desc:"Swap your current dates for new ones",add_label:"Add Nights",add_desc:"Extend your stay with extra nights",remove_label:"Remove Nights",remove_desc:"Shorten your stay and save",delta_format:"+${{amount}} or -${{amount}}"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.datechg-demo{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--bg-white:#fff;--bg-light:#f9fafb;--bg-light-gray:#f3f4f6;--text-dark:#1a1a1a;--text-gray:#6b7280;--border-color:#e5e7eb;--rounded-lg:8px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.datechg-row{display:flex;gap:12px;max-width:600px}.datechg-card{flex:1;background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-lg);padding:16px;cursor:pointer;transition:border-color .1s ease,opacity .2s ease,transform .1s ease;text-align:center}.datechg-card:hover{border-color:var(--secondary-purple);transform:scale(1.02)}.datechg-card.selected{border:2px solid var(--secondary-purple);box-shadow:0 2px 8px rgba(109,49,194,0.2)}.datechg-card__icon{font-size:24px;margin-bottom:8px}.datechg-card__label{font-size:16px;font-weight:600;color:var(--text-dark);margin:0 0 4px 0}.datechg-card__desc{font-family:var(--font-dm);font-size:12px;color:var(--text-gray);margin:0 0 12px 0;line-height:1.4}.datechg-badge{display:inline-block;font-size:14px;font-weight:700;padding:4px 10px;border-radius:6px}.datechg-badge--increase{background:rgba(245,158,11,0.12);color:#b45309}.datechg-badge--decrease{background:rgba(34,197,94,0.12);color:#15803d}</style><div class="datechg-demo"><div class="datechg-row"><div class="datechg-card selected"><div class="datechg-card__icon">&#128260;</div><p class="datechg-card__label">Replace Dates</p><p class="datechg-card__desc">Swap your current dates for new ones</p><span class="datechg-badge datechg-badge--increase">+$164</span></div><div class="datechg-card"><div class="datechg-card__icon">&#10133;</div><p class="datechg-card__label">Add Nights</p><p class="datechg-card__desc">Extend your stay with extra nights</p><span class="datechg-badge datechg-badge--increase">+$246</span></div><div class="datechg-card"><div class="datechg-card__icon">&#10134;</div><p class="datechg-card__label">Remove Nights</p><p class="datechg-card__desc">Shorten your stay and save</p><span class="datechg-badge datechg-badge--decrease">-$82</span></div></div></div>`,
    before_after:{before:"Single 'Request Date Change' button leading to a multi-step form. Guest must choose change type from a dropdown, manually enter new dates, then wait for host response. Financial impact unknown until host replies. Average completion: 3+ minutes.",after:"Three clearly labeled cards with instant financial deltas. Guest sees cost impact before committing. Tapping a card immediately opens a date picker. Full flow completes in under 60 seconds."}
  },
  {
    id:"ui-003",name:"Single-Sum Financial Display",category:"typography",
    source_elements:["works-005","communicates-002","looks-002","behaves-003","feels-002"],
    journey_phases:["search","listing_evaluation","active_lease"],priority:"high",
    description:"Displays monthly cost as the primary financial figure with nightly rate as secondary context. Uses a 3:1 typographic size ratio to anchor the guest on the number that matches their mental model (monthly budgeting) rather than the nightly rate that causes sticker shock.",
    visual_spec:{layout:"Inline block, primary left-aligned",typography:{monthly_amount:"Inter, 28px, bold, primary-purple",monthly_unit:"Inter, 16px, medium, primary-purple",nightly_rate:"DM Sans, 13px, normal, gray",size_ratio:"3:1 visual weight"},spacing:{gap:"4px vertical or 12px horizontal"}},
    interaction_spec:{hover:"Nightly rate underlines, tooltip shows full breakdown",tap_nightly:"Expands to show seasonal rate ranges on detail page",static_on_cards:"No interaction on listing cards"},
    copy_spec:{monthly_format:"${{monthly_total}}/mo",nightly_format:"${{nightly_rate}}/night",example_monthly:"$2,450/mo",example_nightly:"$82/night"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.financial-demo{--primary-purple:#31135D;--text-gray:#6b7280;--bg-white:#fff;--bg-light:#f9fafb;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.financial-display{background:var(--bg-white);padding:20px;border-radius:12px;display:inline-block}.financial-primary{display:flex;align-items:baseline;gap:2px;margin-bottom:4px}.financial-amount{font-size:28px;font-weight:700;color:var(--primary-purple);line-height:1.2}.financial-unit{font-size:16px;font-weight:500;color:var(--primary-purple)}.financial-secondary{font-family:var(--font-dm);font-size:13px;color:var(--text-gray)}</style><div class="financial-demo"><div class="financial-display"><div class="financial-primary"><span class="financial-amount">$2,450</span><span class="financial-unit">/mo</span></div><span class="financial-secondary">$82/night</span></div></div>`,
    before_after:{before:"Nightly rate displayed as primary number ('$82/night') with no monthly context. Guests must mentally multiply by ~30 to compare against apartment rents. Creates sticker shock.",after:"Monthly total ($2,450/mo) displayed at 28px bold as the anchor number. Nightly rate ($82/night) shown at 13px gray as supporting context. Guest instantly compares against monthly rent."}
  },
  {
    id:"ui-004",name:"Status Badge System",category:"badge",
    source_elements:["looks-004"],
    journey_phases:["active_lease","negotiation","acceptance"],priority:"high",
    description:"A unified color-coded badge system used across the Stays Manager, proposals, and date changes. Four states: Active (purple), Completed (gray), Pending (amber), and Error/Action Needed (red). Consistent visual language reduces cognitive load across different contexts.",
    visual_spec:{layout:"Inline pill badge, auto-width",size:"12px font, padding 4px 12px, border-radius 20px",variants:{active:"secondary-purple bg, white text",completed:"light-gray bg, gray text",pending:"amber bg, #b45309 text",error:"red bg, #dc2626 text"},typography:"Inter, 12px, semibold, uppercase, tracking 0.5px"},
    interaction_spec:{static:"Non-interactive status indicators",animation:"Pending badges pulse (opacity 1 to 0.7, 2s infinite)"},
    copy_spec:{active:"Active",completed:"Completed",pending:"Pending",error:"Action Needed",proposal_variants:"Submitted | Under Review | Approved | Declined"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');.badge-demo{--secondary-purple:rgb(109,49,194);--bg-light-gray:#f3f4f6;--text-gray:#6b7280;--bg-light:#f9fafb;--font-inter:'Inter',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px;display:flex;gap:12px;flex-wrap:wrap;align-items:center}.status-badge{display:inline-block;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;padding:4px 12px;border-radius:20px;white-space:nowrap}.status-badge--active{background:rgb(109,49,194);color:#fff}.status-badge--completed{background:#f3f4f6;color:#6b7280}.status-badge--pending{background:rgba(245,158,11,0.12);color:#b45309;animation:pulse-pending 2s ease-in-out infinite}.status-badge--error{background:rgba(239,68,68,0.12);color:#dc2626}@keyframes pulse-pending{0%,100%{opacity:1}50%{opacity:0.7}}</style><div class="badge-demo"><span class="status-badge status-badge--active">Active</span><span class="status-badge status-badge--completed">Completed</span><span class="status-badge status-badge--pending">Pending</span><span class="status-badge status-badge--error">Action Needed</span></div>`,
    before_after:{before:"Inconsistent status indicators: some pages use text labels, others colored dots, others icons. 'Pending' looks different on proposals vs date changes. Guest must re-learn per context.",after:"Unified pill badges with consistent color mapping. Purple = active, amber = waiting, gray = done, red = action needed. Zero re-learning."}
  },
  {
    id:"ui-005",name:"Seasonal Rate Comparison",category:"card",
    source_elements:["communicates-004","looks-005","feels-002"],
    journey_phases:["listing_evaluation","active_lease"],priority:"high",
    description:"A two-column comparison showing the original rate versus the new rate when a date change crosses seasonal pricing boundaries. Includes a delta badge showing the per-night difference. Prevents price surprise by anchoring the guest on their existing rate before revealing the new one.",
    visual_spec:{layout:"Two-column side-by-side with centered delta",background:"White, 1px border, shadow-sm",border_radius:"8px",typography:{column_label:"DM Sans, 11px, uppercase, light-gray",rate_value:"Inter, 20px, bold",delta:"Inter, 12px, semibold"},color_usage:{original_rate:"text-dark",new_rate_higher:"#b45309",delta_increase:"amber bg, amber text"}},
    interaction_spec:{appears_when:"Date change crosses seasonal boundary",animation:"Slides in from bottom, 200ms",dismiss:"Cannot dismiss until confirmed or cancelled"},
    copy_spec:{current_label:"CURRENT RATE",new_label:"NEW RATE",delta_format:"+${{diff}}/night",example_current:"$82/night",example_new:"$95/night",example_delta:"+$13/night"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.rate-demo{--primary-purple:#31135D;--text-dark:#1a1a1a;--text-gray:#6b7280;--text-light-gray:#9ca3af;--bg-white:#fff;--bg-light:#f9fafb;--border-color:#e5e7eb;--shadow-sm:0 1px 3px rgba(0,0,0,0.05);--rounded-lg:8px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.rate-compare{display:flex;align-items:center;gap:0;background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-lg);box-shadow:var(--shadow-sm);max-width:400px;overflow:hidden}.rate-compare__col{flex:1;padding:16px 20px;text-align:center}.rate-compare__label{font-family:var(--font-dm);font-size:11px;text-transform:uppercase;letter-spacing:0.5px;color:var(--text-light-gray);margin:0 0 6px 0}.rate-compare__value{font-size:20px;font-weight:700;margin:0}.rate-compare__value--current{color:var(--text-dark)}.rate-compare__value--higher{color:#b45309}.rate-compare__delta{display:flex;flex-direction:column;align-items:center;padding:8px 12px;background:var(--bg-light);border-left:1px solid var(--border-color);border-right:1px solid var(--border-color)}.rate-compare__delta-arrow{font-size:16px;color:var(--text-light-gray);margin-bottom:4px}.rate-compare__delta-badge{font-size:12px;font-weight:600;padding:3px 8px;border-radius:6px;white-space:nowrap;background:rgba(245,158,11,0.12);color:#b45309}</style><div class="rate-demo"><div class="rate-compare"><div class="rate-compare__col"><p class="rate-compare__label">Current Rate</p><p class="rate-compare__value rate-compare__value--current">$82/night</p></div><div class="rate-compare__delta"><span class="rate-compare__delta-arrow">&rarr;</span><span class="rate-compare__delta-badge">+$13/night</span></div><div class="rate-compare__col"><p class="rate-compare__label">New Rate</p><p class="rate-compare__value rate-compare__value--higher">$95/night</p></div></div></div>`,
    before_after:{before:"New rate shown only after date change is submitted. Guest discovers the price difference in a confirmation email, leading to surprise and support tickets.",after:"Side-by-side comparison with original rate on left (anchor) and new rate on right. Delta badge makes the difference instantly scannable. Guest sees full financial picture before confirming."}
  },
  {
    id:"ui-006",name:"Proposal Progress Pipeline",category:"progress",
    source_elements:["communicates-005","looks-007","behaves-004","feels-003"],
    journey_phases:["proposal_creation","negotiation","acceptance"],priority:"high",
    description:"A horizontal progress tracker showing proposal status through stages: Submitted, Under Review, Approved/Declined. Each stage shows who owns the action (guest or host) and estimated time. Resolves the 'waiting ache' -- the anxiety of not knowing where your proposal stands.",
    visual_spec:{layout:"Horizontal stepper, 3-4 nodes connected by lines",background:"White, shadow-sm",border_radius:"8px",node_styles:{completed:"secondary-purple filled circle, white checkmark",current:"secondary-purple border ring with pulsing dot",upcoming:"border-color border, empty"},connector_line:"2px solid; completed = purple, upcoming = gray",typography:{stage_label:"Inter, 12px, semibold",action_owner:"DM Sans, 11px, gray",time_estimate:"DM Sans, 11px, light-gray"}},
    interaction_spec:{real_time:"Current stage pulses gently",hover_node:"Detail tooltip with timestamp",notification_link:"Push notification deep-links to pipeline",collapse:"On mobile: 'Step 2 of 3'"},
    copy_spec:{stage_1:"Submitted",stage_1_owner:"Your proposal is with the host",stage_2:"Under Review",stage_2_owner:"Host is reviewing your dates",stage_3_approved:"Approved",stage_3_declined:"Declined"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.pipeline-demo{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--text-dark:#1a1a1a;--text-gray:#6b7280;--text-light-gray:#9ca3af;--bg-white:#fff;--bg-light:#f9fafb;--border-color:#e5e7eb;--shadow-sm:0 1px 3px rgba(0,0,0,0.05);--rounded-lg:8px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.pipeline{background:var(--bg-white);border-radius:var(--rounded-lg);box-shadow:var(--shadow-sm);padding:24px;max-width:520px}.pipeline__track{display:flex;align-items:flex-start;position:relative}.pipeline__step{flex:1;display:flex;flex-direction:column;align-items:center;position:relative;z-index:1}.pipeline__node{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;margin-bottom:8px;position:relative}.pipeline__node--done{background:rgb(109,49,194);color:white}.pipeline__node--current{background:white;border:2px solid rgb(109,49,194)}.pipeline__node--current::after{content:'';width:10px;height:10px;background:rgb(109,49,194);border-radius:50%;animation:pulse-node 2s ease-in-out infinite}.pipeline__node--upcoming{background:white;border:2px solid #e5e7eb}.pipeline__label{font-size:12px;font-weight:600;color:var(--text-dark);text-align:center;margin-bottom:2px}.pipeline__owner{font-family:var(--font-dm);font-size:11px;color:var(--text-gray);text-align:center}.pipeline__time{font-family:var(--font-dm);font-size:11px;color:var(--text-light-gray);text-align:center}.pipeline__connector{position:absolute;top:16px;left:calc(16.66% + 16px);right:calc(16.66% + 16px);height:2px;display:flex}.pipeline__connector-seg{flex:1;height:2px}.pipeline__connector-seg--done{background:rgb(109,49,194)}.pipeline__connector-seg--pending{background:#e5e7eb}@keyframes pulse-node{0%,100%{opacity:1}50%{opacity:0.4}}</style><div class="pipeline-demo"><div class="pipeline"><div class="pipeline__track"><div class="pipeline__connector"><div class="pipeline__connector-seg pipeline__connector-seg--done"></div><div class="pipeline__connector-seg pipeline__connector-seg--pending"></div></div><div class="pipeline__step"><div class="pipeline__node pipeline__node--done">&#10003;</div><span class="pipeline__label">Submitted</span><span class="pipeline__owner">Sent to host</span></div><div class="pipeline__step"><div class="pipeline__node pipeline__node--current"></div><span class="pipeline__label">Under Review</span><span class="pipeline__owner">Waiting on host</span><span class="pipeline__time">~24h typical</span></div><div class="pipeline__step"><div class="pipeline__node pipeline__node--upcoming"></div><span class="pipeline__label">Decision</span><span class="pipeline__owner">Approved or declined</span></div></div></div></div>`,
    before_after:{before:"Single status label ('Pending') with no context about where in the process the proposal is. Guest checks repeatedly, anxiety increases with each check.",after:"Three-stage pipeline shows exactly where the proposal is. Pulsing dot signals active processing. Action-owner labels tell the guest they don't need to act. Time estimates set expectations."}
  },
  {
    id:"ui-007",name:"Schedule Compatibility Strip",category:"indicator",
    source_elements:["communicates-006","looks-006"],
    journey_phases:["search","listing_evaluation"],priority:"medium",
    description:"A compact day-of-week strip (S M T W T F S) on listing cards showing which days of the guest's desired schedule overlap with the listing's availability. Filled circles for matching days, hollow for mismatches. Lets guests filter by schedule compatibility at a glance.",
    visual_spec:{layout:"Inline row of 7 day indicators, ~140px wide",day_indicator:"20px circles",typography:{day_letter:"Inter, 10px, semibold, centered"},color_usage:{available:"chat-purple bg, white text",unavailable:"transparent, border, light-gray text",partial:"30% chat-purple bg, chat-purple text"}},
    interaction_spec:{static_on_card:"Non-interactive on listing cards",hover_on_detail:"Hovering shows available time slots",filter_integration:"Search filter highlights matching strips"},
    copy_spec:{days:"S M T W T F S",match_label:"{{count}} of 7 days match your schedule",full_match:"Perfect schedule match"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');.sched-demo{--chat-purple:rgb(75,71,206);--border-color:#e5e7eb;--text-light-gray:#9ca3af;--bg-white:#fff;--bg-light:#f9fafb;--font-inter:'Inter',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.sched-strip{display:inline-flex;gap:4px;background:var(--bg-white);padding:8px 12px;border-radius:8px}.sched-day{width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;line-height:1}.sched-day--available{background:rgb(75,71,206);color:#fff}.sched-day--unavailable{background:transparent;border:1px solid #e5e7eb;color:#9ca3af}.sched-day--partial{background:rgba(75,71,206,0.3);color:rgb(75,71,206)}.sched-label{font-size:11px;color:#6b7280;margin-top:6px}</style><div class="sched-demo"><div><div class="sched-strip"><span class="sched-day sched-day--unavailable">S</span><span class="sched-day sched-day--available">M</span><span class="sched-day sched-day--available">T</span><span class="sched-day sched-day--available">W</span><span class="sched-day sched-day--available">T</span><span class="sched-day sched-day--available">F</span><span class="sched-day sched-day--partial">S</span></div><p class="sched-label">5 of 7 days match your schedule</p></div></div>`,
    before_after:{before:"No schedule info on listing cards. Guest must open each listing and mentally compare against their schedule. High friction causes abandonment.",after:"Compact S-M-T-W-T-F-S strip shows compatibility at a glance. Guest can scan 10 cards in seconds."}
  },
  {
    id:"ui-008",name:"Payment Summary Bar",category:"progress",
    source_elements:["behaves-005"],
    journey_phases:["active_lease"],priority:"medium",
    description:"A horizontal progress bar showing total paid versus total owed for the current stay. Displays as a passive confidence signal -- the guest does not need to interact, just glance. Shows the paid amount, remaining amount, and next payment date.",
    visual_spec:{layout:"Full-width bar, 8px track with filled progress",background:"track: light-gray, fill: gradient purple",border_radius:"pill for track and fill",typography:{paid_label:"Inter, 12px, semibold, dark",total_label:"Inter, 12px, normal, gray",next_payment:"DM Sans, 11px, light-gray"}},
    interaction_spec:{hover_bar:"Tooltip: 'Paid: $4,900 of $7,350 | Next: $2,450 on Apr 1'",tap_bar:"Opens full payment history",animation:"Fill from 0 to current% over 600ms ease-out"},
    copy_spec:{paid_format:"${{paid}} paid",total_format:"of ${{total}}",next_format:"Next payment: ${{amount}} on {{date}}",example_paid:"$4,900 paid",example_total:"of $7,350"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.payment-demo{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--accent-purple:rgb(140,104,238);--text-dark:#1a1a1a;--text-gray:#6b7280;--text-light-gray:#9ca3af;--bg-white:#fff;--bg-light:#f9fafb;--bg-light-gray:#f3f4f6;--rounded-pill:20px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.payment-bar{background:var(--bg-white);padding:16px 20px;border-radius:8px;max-width:480px}.payment-bar__header{display:flex;justify-content:space-between;margin-bottom:8px}.payment-bar__paid{font-size:12px;font-weight:600;color:var(--text-dark)}.payment-bar__total{font-size:12px;color:var(--text-gray)}.payment-bar__track{width:100%;height:8px;background:var(--bg-light-gray);border-radius:20px;overflow:hidden;margin-bottom:8px}.payment-bar__fill{height:100%;border-radius:20px;background:linear-gradient(90deg,rgb(109,49,194),rgb(140,104,238));width:66.7%;transition:width 0.6s ease-out}.payment-bar__next{font-family:var(--font-dm);font-size:11px;color:var(--text-light-gray)}</style><div class="payment-demo"><div class="payment-bar"><div class="payment-bar__header"><span class="payment-bar__paid">$4,900 paid</span><span class="payment-bar__total">of $7,350</span></div><div class="payment-bar__track"><div class="payment-bar__fill"></div></div><span class="payment-bar__next">Next payment: $2,450 on Apr 1</span></div></div>`,
    before_after:{before:"Payment info buried in a separate 'Billing' tab. Guest must navigate away and scan rows to understand what they've paid.",after:"Compact progress bar sits right below the hero card. At a glance: 66% paid, next payment Apr 1. No navigation needed."}
  },
  {
    id:"ui-009",name:"Batched Review Card",category:"card",
    source_elements:["works-006","communicates-007","behaves-006","feels-005"],
    journey_phases:["active_lease"],priority:"medium",
    description:"A review prompt card that appears at natural milestone moments: Week 4, midpoint, and final stay. Instead of nagging with constant feedback requests, this batches administrative tasks into moments when the guest naturally reflects.",
    visual_spec:{layout:"Full-width card, flex row with icon left",background:"rgb(252,250,255) with subtle purple tint",border:"1px solid rgba(109,49,194,0.15)",border_radius:"12px",typography:{heading:"Inter, 16px, semibold",body:"DM Sans, 14px, normal, #374151",cta:"Inter, 12px, semibold, white on secondary-purple"}},
    interaction_spec:{trigger:"Appears at week 4, midpoint, and final week",dismiss:"Swipe/tap X, does not reappear until next milestone",cta_tap:"Opens inline review form (under 60 seconds)",snooze:"'Remind me later' pushes 48 hours"},
    copy_spec:{week4_heading:"You're settling in!",midpoint_heading:"Halfway through your stay",final_heading:"Your stay is wrapping up",cta:"Leave a Quick Review",snooze:"Remind me later"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.review-demo{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--text-dark:#1a1a1a;--text-description:#374151;--bg-off-white:rgb(252,250,255);--bg-light:#f9fafb;--rounded-xl:12px;--rounded-lg:8px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.review-card{display:flex;gap:16px;align-items:flex-start;background:var(--bg-off-white);border:1px solid rgba(109,49,194,0.15);border-radius:var(--rounded-xl);padding:20px;max-width:480px}.review-card__icon{width:40px;height:40px;background:rgba(109,49,194,0.1);border-radius:var(--rounded-lg);display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}.review-card__content{flex:1}.review-card__heading{font-size:16px;font-weight:600;color:var(--text-dark);margin:0 0 4px 0}.review-card__body{font-family:var(--font-dm);font-size:14px;color:var(--text-description);margin:0 0 12px 0;line-height:1.5}.review-card__actions{display:flex;align-items:center;gap:12px}.review-card__cta{background:rgb(109,49,194);color:white;border:none;padding:8px 16px;border-radius:var(--rounded-lg);font-family:var(--font-inter);font-size:12px;font-weight:600;cursor:pointer;transition:background .2s ease}.review-card__cta:hover{background:#31135D}.review-card__snooze{font-family:var(--font-dm);font-size:12px;color:#6b7280;cursor:pointer;text-decoration:underline;text-underline-offset:2px;border:none;background:none;padding:0}</style><div class="review-demo"><div class="review-card"><div class="review-card__icon">&#11088;</div><div class="review-card__content"><h4 class="review-card__heading">Halfway through your stay</h4><p class="review-card__body">Your feedback helps future guests find the right fit. It only takes a minute.</p><div class="review-card__actions"><button class="review-card__cta">Leave a Quick Review</button><button class="review-card__snooze">Remind me later</button></div></div></div></div>`,
    before_after:{before:"Review requests sent via email at random intervals, or persistent banner on every page. Creates 'administrative guilt'. Low completion rates.",after:"Review prompt appears only at natural milestones when the guest is reflective. Dismissible with snooze. Warm copy acknowledges journey stage. Feels like a conversation, not a chore."}
  },
  {
    id:"ui-010",name:"Flexibility Score Signal",category:"indicator",
    source_elements:["looks-008"],
    journey_phases:["search","listing_evaluation"],priority:"medium",
    description:"A small contextual trust indicator showing how flexible a host is with date changes. Displayed as a compact inline element on listing cards and detail pages. Uses a simple 3-level system (Low / Medium / High) rather than a numeric score.",
    visual_spec:{layout:"Inline, single line, icon + text, height 20px",typography:"DM Sans, 11px, medium",color_usage:{high:"#15803d (green)",medium:"#b45309 (amber)",low:"gray"},icon:"Calendar icon, 12px, color matches text"},
    interaction_spec:{hover:"Tooltip: 'This host typically approves date changes within 12 hours'",static:"Informational only, no click action"},
    copy_spec:{high:"Highly flexible host",medium:"Moderately flexible",low:"Limited flexibility"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500&display=swap');.flex-demo{--text-gray:#6b7280;--bg-white:#fff;--bg-light:#f9fafb;--font-dm:'DM Sans',sans-serif;font-family:var(--font-dm);background:var(--bg-light);padding:24px;display:flex;flex-direction:column;gap:12px}.flex-signal{display:inline-flex;align-items:center;gap:4px;font-size:11px;font-weight:500;background:var(--bg-white);padding:4px 10px;border-radius:6px;width:fit-content}.flex-signal__icon{font-size:12px}.flex-signal--high{color:#15803d}.flex-signal--medium{color:#b45309}.flex-signal--low{color:#6b7280}</style><div class="flex-demo"><span class="flex-signal flex-signal--high"><span class="flex-signal__icon">&#128197;</span> Highly flexible host</span><span class="flex-signal flex-signal--medium"><span class="flex-signal__icon">&#128197;</span> Moderately flexible</span><span class="flex-signal flex-signal--low"><span class="flex-signal__icon">&#128197;</span> Limited flexibility</span></div>`,
    before_after:{before:"No indication of host flexibility. Guest discovers flexibility only after submitting a date change request and waiting for response. Leads to failed expectations.",after:"Compact inline signal on listing cards. Guest can filter for 'Highly flexible' hosts during search. Sets expectations before proposal submission."}
  },
  {
    id:"ui-011",name:"Date Change Bottom Sheet",category:"modal",
    source_elements:["behaves-002","feels-004"],
    journey_phases:["active_lease"],priority:"high",
    description:"A mobile-native bottom sheet container for the three-tap date change flow. Slides up from the bottom, covering ~60% of viewport. Contains date change option cards, calendar picker, and confirmation summary. Designed to feel as fast as sending a text message.",
    visual_spec:{layout:"Bottom sheet, 60% viewport, max-width 480px on desktop",background:"White with shadow-2xl above",border_radius:"16px top, 0 bottom",handle:"40px x 4px centered pill, light-gray",typography:{sheet_title:"Inter, 18px, semibold",confirm_button:"Inter, 16px, semibold, white"}},
    interaction_spec:{open:"Slides up 300ms with spring easing",close:"Swipe down past 30% or tap overlay",internal_flow:"Choose type -> Pick dates -> Review + Confirm",confirm:"Purple gradient button, full width, bottom-fixed"},
    copy_spec:{title:"Change Your Dates",step_indicator:"Step {{current}} of 3",confirm_button:"Confirm Date Change",cancel:"Cancel"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.sheet-demo{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--accent-purple:rgb(140,104,238);--text-dark:#1a1a1a;--text-gray:#6b7280;--bg-white:#fff;--bg-light-gray:#f3f4f6;--shadow-2xl:0 6px 24px rgba(49,19,93,0.5);--rounded-2xl:16px;--rounded-lg:8px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:rgba(0,0,0,0.4);padding:80px 24px 0;min-height:420px;position:relative;border-radius:8px;overflow:hidden}.bottom-sheet{position:absolute;bottom:0;left:0;right:0;background:var(--bg-white);border-radius:var(--rounded-2xl) var(--rounded-2xl) 0 0;box-shadow:0 -4px 24px rgba(49,19,93,0.2);padding:12px 20px 24px;display:flex;flex-direction:column;gap:16px}.bottom-sheet__handle{width:40px;height:4px;background:var(--bg-light-gray);border-radius:2px;margin:0 auto 4px}.bottom-sheet__header{display:flex;justify-content:space-between;align-items:center}.bottom-sheet__title{font-size:18px;font-weight:600;color:var(--text-dark);margin:0}.bottom-sheet__step{font-family:var(--font-dm);font-size:13px;color:var(--text-gray)}.bottom-sheet__content{padding:8px 0;text-align:center;color:var(--text-gray);font-family:var(--font-dm);font-size:14px;border:1px dashed #e5e7eb;border-radius:var(--rounded-lg);padding:24px}.bottom-sheet__confirm{background:linear-gradient(135deg,#4B47CE 0%,#7C3AED 100%);color:white;border:none;padding:14px;border-radius:var(--rounded-lg);font-family:var(--font-inter);font-size:16px;font-weight:600;cursor:pointer;width:100%;transition:opacity .2s ease}.bottom-sheet__confirm:hover{opacity:0.9}</style><div class="sheet-demo"><div class="bottom-sheet"><div class="bottom-sheet__handle"></div><div class="bottom-sheet__header"><h3 class="bottom-sheet__title">Change Your Dates</h3><span class="bottom-sheet__step">Step 1 of 3</span></div><div class="bottom-sheet__content">Date change option cards go here (see ui-002)</div><button class="bottom-sheet__confirm">Confirm Date Change</button></div></div>`,
    before_after:{before:"Full-page form. Guest leaves Stays Manager, fills multi-field form, navigates back. 3+ context switches, 3+ minutes. Many guests text host instead.",after:"Bottom sheet slides up in-context. Three taps: choose type, pick dates, confirm. Zero context switches. Target time: under 60 seconds. Faster than texting."}
  },
  {
    id:"ui-012",name:"Notification Deep-Link Banner",category:"banner",
    source_elements:["behaves-007"],
    journey_phases:["active_lease","negotiation"],priority:"high",
    description:"A contextual banner that appears at the top of the Stays Manager when the guest arrives via a push notification deep-link. Highlights the specific item that triggered the notification. Auto-dismisses after 8 seconds or on user interaction.",
    visual_spec:{layout:"Full-width banner, fixed at top of content area",background:"linear-gradient purple tint, 8%",border:"1px solid rgba(109,49,194,0.2)",border_radius:"8px",typography:{message:"Inter, 14px, medium, primary-purple",action_link:"Inter, 12px, semibold, secondary-purple, underline"}},
    interaction_spec:{auto_dismiss:"Fades out after 8 seconds (300ms transition)",tap_link:"Scrolls to and highlights relevant element",tap_dismiss:"X button removes immediately",animation_in:"Slides down from top, 200ms ease-out"},
    copy_spec:{date_change_approved:"Your date change was approved! View updated dates",proposal_update:"Your proposal has been updated. See current status",payment_confirmed:"Payment confirmed. View your payment summary"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');.notif-demo{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--bg-light:#f9fafb;--rounded-lg:8px;--font-inter:'Inter',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.notif-banner{display:flex;align-items:center;justify-content:space-between;gap:12px;background:linear-gradient(135deg,rgba(47,20,91,0.08),rgba(109,49,194,0.08));border:1px solid rgba(109,49,194,0.2);border-radius:var(--rounded-lg);padding:12px 16px;max-width:520px;animation:slide-down .2s ease-out}.notif-banner__text{font-size:14px;font-weight:500;color:var(--primary-purple);margin:0}.notif-banner__link{color:var(--secondary-purple);font-size:12px;font-weight:600;text-decoration:underline;text-underline-offset:2px;cursor:pointer;white-space:nowrap}.notif-banner__close{background:none;border:none;color:var(--primary-purple);font-size:16px;cursor:pointer;padding:0 0 0 8px;opacity:0.5;transition:opacity .15s}.notif-banner__close:hover{opacity:1}@keyframes slide-down{from{transform:translateY(-10px);opacity:0}to{transform:translateY(0);opacity:1}}</style><div class="notif-demo"><div class="notif-banner"><p class="notif-banner__text">Your date change was approved!</p><span class="notif-banner__link">View updated dates</span><button class="notif-banner__close">&times;</button></div></div>`,
    before_after:{before:"Push notification opens Stays Manager at the top. Guest must scroll and search for what changed. Often can't find the update.",after:"Notification deep-links with highlighted banner at top. Banner states exactly what happened with a direct link. Guest confirms update in under 3 seconds."}
  },
  {
    id:"ui-013",name:"Listing Card (Schedule-First)",category:"card",
    source_elements:["communicates-006","looks-006","communicates-002"],
    journey_phases:["search","listing_evaluation"],priority:"medium",
    description:"A restructured search result listing card that leads with schedule compatibility and monthly price rather than nightly rate and generic amenities. Features schedule compatibility strip, single-sum financial display, property thumbnail, and flexibility score.",
    visual_spec:{layout:"Vertical card, 280px in grid or full-width in list",background:"White, 1px border",border_radius:"12px",sections:["Property thumbnail (16:10)","Schedule strip","Property name + location","Monthly price + nightly secondary","Flexibility score"],spacing:"12px between sections, 16px padding"},
    interaction_spec:{hover:"Card lifts with shadow, border transitions to purple 30%",tap:"Opens listing detail",save:"Heart icon in thumbnail corner",lazy_load:"Thumbnail lazy-loads, schedule from cached params"},
    copy_spec:{property_name:"{{property.name}}",location:"{{neighborhood}}, {{city}}",monthly:"${{monthly_total}}/mo",nightly:"${{nightly_rate}}/night",schedule_match:"{{match_count}} of 7 days match"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.listing-demo{--primary-purple:#31135D;--secondary-purple:rgb(109,49,194);--chat-purple:rgb(75,71,206);--text-dark:#1a1a1a;--text-gray:#6b7280;--text-light-gray:#9ca3af;--bg-white:#fff;--bg-light:#f9fafb;--border-color:#e5e7eb;--shadow-md:0 2px 8px rgba(0,0,0,0.08);--rounded-xl:12px;--rounded-lg:8px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.listing-card{width:280px;background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-xl);overflow:hidden;cursor:pointer;transition:box-shadow .2s ease,border-color .2s ease}.listing-card:hover{box-shadow:var(--shadow-md);border-color:rgba(109,49,194,0.3)}.listing-card__thumb{width:100%;height:175px;background:linear-gradient(135deg,#667eea,#764ba2);position:relative}.listing-card__save{position:absolute;top:10px;right:10px;width:28px;height:28px;background:rgba(255,255,255,0.85);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer;border:none}.listing-card__body{padding:12px 16px 16px}.listing-card__sched{display:flex;gap:3px;margin-bottom:10px}.listing-card__day{width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:600}.listing-card__day--on{background:rgb(75,71,206);color:#fff}.listing-card__day--off{background:transparent;border:1px solid #e5e7eb;color:#9ca3af}.listing-card__name{font-size:15px;font-weight:600;color:var(--text-dark);margin:0 0 2px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.listing-card__location{font-family:var(--font-dm);font-size:12px;color:var(--text-gray);margin:0 0 10px 0}.listing-card__price{display:flex;align-items:baseline;gap:6px;margin-bottom:6px}.listing-card__monthly{font-size:20px;font-weight:700;color:var(--primary-purple)}.listing-card__monthly-unit{font-size:14px;font-weight:500;color:var(--primary-purple)}.listing-card__nightly{font-size:12px;color:var(--text-gray)}.listing-card__flex{font-family:var(--font-dm);font-size:11px;font-weight:500;color:#15803d}</style><div class="listing-demo"><div class="listing-card"><div class="listing-card__thumb"><button class="listing-card__save">&hearts;</button></div><div class="listing-card__body"><div class="listing-card__sched"><span class="listing-card__day listing-card__day--off">S</span><span class="listing-card__day listing-card__day--on">M</span><span class="listing-card__day listing-card__day--on">T</span><span class="listing-card__day listing-card__day--on">W</span><span class="listing-card__day listing-card__day--on">T</span><span class="listing-card__day listing-card__day--on">F</span><span class="listing-card__day listing-card__day--off">S</span></div><h4 class="listing-card__name">Sunny Loft in Capitol Hill</h4><p class="listing-card__location">Capitol Hill, Seattle</p><div class="listing-card__price"><span class="listing-card__monthly">$2,450<span class="listing-card__monthly-unit">/mo</span></span><span class="listing-card__nightly">$82/night</span></div><span class="listing-card__flex">&#128197; Highly flexible host</span></div></div></div>`,
    before_after:{before:"Standard listing card leads with nightly rate, star rating, and generic amenity icons. No schedule information. Guest must open each listing to evaluate.",after:"Schedule strip shows day-of-week compatibility immediately. Monthly price is primary. Flexibility score shown. All critical decision factors visible without opening the listing."}
  },
  {
    id:"ui-014",name:"In-Platform Messaging Prompt",category:"card",
    source_elements:["works-004","feels-004"],
    journey_phases:["negotiation","active_lease"],priority:"high",
    description:"A contextual prompt that surfaces in-platform messaging when guests are most likely to reach for their text messaging app. Positioned as a convenience feature rather than a restriction. Competes directly with the temptation to text off-platform.",
    visual_spec:{layout:"Compact inline prompt, flex row",background:"rgb(252,250,255)",border:"1px solid rgba(75,71,206,0.15)",border_radius:"8px",typography:{prompt_text:"DM Sans, 13px, #374151",cta:"Inter, 12px, semibold, chat-purple"},icon:"Chat bubble, chat-purple, 16px"},
    interaction_spec:{tap_cta:"Opens messaging thread with pre-populated context",dismiss:"X hides for session, re-appears on next visit",appears_when:"After proposal submission, on stay detail, after date change"},
    copy_spec:{prompt_active_lease:"Need something? Message {{host_name}} -- no phone number needed.",cta:"Open Chat",subtext:"Avg response: {{response_time}}"},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.msg-demo{--chat-purple:rgb(75,71,206);--text-description:#374151;--text-gray:#6b7280;--bg-off-white:rgb(252,250,255);--bg-light:#f9fafb;--rounded-lg:8px;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;font-family:var(--font-inter);background:var(--bg-light);padding:24px}.msg-prompt{display:flex;align-items:center;gap:10px;background:var(--bg-off-white);border:1px solid rgba(75,71,206,0.15);border-radius:var(--rounded-lg);padding:12px 16px;max-width:440px}.msg-prompt__icon{font-size:18px;color:var(--chat-purple);flex-shrink:0}.msg-prompt__text{flex:1;font-family:var(--font-dm);font-size:13px;color:var(--text-description);margin:0;line-height:1.4}.msg-prompt__text em{font-size:11px;color:var(--text-gray);display:block;margin-top:2px;font-style:normal}.msg-prompt__cta{background:none;border:1px solid var(--chat-purple);color:var(--chat-purple);font-family:var(--font-inter);font-size:12px;font-weight:600;padding:6px 14px;border-radius:6px;cursor:pointer;white-space:nowrap;transition:background .2s ease,color .2s ease}.msg-prompt__cta:hover{background:var(--chat-purple);color:#fff}.msg-prompt__close{background:none;border:none;color:var(--text-gray);font-size:14px;cursor:pointer;padding:0;opacity:0.5}.msg-prompt__close:hover{opacity:1}</style><div class="msg-demo"><div class="msg-prompt"><span class="msg-prompt__icon">&#128172;</span><p class="msg-prompt__text">Need something? Message Sarah directly here.<em>Avg response: 2 hours</em></p><button class="msg-prompt__cta">Open Chat</button><button class="msg-prompt__close">&times;</button></div></div>`,
    before_after:{before:"Messaging feature buried in navigation. Guest defaults to texting host directly. Off-platform communication loses visibility into disputes and satisfaction signals.",after:"Contextual prompt appears when the guest is most likely to reach for their phone. Pre-populated context. Average response time shown. Messaging feels faster than composing a text."}
  },
  {
    id:"ui-015",name:"Discovery Value Proposition Hero",category:"hero",
    source_elements:["feels-006"],
    journey_phases:["discovery","search"],priority:"medium",
    description:"An honest, expectation-setting hero section for the discovery/landing page. Instead of aspirational marketing copy that overpromises, this hero acknowledges what mid-term flexible housing actually is. Builds trust by being transparent about the product rather than overselling.",
    visual_spec:{layout:"Full-width hero, centered text, max-width 640px, min-height 320px",background:"linear-gradient(135deg, #31135D 0%, #5a2d8f 100%)",typography:{headline:"Inter, 32px, bold, white",subhead:"DM Sans, 18px, normal, rgba(255,255,255,0.85)",cta_button:"Inter, 16px, semibold"},cta_button:"White bg, primary-purple text, 8px radius, 14px 28px padding",spacing:"64px top/bottom, 24px between headline/subhead, 32px before CTA"},
    interaction_spec:{cta_hover:"Shadow deepens, subtle scale 1.02",scroll_hint:"Down arrow at bottom",animation:"Headline fades in 400ms, subhead at 200ms delay"},
    copy_spec:{headline:"Stay somewhere that fits your schedule.",subhead:"Furnished places for a few weeks to a few months. Real pricing upfront. Flexible dates you can change.",cta:"Browse Listings",trust_signal:"No booking fees. Cancel up to 48 hours before check-in."},
    html_css_snippet:`<style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap');.hero-demo{--primary-purple:#31135D;--font-inter:'Inter',sans-serif;--font-dm:'DM Sans',sans-serif;--rounded-lg:8px;font-family:var(--font-inter)}.hero-section{background:linear-gradient(135deg,#31135D 0%,#5a2d8f 100%);padding:64px 24px;text-align:center;display:flex;flex-direction:column;align-items:center;min-height:320px;justify-content:center;border-radius:12px}.hero-section__headline{font-size:32px;font-weight:700;color:#fff;margin:0 0 16px 0;max-width:540px;line-height:1.2;animation:fade-in .4s ease-out}.hero-section__subhead{font-family:var(--font-dm);font-size:18px;font-weight:400;color:rgba(255,255,255,0.85);margin:0 0 32px 0;max-width:480px;line-height:1.6;animation:fade-in .4s ease-out .2s both}.hero-section__cta{background:#fff;color:#31135D;border:none;padding:14px 28px;border-radius:var(--rounded-lg);font-family:var(--font-inter);font-size:16px;font-weight:600;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;animation:fade-in .4s ease-out .4s both}.hero-section__cta:hover{transform:scale(1.02);box-shadow:0 4px 16px rgba(0,0,0,0.2)}.hero-section__trust{font-family:var(--font-dm);font-size:13px;color:rgba(255,255,255,0.6);margin:16px 0 0 0;animation:fade-in .4s ease-out .5s both}@keyframes fade-in{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}</style><div class="hero-demo"><div class="hero-section"><h1 class="hero-section__headline">Stay somewhere that fits your schedule.</h1><p class="hero-section__subhead">Furnished places for a few weeks to a few months. Real pricing upfront. Flexible dates you can change.</p><button class="hero-section__cta">Browse Listings</button><p class="hero-section__trust">No booking fees. Cancel up to 48 hours before check-in.</p></div></div>`,
    before_after:{before:"Generic hero with aspirational stock photography and vague tagline. Overpromises the experience, leading to disappointment. No pricing transparency.",after:"Honest headline acknowledges what the product is: schedule-flexible furnished housing. 'Real pricing' and 'flexible dates' lead the subhead. Trust signal addresses biggest fears (fees, cancellation). Sets accurate expectations from the first interaction."}
  }
];

// ===== STATE =====
const state = {
  search: '',
  filters: { category: [], phase: [], priority: [] }
};

// ===== HELPERS =====
function formatPhase(p) {
  return p.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
}
function escapeHtml(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// ===== RENDER CARD =====
function renderCard(el) {
  const priorityClass = `lib-card__priority--${el.priority}`;
  const phaseTags = el.journey_phases.map(p => `<span class="lib-card__phase">${formatPhase(p)}</span>`).join('');
  const sources = el.source_elements.join(', ');
  return `
    <div class="lib-card" data-id="${el.id}" onclick="openModal('${el.id}')">
      <div class="lib-card__preview">
        <iframe srcdoc="${escapeHtml(el.html_css_snippet)}" sandbox="allow-same-origin" loading="lazy" title="${escapeHtml(el.name)} preview"></iframe>
      </div>
      <div class="lib-card__body">
        <div class="lib-card__top-row">
          <span class="lib-card__cat">${el.category}</span>
          <span class="lib-card__priority ${priorityClass}">${el.priority}</span>
          <span class="lib-card__id">${el.id}</span>
        </div>
        <h3 class="lib-card__name">${el.name}</h3>
        <p class="lib-card__desc">${el.description}</p>
        <div class="lib-card__phases">${phaseTags}</div>
        <div class="lib-card__sources"><strong>Sources:</strong> ${sources}</div>
      </div>
    </div>`;
}

// ===== RENDER MODAL =====
function renderSpecItems(obj, depth) {
  if (!obj) return '';
  depth = depth || 0;
  let html = '';
  for (const [key, val] of Object.entries(obj)) {
    const label = key.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
    if (typeof val === 'object' && !Array.isArray(val)) {
      html += `<div class="lib-modal__spec-item"><strong>${label}:</strong></div>`;
      html += renderSpecItems(val, depth + 1);
    } else if (Array.isArray(val)) {
      html += `<div class="lib-modal__spec-item"><strong>${label}:</strong> ${val.join(', ')}</div>`;
    } else {
      html += `<div class="lib-modal__spec-item"><strong>${label}:</strong> ${val}</div>`;
    }
  }
  return html;
}

function renderModal(el) {
  const priorityClass = `lib-card__priority--${el.priority}`;
  const phaseTags = el.journey_phases.map(p => `<span class="lib-card__phase" style="font-size:11px;padding:3px 10px">${formatPhase(p)}</span>`).join('');
  const sourceCodes = el.source_elements.map(s => `<code>${s}</code>`).join(' ');

  return `
    <div class="lib-modal__preview" style="position:relative">
      <button class="lib-modal__close" onclick="closeModal()">&times;</button>
      <iframe srcdoc="${escapeHtml(el.html_css_snippet)}" sandbox="allow-same-origin" title="${escapeHtml(el.name)} large preview"></iframe>
    </div>
    <div class="lib-modal__content">
      <div class="lib-modal__header">
        <h2 class="lib-modal__title">${el.name}</h2>
        <div class="lib-modal__badges">
          <span class="lib-card__cat" style="font-size:11px;padding:4px 12px">${el.category}</span>
          <span class="lib-card__priority ${priorityClass}" style="font-size:11px;padding:4px 12px">${el.priority}</span>
          <span style="font-size:11px;color:var(--text-light-gray);font-family:var(--font-dm)">${el.id}</span>
        </div>
      </div>
      <p class="lib-modal__desc">${el.description}</p>

      <div class="lib-modal__phases-row">${phaseTags}</div>
      <div class="lib-modal__sources-row" style="margin-bottom:24px"><strong>Source elements:</strong> ${sourceCodes}</div>

      <!-- Visual Spec -->
      <div class="lib-modal__section">
        <h3 class="lib-modal__section-title">Visual Specification</h3>
        <div class="lib-modal__spec-grid">
          ${Object.entries(el.visual_spec).map(([k, v]) => {
            const label = k.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
            const content = typeof v === 'object' ? renderSpecItems(v) : `<div class="lib-modal__spec-item">${v}</div>`;
            return `<div class="lib-modal__spec-block"><h4>${label}</h4>${content}</div>`;
          }).join('')}
        </div>
      </div>

      <!-- Interaction Spec -->
      <div class="lib-modal__section">
        <h3 class="lib-modal__section-title">Interaction Specification</h3>
        <div class="lib-modal__spec-grid">
          ${Object.entries(el.interaction_spec).map(([k, v]) => {
            const label = k.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
            return `<div class="lib-modal__spec-block"><h4>${label}</h4><div class="lib-modal__spec-item">${v}</div></div>`;
          }).join('')}
        </div>
      </div>

      <!-- Copy Spec -->
      <div class="lib-modal__section">
        <h3 class="lib-modal__section-title">Copy Specification</h3>
        <table class="lib-modal__copy-table">
          <thead><tr><th>Key</th><th>Value</th></tr></thead>
          <tbody>
            ${Object.entries(el.copy_spec).map(([k, v]) => {
              const label = k.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
              const val = typeof v === 'object' ? JSON.stringify(v) : v;
              return `<tr><td><strong>${label}</strong></td><td><code>${val}</code></td></tr>`;
            }).join('')}
          </tbody>
        </table>
      </div>

      <!-- Before/After -->
      <div class="lib-modal__section">
        <h3 class="lib-modal__section-title">Before / After Comparison</h3>
        <div class="lib-modal__compare">
          <div class="lib-modal__compare-col lib-modal__compare-col--before">
            <div class="lib-modal__compare-label">Before</div>
            <div class="lib-modal__compare-text">${el.before_after.before}</div>
          </div>
          <div class="lib-modal__compare-col lib-modal__compare-col--after">
            <div class="lib-modal__compare-label">After</div>
            <div class="lib-modal__compare-text">${el.before_after.after}</div>
          </div>
        </div>
      </div>
    </div>`;
}

// ===== FILTERING =====
function getFiltered() {
  return ELEMENTS.filter(el => {
    // Search
    if (state.search) {
      const q = state.search.toLowerCase();
      if (!el.name.toLowerCase().includes(q) && !el.description.toLowerCase().includes(q) && !el.id.toLowerCase().includes(q)) return false;
    }
    // Category
    if (state.filters.category.length && !state.filters.category.includes(el.category)) return false;
    // Phase
    if (state.filters.phase.length && !el.journey_phases.some(p => state.filters.phase.includes(p))) return false;
    // Priority
    if (state.filters.priority.length && !state.filters.priority.includes(el.priority)) return false;
    return true;
  });
}

function renderGrid() {
  const filtered = getFiltered();
  const grid = document.getElementById('elementGrid');
  if (filtered.length === 0) {
    grid.innerHTML = '<div class="lib-empty">No elements match your search and filter criteria.</div>';
  } else {
    grid.innerHTML = filtered.map(renderCard).join('');
  }
  document.getElementById('resultCount').textContent = `${filtered.length} element${filtered.length !== 1 ? 's' : ''}`;
  renderActiveTags();
}

function renderActiveTags() {
  const container = document.getElementById('activeFilters');
  let tags = '';
  for (const [type, vals] of Object.entries(state.filters)) {
    for (const v of vals) {
      tags += `<span class="lib-active-tag" onclick="removeFilter('${type}','${v}')">${formatPhase(v)} &times;</span>`;
    }
  }
  if (tags) {
    tags += `<button class="lib-clear-btn" onclick="clearAllFilters()">Clear all</button>`;
  }
  container.innerHTML = tags;
}

function removeFilter(type, val) {
  state.filters[type] = state.filters[type].filter(v => v !== val);
  // Uncheck the checkbox
  const dropdown = document.querySelector(`[data-filter-for="${type}"]`);
  if (dropdown) {
    const cb = dropdown.querySelector(`input[value="${val}"]`);
    if (cb) cb.checked = false;
  }
  renderGrid();
}

function clearAllFilters() {
  state.filters = { category: [], phase: [], priority: [] };
  document.querySelectorAll('.lib-filter-dropdown input[type=checkbox]').forEach(cb => cb.checked = false);
  renderGrid();
}

// ===== MODAL =====
function openModal(id) {
  const el = ELEMENTS.find(e => e.id === id);
  if (!el) return;
  document.getElementById('modalContent').innerHTML = renderModal(el);
  document.getElementById('modalOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

// ===== EVENT LISTENERS =====
document.addEventListener('DOMContentLoaded', () => {
  renderGrid();

  // Search
  const searchInput = document.getElementById('searchInput');
  let searchTimer;
  searchInput.addEventListener('input', () => {
    clearTimeout(searchTimer);
    searchTimer = setTimeout(() => {
      state.search = searchInput.value.trim();
      renderGrid();
    }, 200);
  });

  // Filter dropdowns
  document.querySelectorAll('.lib-filter-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const filterType = btn.dataset.filter;
      const dropdown = document.querySelector(`[data-filter-for="${filterType}"]`);
      const isOpen = dropdown.classList.contains('open');
      // Close all
      document.querySelectorAll('.lib-filter-dropdown').forEach(d => d.classList.remove('open'));
      document.querySelectorAll('.lib-filter-btn').forEach(b => b.classList.remove('active'));
      if (!isOpen) {
        dropdown.classList.add('open');
        btn.classList.add('active');
      }
    });
  });

  // Checkbox changes
  document.querySelectorAll('.lib-filter-dropdown').forEach(dropdown => {
    dropdown.addEventListener('click', (e) => e.stopPropagation());
    dropdown.querySelectorAll('input[type=checkbox]').forEach(cb => {
      cb.addEventListener('change', () => {
        const filterType = dropdown.dataset.filterFor;
        const checked = Array.from(dropdown.querySelectorAll('input:checked')).map(c => c.value);
        state.filters[filterType] = checked;
        renderGrid();
      });
    });
  });

  // Close dropdowns on outside click
  document.addEventListener('click', () => {
    document.querySelectorAll('.lib-filter-dropdown').forEach(d => d.classList.remove('open'));
    document.querySelectorAll('.lib-filter-btn').forEach(b => b.classList.remove('active'));
  });

  // Modal overlay click
  document.getElementById('modalOverlay').addEventListener('click', (e) => {
    if (e.target === e.currentTarget) closeModal();
  });

  // Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });

  // Toolbar scroll shadow
  const toolbar = document.getElementById('toolbar');
  window.addEventListener('scroll', () => {
    toolbar.classList.toggle('scrolled', window.scrollY > 10);
  }, { passive: true });
});
</script>
</body>
</html>
