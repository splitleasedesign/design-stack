<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library of Elements ‚Äî Design Stack v2 | Run 2026-02-19_1001</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --primary-purple:#31135D;
  --secondary-purple:rgb(109,49,194);
  --accent-purple:rgb(140,104,238);
  --bg-white:#ffffff;
  --bg-light:#f9fafb;
  --bg-light-gray:#f3f4f6;
  --bg-off-white:rgb(252,250,255);
  --text-dark:#1a1a1a;
  --text-gray:#6b7280;
  --text-light-gray:#9ca3af;
  --text-description:#374151;
  --border-color:#e5e7eb;
  --shadow-sm:0 1px 3px rgba(0,0,0,0.05);
  --shadow-md:0 2px 8px rgba(0,0,0,0.08);
  --shadow-lg:0 4px 16px rgba(0,0,0,0.1);
  --shadow-purple-md:0 4px 8px rgba(49,19,93,0.15);
  --rounded-sm:4px;--rounded-md:6px;--rounded-lg:8px;--rounded-xl:12px;--rounded-2xl:16px;--rounded-pill:20px;
  --font-inter:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  --font-dm:'DM Sans',sans-serif;
  --transition-fast:0.15s;--transition-base:0.2s;--transition-slow:0.3s;
}
html{scroll-behavior:smooth}
body{font-family:var(--font-inter);background:var(--bg-light);color:var(--text-dark);line-height:1.5;-webkit-font-smoothing:antialiased}
.lib-header{background:linear-gradient(135deg,#31135D 0%,#4a1f8a 50%,#5a2d8f 100%);padding:48px 32px 40px;position:relative;overflow:hidden}
.lib-header::before{content:'';position:absolute;top:-60%;right:-10%;width:500px;height:500px;background:radial-gradient(circle,rgba(140,104,238,0.15) 0%,transparent 70%);pointer-events:none}
.lib-header__inner{max-width:1320px;margin:0 auto;position:relative;z-index:1}
.lib-header__badge{display:inline-block;background:rgba(255,255,255,0.12);color:rgba(255,255,255,0.85);font-size:11px;font-weight:600;padding:4px 12px;border-radius:var(--rounded-pill);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:16px;backdrop-filter:blur(4px)}
.lib-header__title{font-size:36px;font-weight:800;color:#fff;margin-bottom:8px;letter-spacing:-0.5px}
.lib-header__sub{font-family:var(--font-dm);font-size:16px;color:rgba(255,255,255,0.7);max-width:600px;line-height:1.6}
.lib-header__meta{display:flex;gap:24px;margin-top:20px;flex-wrap:wrap}
.lib-header__meta-item{font-size:12px;color:rgba(255,255,255,0.55);font-family:var(--font-dm)}
.lib-header__meta-item strong{color:rgba(255,255,255,0.85);font-weight:600}
.lib-toolbar{position:sticky;top:0;z-index:100;background:rgba(255,255,255,0.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border-color);padding:12px 32px;transition:box-shadow var(--transition-base)}
.lib-toolbar.scrolled{box-shadow:var(--shadow-md)}
.lib-toolbar__inner{max-width:1320px;margin:0 auto;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.lib-search{position:relative;flex:1;min-width:220px;max-width:400px}
.lib-search__input{width:100%;padding:9px 14px 9px 36px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);font-family:var(--font-inter);font-size:13px;background:var(--bg-white);color:var(--text-dark);transition:border-color var(--transition-fast);outline:none}
.lib-search__input:focus{border-color:var(--secondary-purple)}
.lib-search__icon{position:absolute;left:11px;top:50%;transform:translateY(-50%);color:var(--text-light-gray);font-size:14px;pointer-events:none}
.lib-filters{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.lib-filter-group{position:relative}
.lib-filter-btn{display:inline-flex;align-items:center;gap:5px;padding:7px 14px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);background:var(--bg-white);font-family:var(--font-inter);font-size:12px;font-weight:500;color:var(--text-gray);cursor:pointer;transition:border-color var(--transition-fast),color var(--transition-fast);white-space:nowrap}
.lib-filter-btn:hover,.lib-filter-btn.active{border-color:var(--secondary-purple);color:var(--secondary-purple)}
.lib-filter-btn .arrow{font-size:10px;margin-left:2px;transition:transform var(--transition-fast)}
.lib-filter-btn.active .arrow{transform:rotate(180deg)}
.lib-filter-dropdown{position:absolute;top:calc(100% + 4px);left:0;min-width:200px;background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-lg);box-shadow:var(--shadow-lg);padding:6px 0;display:none;z-index:200}
.lib-filter-dropdown.open{display:block}
.lib-filter-option{display:flex;align-items:center;gap:8px;padding:8px 14px;font-size:12px;color:var(--text-dark);cursor:pointer;transition:background var(--transition-fast)}
.lib-filter-option:hover{background:var(--bg-light)}
.lib-filter-option input[type=checkbox]{accent-color:var(--secondary-purple)}
.lib-count{font-size:12px;color:var(--text-light-gray);font-family:var(--font-dm);margin-left:auto;white-space:nowrap}
.lib-grid-wrap{max-width:1320px;margin:0 auto;padding:24px 32px 64px}
.lib-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:20px}
.lib-empty{grid-column:1/-1;text-align:center;padding:80px 24px;color:var(--text-light-gray);font-size:15px}
.lib-card{background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-xl);overflow:hidden;transition:box-shadow var(--transition-base),border-color var(--transition-base),transform var(--transition-base);cursor:pointer;display:flex;flex-direction:column}
.lib-card:hover{box-shadow:var(--shadow-purple-md);border-color:rgba(109,49,194,0.25);transform:translateY(-2px)}
.lib-card__preview{width:100%;height:220px;border-bottom:1px solid var(--border-color);background:var(--bg-light);position:relative;overflow:hidden}
.lib-card__preview iframe{width:100%;height:100%;border:none;pointer-events:none;transform-origin:top left}
.lib-card__body{padding:16px 18px;flex:1;display:flex;flex-direction:column}
.lib-card__top-row{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}
.lib-card__cat{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;padding:3px 9px;border-radius:var(--rounded-pill);background:rgba(109,49,194,0.08);color:var(--secondary-purple)}
.lib-card__id{font-size:10px;color:var(--text-light-gray);margin-left:auto;font-family:var(--font-dm)}
.lib-card__name{font-size:16px;font-weight:700;color:var(--text-dark);margin-bottom:6px;line-height:1.3}
.lib-card__desc{font-family:var(--font-dm);font-size:13px;color:var(--text-gray);line-height:1.5;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;flex:1}
.lib-card__phases{display:flex;gap:4px;flex-wrap:wrap;margin-bottom:10px}
.lib-card__phase{font-size:10px;padding:2px 8px;border-radius:var(--rounded-sm);background:var(--bg-light-gray);color:var(--text-gray);font-weight:500}
.lib-card__sources{font-size:10px;color:var(--text-light-gray);font-family:var(--font-dm);border-top:1px solid var(--border-color);padding-top:10px;margin-top:auto}
.lib-card__sources strong{color:var(--text-gray);font-weight:600}
.lib-overlay{position:fixed;inset:0;background:rgba(49,19,93,0.5);z-index:1000;display:none;align-items:flex-start;justify-content:center;padding:40px 24px;overflow-y:auto;backdrop-filter:blur(4px);animation:fadeIn var(--transition-base) ease}
.lib-overlay.open{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.lib-modal{background:var(--bg-white);border-radius:var(--rounded-2xl);width:100%;max-width:900px;box-shadow:0 24px 64px rgba(49,19,93,0.3);animation:slideUp var(--transition-slow) ease;margin-bottom:40px}
.lib-modal__preview{width:100%;min-height:300px;max-height:450px;border-radius:var(--rounded-2xl) var(--rounded-2xl) 0 0;overflow:hidden;background:var(--bg-light);border-bottom:1px solid var(--border-color);position:relative}
.lib-modal__preview iframe{width:100%;height:400px;border:none}
.lib-modal__close{position:absolute;top:14px;right:14px;z-index:10;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.9);border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;color:var(--text-dark);transition:background var(--transition-fast)}
.lib-modal__close:hover{background:var(--bg-white)}
.lib-modal__content{padding:28px 32px 32px}
.lib-modal__header{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.lib-modal__title{font-size:24px;font-weight:800;color:var(--text-dark);flex:1;min-width:200px}
.lib-modal__desc{font-family:var(--font-dm);font-size:14px;color:var(--text-description);line-height:1.7;margin-bottom:24px}
.lib-modal__section{margin-bottom:24px}
.lib-modal__section-title{font-size:13px;font-weight:700;color:var(--primary-purple);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid rgba(109,49,194,0.1)}
.lib-modal__phases-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.lib-modal__sources-row{font-size:12px;color:var(--text-gray);font-family:var(--font-dm)}
.lib-modal__sources-row code{background:var(--bg-light-gray);padding:2px 6px;border-radius:var(--rounded-sm);font-size:11px;color:var(--secondary-purple);margin:0 2px}
@media(max-width:768px){
  .lib-header{padding:32px 20px}.lib-header__title{font-size:26px}
  .lib-toolbar{padding:10px 16px}.lib-grid-wrap{padding:16px 16px 48px}
  .lib-grid{grid-template-columns:1fr;gap:16px}
  .lib-modal__content{padding:20px}.lib-modal{max-width:100%}.lib-overlay{padding:20px 12px}
}
</style>
</head>
<body>
<header class="lib-header">
  <div class="lib-header__inner">
    <span class="lib-header__badge">Design Stack v2 &middot; Layer 8 Element Factory</span>
    <h1 class="lib-header__title">Library of Elements</h1>
    <p class="lib-header__sub">Browsable catalog of production-ready UI elements for the Split Lease guest journey. Each element includes live preview and design specs.</p>
    <div class="lib-header__meta">
      <span class="lib-header__meta-item"><strong>Run:</strong> 2026-02-19_1001</span>
      <span class="lib-header__meta-item"><strong>Journey:</strong> Guest</span>
      <span class="lib-header__meta-item"><strong>Elements:</strong> 7</span>
      <span class="lib-header__meta-item"><strong>Style:</strong> Split Lease Purple Palette</span>
    </div>
  </div>
</header>

<div class="lib-toolbar" id="toolbar">
  <div class="lib-toolbar__inner">
    <div class="lib-search">
      <span class="lib-search__icon">&#128269;</span>
      <input class="lib-search__input" type="text" id="searchInput" placeholder="Search elements by name or description...">
    </div>
    <div class="lib-filters">
      <div class="lib-filter-group">
        <button class="lib-filter-btn" data-filter="phase">Phase <span class="arrow">&#9662;</span></button>
        <div class="lib-filter-dropdown" data-filter-for="phase">
          <label class="lib-filter-option"><input type="checkbox" value="acceptance"> acceptance</label>
          <label class="lib-filter-option"><input type="checkbox" value="active_lease"> active lease</label>
          <label class="lib-filter-option"><input type="checkbox" value="discovery"> discovery</label>
          <label class="lib-filter-option"><input type="checkbox" value="listing_evaluation"> listing evaluation</label>
          <label class="lib-filter-option"><input type="checkbox" value="move_in"> move in</label>
          <label class="lib-filter-option"><input type="checkbox" value="negotiation"> negotiation</label>
          <label class="lib-filter-option"><input type="checkbox" value="proposal_creation"> proposal creation</label>
          <label class="lib-filter-option"><input type="checkbox" value="search"> search</label>
        </div>
      </div>
    </div>
    <span class="lib-count" id="resultCount">7 elements</span>
  </div>
</div>

<div class="lib-grid-wrap">
  <div class="lib-grid" id="elementGrid"></div>
</div>

<div class="lib-overlay" id="modalOverlay">
  <div class="lib-modal" id="modalContent"></div>
</div>

<script>
const ELEMENTS = [
  {
      id: "ds-ui-1001-001",
      name: "Weekly Stay Pattern Builder - Interactive Night Selector with Live Cost",
      category: "card",
      source_elements: ["works-002","works-003","communicates-006","looks-002","looks-003","behaves-002","feels-003"],
      journey_phases: ["listing_evaluation","proposal_creation"],
      priority: "high",
      description: "Taline understood the Split Lease model only when Bryant offered a concrete pattern: 'five nights a week' (3:21), and her most urgent question was 'how much would it cost' (2:51) which went unanswered. This element combines the interactive stay pattern calendar with live cost feedback, letting guests tap nights on and off while seeing an estimated monthly cost update in real time. It replaces both the verbal model explanation that failed Taline and the pricing opacity that left her planning in a void. The d.school's principle that 'realizations come through the experience of trying, and failing, and trying again' (line 32) is enacted literally: the guest learns the model by manipulating it.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stay Pattern Builder</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --primary-purple: #31135D;
  --secondary-purple: rgb(109, 49, 194);
  --accent-purple: rgb(140, 104, 238);
  --bg-light-gray: #f3f4f6;
  --text-dark: #1a1a1a;
  --text-gray: #6b7280;
  --border-color: #e5e7eb;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg-light-gray);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.card {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  max-width: 520px;
  width: 100%;
  overflow: hidden;
}

.card-header {
  background: var(--primary-purple);
  padding: 20px 24px;
  color: #fff;
}

.card-header h2 {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 4px;
}

.card-header p {
  font-size: 13px;
  font-weight: 400;
  opacity: 0.8;
}

.card-body {
  padding: 24px;
}

.section-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-gray);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 12px;
}

.day-row {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
}

.day-block {
  flex: 1;
  aspect-ratio: 1;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 2px solid var(--border-color);
  background: #fff;
  min-height: 56px;
}

.day-block .day-initial {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-gray);
  transition: color 0.2s ease;
}

.day-block .day-label {
  font-size: 9px;
  font-weight: 500;
  color: #9ca3af;
  margin-top: 2px;
  transition: color 0.2s ease;
}

.day-block.active {
  background: var(--secondary-purple);
  border-color: var(--secondary-purple);
}

.day-block.active .day-initial {
  color: #fff;
}

.day-block.active .day-label {
  color: rgba(255,255,255,0.75);
}

.day-block:hover:not(.active) {
  border-color: var(--accent-purple);
  background: rgb(252, 250, 255);
}

.cost-panel {
  background: rgb(252, 250, 255);
  border: 1px solid rgba(109, 49, 194, 0.15);
  border-radius: 12px;
  padding: 20px;
  text-align: center;
  margin-bottom: 20px;
}

.cost-label {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-gray);
  margin-bottom: 6px;
}

.cost-value {
  font-family: 'DM Sans', sans-serif;
  font-size: 32px;
  font-weight: 700;
  color: var(--primary-purple);
  line-height: 1.2;
}

.cost-subtext {
  font-size: 12px;
  color: var(--text-gray);
  margin-top: 4px;
}

.cost-badge {
  display: inline-block;
  background: rgba(109, 49, 194, 0.1);
  color: var(--secondary-purple);
  font-size: 11px;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 20px;
  margin-top: 10px;
}

.nights-summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  background: var(--bg-light-gray);
  border-radius: 10px;
  margin-bottom: 20px;
}

.nights-summary .label {
  font-size: 13px;
  color: var(--text-gray);
  font-weight: 500;
}

.nights-summary .value {
  font-size: 14px;
  color: var(--text-dark);
  font-weight: 700;
}

.duration-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  background: var(--bg-light-gray);
  border-radius: 10px;
  margin-bottom: 20px;
}

.duration-row .label {
  font-size: 13px;
  color: var(--text-gray);
  font-weight: 500;
}

.duration-control {
  display: flex;
  align-items: center;
  gap: 12px;
}

.duration-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid var(--border-color);
  background: #fff;
  font-size: 16px;
  font-weight: 600;
  color: var(--secondary-purple);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
}

.duration-btn:hover {
  border-color: var(--secondary-purple);
  background: rgb(252, 250, 255);
}

.duration-value {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-dark);
  min-width: 60px;
  text-align: center;
}

.cta-btn {
  width: 100%;
  padding: 14px;
  background: var(--secondary-purple);
  color: #fff;
  border: none;
  border-radius: 12px;
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.cta-btn:hover {
  background: var(--primary-purple);
}

@media (max-width: 480px) {
  .card { border-radius: 12px; }
  .card-body { padding: 16px; }
  .day-block { min-height: 48px; }
  .day-block .day-initial { font-size: 13px; }
  .day-block .day-label { font-size: 8px; }
  .cost-value { font-size: 28px; }
}
</style>
</head>
<body>
<div class="card">
  <div class="card-header">
    <h2>Build Your Stay Pattern</h2>
    <p>Tap nights on and off to find the arrangement that fits your life</p>
  </div>
  <div class="card-body">
    <div class="section-label">Select your nights</div>
    <div class="day-row">
      <div class="day-block active">
        <span class="day-initial">M</span>
        <span class="day-label">Mon</span>
      </div>
      <div class="day-block active">
        <span class="day-initial">T</span>
        <span class="day-label">Tue</span>
      </div>
      <div class="day-block active">
        <span class="day-initial">W</span>
        <span class="day-label">Wed</span>
      </div>
      <div class="day-block active">
        <span class="day-initial">T</span>
        <span class="day-label">Thu</span>
      </div>
      <div class="day-block active">
        <span class="day-initial">F</span>
        <span class="day-label">Fri</span>
      </div>
      <div class="day-block">
        <span class="day-initial">S</span>
        <span class="day-label">Sat</span>
      </div>
      <div class="day-block">
        <span class="day-initial">S</span>
        <span class="day-label">Sun</span>
      </div>
    </div>
    <div class="cost-panel">
      <div class="cost-label">Estimated monthly cost</div>
      <div class="cost-value">~\$1,430</div>
      <div class="cost-subtext">5 nights/week at ~\$65/night</div>
      <span class="cost-badge">Estimated ‚Äî confirmed by host</span>
    </div>
    <div class="nights-summary">
      <span class="label">Nights per week</span>
      <span class="value">5 nights (Mon‚ÄìFri)</span>
    </div>
    <div class="duration-row">
      <span class="label">Duration</span>
      <div class="duration-control">
        <span class="duration-btn">‚àí</span>
        <span class="duration-value">8 weeks</span>
        <span class="duration-btn">+</span>
      </div>
    </div>
    <button class="cta-btn">Continue with this pattern</button>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1001-002",
      name: "Mismatch-to-Alternative Bridge Card - Redirect Without Rejection",
      category: "card",
      source_elements: ["works-001","works-002","communicates-003","looks-004","behaves-003","feels-002"],
      journey_phases: ["listing_evaluation","negotiation"],
      priority: "high",
      description: "When Bryant told Taline 'unfortunately I won't be able to help you with that' (3:09), her primary need was rejected with no immediately visible alternative. She had to self-generate a solution under pressure. This bridge card ensures the constraint and the alternative appear as a single perceptual unit, so the guest never sees a 'no' without simultaneously seeing a 'yes.' The d.school principle of being 'hard on work but soft on people' (line 43) is embodied: the constraint is stated with clarity while the alternative dominates the visual weight. This directly addresses the highest dropout moment in Taline's journey -- the rejection that could have ended the conversation.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mismatch Bridge Card</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --primary-purple: #31135D;
  --secondary-purple: rgb(109, 49, 194);
  --accent-purple: rgb(140, 104, 238);
  --bg-light-gray: #f3f4f6;
  --text-dark: #1a1a1a;
  --text-gray: #6b7280;
  --border-color: #e5e7eb;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg-light-gray);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.bridge-card {
  max-width: 520px;
  width: 100%;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  overflow: hidden;
  border-top: 4px solid #f59e0b;
}

.bridge-header {
  padding: 16px 20px 12px;
}

.bridge-ack {
  font-size: 12px;
  font-weight: 500;
  color: #9ca3af;
  margin-bottom: 6px;
}

.bridge-constraint {
  font-size: 14px;
  font-weight: 500;
  color: #b45309;
  display: flex;
  align-items: center;
  gap: 8px;
}

.bridge-constraint .icon {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #fef3c7;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  flex-shrink: 0;
}

.bridge-divider {
  height: 1px;
  background: var(--border-color);
  margin: 0 20px;
}

.bridge-alternative {
  padding: 20px;
  background: rgb(252, 250, 255);
}

.alt-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--secondary-purple);
  margin-bottom: 10px;
}

.alt-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.alt-pattern {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.alt-pattern-title {
  font-size: 17px;
  font-weight: 700;
  color: var(--text-dark);
}

.alt-pattern-desc {
  font-size: 13px;
  color: var(--text-gray);
}

.alt-price {
  text-align: right;
}

.alt-price-value {
  font-family: 'DM Sans', sans-serif;
  font-size: 22px;
  font-weight: 700;
  color: var(--primary-purple);
}

.alt-price-unit {
  font-size: 11px;
  color: var(--text-gray);
}

.alt-days {
  display: flex;
  gap: 6px;
  margin-bottom: 16px;
}

.alt-day {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
}

.alt-day.on {
  background: var(--secondary-purple);
  color: #fff;
}

.alt-day.off {
  background: var(--bg-light-gray);
  color: #9ca3af;
}

.social-proof {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: rgba(109, 49, 194, 0.06);
  border-radius: 8px;
  margin-bottom: 16px;
}

.social-proof .icon {
  font-size: 14px;
}

.social-proof .text {
  font-size: 12px;
  font-weight: 500;
  color: var(--secondary-purple);
}

.alt-actions {
  display: flex;
  gap: 10px;
}

.btn-try {
  flex: 1;
  padding: 12px;
  background: var(--secondary-purple);
  color: #fff;
  border: none;
  border-radius: 10px;
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.btn-try:hover {
  background: var(--primary-purple);
}

.btn-custom {
  padding: 12px 16px;
  background: #fff;
  color: var(--secondary-purple);
  border: 1.5px solid var(--border-color);
  border-radius: 10px;
  font-family: 'Inter', sans-serif;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: border-color 0.2s ease;
}

.btn-custom:hover {
  border-color: var(--secondary-purple);
}

@media (max-width: 480px) {
  .bridge-card { border-radius: 12px; }
  .bridge-alternative { padding: 16px; }
  .alt-pattern-title { font-size: 15px; }
  .alt-price-value { font-size: 20px; }
  .alt-day { width: 32px; height: 32px; font-size: 11px; }
  .alt-actions { flex-direction: column; }
}
</style>
</head>
<body>
<div class="bridge-card">
  <div class="bridge-header">
    <div class="bridge-ack">You are looking for a 7-night stay</div>
    <div class="bridge-constraint">
      <span class="icon">‚ö†</span>
      This listing offers part-time stays of 2‚Äì5 nights per week
    </div>
  </div>
  <div class="bridge-divider"></div>
  <div class="bridge-alternative">
    <div class="alt-label">Recommended for you</div>
    <div class="alt-content">
      <div class="alt-pattern">
        <div class="alt-pattern-title">Monday ‚Äì Friday stays</div>
        <div class="alt-pattern-desc">5 nights per week, weekends free</div>
      </div>
      <div class="alt-price">
        <div class="alt-price-value">~\$1,430</div>
        <div class="alt-price-unit">/month estimated</div>
      </div>
    </div>
    <div class="alt-days">
      <div class="alt-day on">M</div>
      <div class="alt-day on">T</div>
      <div class="alt-day on">W</div>
      <div class="alt-day on">T</div>
      <div class="alt-day on">F</div>
      <div class="alt-day off">S</div>
      <div class="alt-day off">S</div>
    </div>
    <div class="social-proof">
      <span class="icon">‚òÖ</span>
      <span class="text">Most popular pattern in North Bergen ‚Äî guests save vs. full-time rates</span>
    </div>
    <div class="alt-actions">
      <button class="btn-try">Try this pattern</button>
      <button class="btn-custom">Customize</button>
    </div>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1001-003",
      name: "Post-Call Status Tracker - Structured Wait with Visible Progress",
      category: "card",
      source_elements: ["works-004","communicates-004","looks-005","behaves-004","feels-004"],
      journey_phases: ["proposal_creation","negotiation","acceptance"],
      priority: "high",
      description: "Taline's call ended with 'I can talk to him and get back to you on that' (5:22) and 'feel free to text me' (6:20) -- zero written record, zero status visibility, zero timeline. For a guest with a lease ending and a child's school commute at stake, this unstructured void is the highest-risk dropout gap. This status tracker converts the opaque wait into a visible, stepped process with a specific timeline and captured details. The d.school principle that 'success is never about a single moment of insight' (line 69) is communicated through the stepper: the callback is step 2 of 4, not a single make-or-break moment. This addresses a post-conversion retention moment by keeping the guest engaged during the waiting period.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Status Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --primary-purple: #31135D;
  --secondary-purple: rgb(109, 49, 194);
  --accent-purple: rgb(140, 104, 238);
  --bg-light-gray: #f3f4f6;
  --text-dark: #1a1a1a;
  --text-gray: #6b7280;
  --border-color: #e5e7eb;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg-light-gray);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.tracker {
  max-width: 480px;
  width: 100%;
}

.next-step-panel {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  padding: 20px;
  margin-bottom: 16px;
  border-left: 4px solid var(--secondary-purple);
}

.next-step-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--secondary-purple);
  margin-bottom: 8px;
}

.next-step-text {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 6px;
  line-height: 1.4;
}

.next-step-timeline {
  font-size: 13px;
  color: var(--text-gray);
  display: flex;
  align-items: center;
  gap: 6px;
}

.next-step-timeline .dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--secondary-purple);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

.stepper-card {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  padding: 24px;
  margin-bottom: 16px;
}

.stepper {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.step {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  position: relative;
}

.step-indicator {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-shrink: 0;
}

.step-node {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: #fff;
  flex-shrink: 0;
}

.step-node.done {
  background: var(--secondary-purple);
}

.step-node.active {
  background: var(--accent-purple);
  box-shadow: 0 0 0 4px rgba(140, 104, 238, 0.2);
}

.step-node.future {
  background: var(--border-color);
  color: var(--text-gray);
}

.step-line {
  width: 2px;
  height: 28px;
  margin: 4px 0;
}

.step-line.done {
  background: var(--secondary-purple);
}

.step-line.future {
  background: var(--border-color);
}

.step-content {
  padding-bottom: 20px;
}

.step-content:last-child {
  padding-bottom: 0;
}

.step-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 2px;
}

.step-title.muted {
  color: #9ca3af;
}

.step-desc {
  font-size: 12px;
  color: var(--text-gray);
}

.summary-card {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  padding: 20px;
}

.summary-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 14px;
}

.summary-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--bg-light-gray);
}

.summary-row:last-child {
  border-bottom: none;
}

.summary-label {
  font-size: 12px;
  color: var(--text-gray);
  font-weight: 500;
}

.summary-value {
  font-size: 13px;
  color: var(--text-dark);
  font-weight: 600;
  font-family: 'DM Sans', sans-serif;
}

.contact-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--bg-light-gray);
  border-radius: 10px;
  margin-top: 14px;
}

.contact-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--primary-purple);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 600;
}

.contact-info .name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-dark);
}

.contact-info .role {
  font-size: 11px;
  color: var(--text-gray);
}

@media (max-width: 480px) {
  .next-step-text { font-size: 15px; }
  .stepper-card { padding: 16px; }
  .summary-card { padding: 16px; }
}
</style>
</head>
<body>
<div class="tracker">
  <div class="next-step-panel">
    <div class="next-step-label">What happens next</div>
    <div class="next-step-text">Bryant is confirming availability with the host</div>
    <div class="next-step-timeline">
      <span class="dot"></span>
      Expected response within 24 hours
    </div>
  </div>

  <div class="stepper-card">
    <div class="stepper">
      <div class="step">
        <div class="step-indicator">
          <div class="step-node done">‚úì</div>
          <div class="step-line done"></div>
        </div>
        <div class="step-content">
          <div class="step-title">Your needs captured</div>
          <div class="step-desc">Mon‚ÄìFri stays, starting Dec 15</div>
        </div>
      </div>
      <div class="step">
        <div class="step-indicator">
          <div class="step-node active">2</div>
          <div class="step-line future"></div>
        </div>
        <div class="step-content">
          <div class="step-title">Host review in progress</div>
          <div class="step-desc">Bryant is checking with Ken</div>
        </div>
      </div>
      <div class="step">
        <div class="step-indicator">
          <div class="step-node future">3</div>
          <div class="step-line future"></div>
        </div>
        <div class="step-content">
          <div class="step-title muted">Pricing proposal</div>
          <div class="step-desc">You will receive a confirmed price</div>
        </div>
      </div>
      <div class="step">
        <div class="step-indicator">
          <div class="step-node future">4</div>
        </div>
        <div class="step-content">
          <div class="step-title muted">Your confirmation</div>
          <div class="step-desc">Review and accept the arrangement</div>
        </div>
      </div>
    </div>
  </div>

  <div class="summary-card">
    <div class="summary-title">Your request details</div>
    <div class="summary-row">
      <span class="summary-label">Pattern</span>
      <span class="summary-value">Mon ‚Äì Fri (5 nights)</span>
    </div>
    <div class="summary-row">
      <span class="summary-label">Start date</span>
      <span class="summary-value">Dec 15, 2025</span>
    </div>
    <div class="summary-row">
      <span class="summary-label">Area</span>
      <span class="summary-value">North Bergen / Union City</span>
    </div>
    <div class="summary-row">
      <span class="summary-label">Estimated cost</span>
      <span class="summary-value">\$55‚Äì\$85/night</span>
    </div>
    <div class="contact-row">
      <div class="contact-avatar">B</div>
      <div class="contact-info">
        <div class="name">Bryant</div>
        <div class="role">Your housing advisor</div>
      </div>
    </div>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1001-004",
      name: "Life-Context Commute Evaluation Card - Location Fit at a Glance",
      category: "card",
      source_elements: ["works-005","communicates-005","looks-007","feels-007"],
      journey_phases: ["listing_evaluation","move_in"],
      priority: "high",
      description: "Taline's housing decision is inseparable from her son's school commute: 'I don't want to stay at my mom because my job for me to commute and have to pick up my son from school far from me' (4:25). No listing page captures this. This card overlays commute times to the guest's key life locations on a listing, transforming property-centric evaluation into life-centric evaluation. The d.school's principle of 'engaging people intentionally to learn more about their lives' (line 52) is made visible: the platform shows the guest it understands what is at stake -- not just a room, but a family's daily routine.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Commute Evaluation</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --primary-purple: #31135D;
  --secondary-purple: rgb(109, 49, 194);
  --accent-purple: rgb(140, 104, 238);
  --bg-light-gray: #f3f4f6;
  --text-dark: #1a1a1a;
  --text-gray: #6b7280;
  --border-color: #e5e7eb;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg-light-gray);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.listing-card {
  max-width: 480px;
  width: 100%;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  overflow: hidden;
}

.listing-image {
  width: 100%;
  height: 200px;
  background: linear-gradient(135deg, #31135D 0%, #5a2d8f 50%, rgb(109, 49, 194) 100%);
  position: relative;
  display: flex;
  align-items: flex-end;
  padding: 12px;
}

.category-badge {
  position: absolute;
  top: 12px;
  left: 12px;
  background: rgba(255,255,255,0.95);
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 600;
  color: var(--primary-purple);
  backdrop-filter: blur(4px);
}

.price-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  background: rgba(255,255,255,0.95);
  padding: 6px 10px;
  border-radius: 8px;
  font-family: 'DM Sans', sans-serif;
  font-size: 13px;
  font-weight: 700;
  color: var(--primary-purple);
  backdrop-filter: blur(4px);
}

.commute-badges {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.commute-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 5px 10px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  backdrop-filter: blur(8px);
}

.commute-pill.good {
  background: rgba(255,255,255,0.92);
  color: var(--secondary-purple);
}

.commute-pill.warn {
  background: rgba(255,243,226,0.92);
  color: #b45309;
}

.commute-pill .icon {
  font-size: 13px;
}

.listing-body {
  padding: 20px;
}

.listing-title {
  font-size: 17px;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 4px;
}

.listing-location {
  font-size: 13px;
  color: var(--text-gray);
  margin-bottom: 16px;
}

.commute-detail-section {
  background: rgb(252, 250, 255);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}

.commute-detail-title {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--secondary-purple);
  margin-bottom: 12px;
}

.commute-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid rgba(109, 49, 194, 0.08);
}

.commute-row:last-child {
  border-bottom: none;
}

.commute-dest {
  display: flex;
  align-items: center;
  gap: 10px;
}

.commute-icon {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 15px;
}

.commute-icon.work {
  background: rgba(109, 49, 194, 0.1);
}

.commute-icon.school {
  background: rgba(109, 49, 194, 0.1);
}

.commute-icon.home {
  background: var(--bg-light-gray);
}

.commute-dest-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-dark);
}

.commute-dest-name {
  font-size: 11px;
  color: var(--text-gray);
}

.commute-time {
  font-family: 'DM Sans', sans-serif;
  font-size: 15px;
  font-weight: 700;
}

.commute-time.good {
  color: var(--secondary-purple);
}

.commute-time.warn {
  color: #b45309;
}

.commute-time .unit {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-gray);
  margin-left: 2px;
}

.compatibility {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: rgba(109, 49, 194, 0.06);
  border-radius: 10px;
}

.compat-icon {
  font-size: 16px;
}

.compat-text {
  font-size: 13px;
  font-weight: 600;
  color: var(--secondary-purple);
}

@media (max-width: 480px) {
  .listing-image { height: 170px; }
  .listing-body { padding: 16px; }
  .commute-detail-section { padding: 12px; }
}
</style>
</head>
<body>
<div class="listing-card">
  <div class="listing-image">
    <span class="category-badge">Part-time rental ¬∑ 2‚Äì5 nights/wk</span>
    <span class="price-badge">\$55‚Äì\$85/night</span>
    <div class="commute-badges">
      <span class="commute-pill good"><span class="icon">üíº</span> 12 min to work</span>
      <span class="commute-pill good"><span class="icon">üéì</span> 8 min to school</span>
    </div>
  </div>
  <div class="listing-body">
    <div class="listing-title">Furnished 1BR in North Bergen</div>
    <div class="listing-location">North Bergen, NJ ¬∑ Available Dec 10</div>
    <div class="commute-detail-section">
      <div class="commute-detail-title">Your daily commutes</div>
      <div class="commute-row">
        <div class="commute-dest">
          <div class="commute-icon work">üíº</div>
          <div>
            <div class="commute-dest-label">Your workplace</div>
            <div class="commute-dest-name">By car, morning</div>
          </div>
        </div>
        <div class="commute-time good">12<span class="unit"> min</span></div>
      </div>
      <div class="commute-row">
        <div class="commute-dest">
          <div class="commute-icon school">üéì</div>
          <div>
            <div class="commute-dest-label">Son's school</div>
            <div class="commute-dest-name">By car, afternoon pickup</div>
          </div>
        </div>
        <div class="commute-time good">8<span class="unit"> min</span></div>
      </div>
      <div class="commute-row">
        <div class="commute-dest">
          <div class="commute-icon home">üè†</div>
          <div>
            <div class="commute-dest-label">Mom's house</div>
            <div class="commute-dest-name">Weekend fallback</div>
          </div>
        </div>
        <div class="commute-time warn">35<span class="unit"> min</span></div>
      </div>
    </div>
    <div class="compatibility">
      <span class="compat-icon">‚úì</span>
      <span class="compat-text">Works for morning drop-off and evening commute</span>
    </div>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1001-005",
      name: "Category Comprehension Gate - What Split Lease Is Before Anything Else",
      category: "card",
      source_elements: ["works-001","communicates-001","looks-001","behaves-001","feels-001"],
      journey_phases: ["discovery","search"],
      priority: "high",
      description: "Taline's very first question was 'is it for a certain time?' (0:52), revealing she had zero understanding of the product category despite having found the listing on Craigslist. Bryant's 45-second verbal explanation (1:06-1:51) failed to establish comprehension. This gate presents a visual weekly calendar pattern with a plain-language label as the first thing a new guest sees, resolving the category miscommunication within 3 seconds. The d.school observation that 'what the students thought might be the need and what they actually found turned out to be two very different things' (line 86) is addressed at the gateway: the guest understands the product category before investing any time.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Category Gate</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --primary-purple: #31135D;
  --secondary-purple: rgb(109, 49, 194);
  --accent-purple: rgb(140, 104, 238);
  --bg-light-gray: #f3f4f6;
  --text-dark: #1a1a1a;
  --text-gray: #6b7280;
  --border-color: #e5e7eb;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg-light-gray);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.gate-card {
  max-width: 440px;
  width: 100%;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 4px 16px rgba(49, 19, 93, 0.12);
  padding: 32px 28px;
  text-align: center;
}

.gate-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: rgb(252, 250, 255);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px;
  font-size: 22px;
}

.gate-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 8px;
  line-height: 1.3;
}

.gate-subtitle {
  font-size: 14px;
  color: var(--text-gray);
  margin-bottom: 24px;
  line-height: 1.5;
}

.pattern-visual {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-bottom: 10px;
}

.pv-day {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 600;
}

.pv-day.on {
  background: var(--secondary-purple);
  color: #fff;
}

.pv-day.off {
  background: var(--bg-light-gray);
  color: #c5c8cc;
}

.pattern-label {
  font-size: 12px;
  color: var(--text-gray);
  margin-bottom: 28px;
}

.gate-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.btn-works {
  width: 100%;
  padding: 14px;
  background: var(--secondary-purple);
  color: #fff;
  border: none;
  border-radius: 12px;
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.btn-works:hover {
  background: var(--primary-purple);
}

.btn-different {
  width: 100%;
  padding: 14px;
  background: #fff;
  color: var(--text-gray);
  border: 1.5px solid var(--border-color);
  border-radius: 12px;
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-different:hover {
  border-color: var(--secondary-purple);
  color: var(--secondary-purple);
}

.gate-note {
  font-size: 11px;
  color: #9ca3af;
  margin-top: 16px;
  line-height: 1.5;
}

@media (max-width: 480px) {
  .gate-card { padding: 24px 20px; border-radius: 12px; }
  .gate-title { font-size: 18px; }
  .pv-day { width: 36px; height: 36px; font-size: 12px; }
}
</style>
</head>
<body>
<div class="gate-card">
  <div class="gate-icon">üè†</div>
  <div class="gate-title">This is a part-time rental</div>
  <div class="gate-subtitle">Stay 2‚Äì5 nights per week in a furnished place near your work. Not a full-time lease.</div>
  <div class="pattern-visual">
    <div class="pv-day on">M</div>
    <div class="pv-day on">T</div>
    <div class="pv-day on">W</div>
    <div class="pv-day on">T</div>
    <div class="pv-day on">F</div>
    <div class="pv-day off">S</div>
    <div class="pv-day off">S</div>
  </div>
  <div class="pattern-label">Most guests stay Monday through Friday</div>
  <div class="gate-actions">
    <button class="btn-works">This could work for me</button>
    <button class="btn-different">I need something different</button>
  </div>
  <div class="gate-note">You found this listing on Craigslist. It works differently from a standard rental ‚Äî you choose which nights to stay each week.</div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1001-006",
      name: "Urgency-Responsive Essentials Strip - Three Answers Above the Fold",
      category: "card",
      source_elements: ["communicates-007","looks-006","behaves-005","feels-006"],
      journey_phases: ["search","listing_evaluation"],
      priority: "high",
      description: "Taline was calling while driving home from work in traffic (0:35) with a lease ending and a December 15th deadline. She cut through Bryant's explanation to ask 'I just want to know how much would it cost' (2:51). An urgent guest needs three answers fast: available by my date, within my budget, near my work. This strip delivers those three data points in a horizontal row above all listing content, respecting the d.school observation that 'the world is changing too quickly to learn everything you need to know about life while you're in school' (line 58). The guest gets decision-critical answers in under 3 seconds without scrolling, and the platform never adds artificial pressure -- it matches her pace without weaponizing her urgency.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Urgency Essentials</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --primary-purple: #31135D;
  --secondary-purple: rgb(109, 49, 194);
  --accent-purple: rgb(140, 104, 238);
  --bg-light-gray: #f3f4f6;
  --text-dark: #1a1a1a;
  --text-gray: #6b7280;
  --border-color: #e5e7eb;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg-light-gray);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.essentials-container {
  max-width: 600px;
  width: 100%;
}

.deadline-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px 16px;
  background: rgb(252, 250, 255);
  border-radius: 12px 12px 0 0;
  border: 1px solid rgba(109, 49, 194, 0.12);
  border-bottom: none;
}

.deadline-bar .icon {
  font-size: 14px;
}

.deadline-bar .text {
  font-size: 12px;
  font-weight: 600;
  color: var(--secondary-purple);
}

.essentials-strip {
  display: flex;
  gap: 0;
  background: #fff;
  border-radius: 0 0 16px 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  overflow: hidden;
  border: 1px solid var(--border-color);
  border-top: none;
}

.essential-card {
  flex: 1;
  padding: 16px 14px;
  text-align: center;
  border-right: 1px solid var(--border-color);
  position: relative;
}

.essential-card:last-child {
  border-right: none;
}

.essential-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
}

.essential-card.pass::before {
  background: var(--secondary-purple);
}

.essential-card.warn::before {
  background: #f59e0b;
}

.ec-icon {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 10px;
  font-size: 17px;
}

.essential-card.pass .ec-icon {
  background: rgba(109, 49, 194, 0.08);
}

.essential-card.warn .ec-icon {
  background: #fef3c7;
}

.ec-label {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-gray);
  margin-bottom: 4px;
}

.ec-value {
  font-family: 'DM Sans', sans-serif;
  font-size: 18px;
  font-weight: 700;
  line-height: 1.2;
}

.essential-card.pass .ec-value {
  color: var(--primary-purple);
}

.essential-card.warn .ec-value {
  color: #b45309;
}

.ec-detail {
  font-size: 11px;
  color: var(--text-gray);
  margin-top: 3px;
}

.match-banner {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 12px;
  padding: 12px;
  background: rgb(252, 250, 255);
  border-radius: 12px;
  border: 1px solid rgba(109, 49, 194, 0.12);
}

.match-banner .icon {
  font-size: 14px;
  color: var(--secondary-purple);
}

.match-banner .text {
  font-size: 13px;
  font-weight: 600;
  color: var(--secondary-purple);
}

.match-banner .btn-start {
  margin-left: auto;
  padding: 6px 14px;
  background: var(--secondary-purple);
  color: #fff;
  border: none;
  border-radius: 8px;
  font-family: 'Inter', sans-serif;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.match-banner .btn-start:hover {
  background: var(--primary-purple);
}

@media (max-width: 480px) {
  .essentials-strip { flex-direction: column; border-radius: 0 0 12px 12px; }
  .essential-card { border-right: none; border-bottom: 1px solid var(--border-color); padding: 14px; display: flex; align-items: center; gap: 12px; text-align: left; }
  .essential-card:last-child { border-bottom: none; }
  .essential-card::before { width: 3px; height: 100%; top: 0; left: 0; right: auto; }
  .ec-icon { margin: 0; flex-shrink: 0; }
  .ec-label { margin-bottom: 2px; }
  .ec-value { font-size: 16px; }
  .deadline-bar { border-radius: 12px 12px 0 0; }
  .match-banner { flex-wrap: wrap; }
  .match-banner .btn-start { margin-left: 0; margin-top: 8px; width: 100%; padding: 10px; }
}
</style>
</head>
<body>
<div class="essentials-container">
  <div class="deadline-bar">
    <span class="icon">‚è∞</span>
    <span class="text">Moving by Dec 15 ‚Äî 26 days left</span>
  </div>
  <div class="essentials-strip">
    <div class="essential-card pass">
      <div class="ec-icon">‚úì</div>
      <div>
        <div class="ec-label">Available</div>
        <div class="ec-value">Dec 10</div>
        <div class="ec-detail">5 days before your deadline</div>
      </div>
    </div>
    <div class="essential-card pass">
      <div class="ec-icon">üí∞</div>
      <div>
        <div class="ec-label">Estimated cost</div>
        <div class="ec-value">~\$1,430</div>
        <div class="ec-detail">/month for Mon‚ÄìFri</div>
      </div>
    </div>
    <div class="essential-card pass">
      <div class="ec-icon">üìç</div>
      <div>
        <div class="ec-label">Commute</div>
        <div class="ec-value">12 min</div>
        <div class="ec-detail">to your workplace</div>
      </div>
    </div>
  </div>
  <div class="match-banner">
    <span class="icon">‚ú®</span>
    <span class="text">This listing fits your needs</span>
    <button class="btn-start">Start proposal</button>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1001-007",
      name: "Adaptation-as-Gain Confirmation - Your Pattern, Your Savings",
      category: "card",
      source_elements: ["works-006","communicates-003","behaves-006","feels-005"],
      journey_phases: ["negotiation","active_lease"],
      priority: "high",
      description: "Taline shifted from 'my full time' (3:02) to 'Monday through Friday' (3:53) in under 60 seconds. The risk is this feels like settling. This element reframes the adapted pattern as a discovery of something better-suited, not a concession. It shows cost savings, social proof, and benefit framing so the guest feels her flexibility was smart, not desperate. Taline said 'I just really need a place' (4:14) -- the tone of someone accepting what is available. This card converts that feeling into 'you found the pattern that fits your actual life.' The d.school principle that 'each assignment is meant to be tinkered with, adapted, and remixed' (line 75) frames adaptation as creative strength. This also serves the active_lease phase as a retention touchpoint that reinforces the value of the chosen arrangement.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pattern Confirmation</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --primary-purple: #31135D;
  --secondary-purple: rgb(109, 49, 194);
  --accent-purple: rgb(140, 104, 238);
  --bg-light-gray: #f3f4f6;
  --text-dark: #1a1a1a;
  --text-gray: #6b7280;
  --border-color: #e5e7eb;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg-light-gray);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.confirm-card {
  max-width: 480px;
  width: 100%;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  overflow: hidden;
}

.confirm-header {
  background: linear-gradient(135deg, var(--primary-purple) 0%, rgb(90, 45, 143) 100%);
  padding: 24px;
  color: #fff;
  text-align: center;
}

.confirm-header .check {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: rgba(255,255,255,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 12px;
  font-size: 20px;
}

.confirm-header h2 {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 4px;
}

.confirm-header p {
  font-size: 13px;
  opacity: 0.85;
}

.confirm-body {
  padding: 24px;
}

.pattern-display {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-bottom: 20px;
}

.pd-day {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.pd-day.on {
  background: var(--secondary-purple);
  color: #fff;
}

.pd-day.off {
  background: var(--bg-light-gray);
  color: #c5c8cc;
}

.pd-day .letter {
  font-size: 14px;
  font-weight: 600;
}

.pd-day .sublabel {
  font-size: 8px;
  font-weight: 500;
  margin-top: 1px;
}

.pd-day.on .sublabel {
  opacity: 0.75;
}

.savings-panel {
  background: rgb(252, 250, 255);
  border-radius: 12px;
  padding: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.savings-left {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.savings-label {
  font-size: 12px;
  color: var(--text-gray);
  font-weight: 500;
}

.savings-title {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-dark);
}

.savings-amount {
  font-family: 'DM Sans', sans-serif;
  font-size: 24px;
  font-weight: 700;
  color: var(--secondary-purple);
}

.benefits-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 20px;
}

.benefit-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: var(--bg-light-gray);
  border-radius: 10px;
}

.benefit-icon {
  width: 28px;
  height: 28px;
  border-radius: 8px;
  background: rgba(109, 49, 194, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  flex-shrink: 0;
}

.benefit-text {
  font-size: 13px;
  color: var(--text-dark);
  font-weight: 500;
  line-height: 1.4;
}

.social-proof-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 14px;
  background: rgba(109, 49, 194, 0.06);
  border-radius: 10px;
  margin-bottom: 20px;
}

.sp-badge {
  padding: 3px 8px;
  background: var(--secondary-purple);
  color: #fff;
  font-size: 10px;
  font-weight: 700;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  flex-shrink: 0;
}

.sp-text {
  font-size: 12px;
  font-weight: 500;
  color: var(--secondary-purple);
}

.confirm-btn {
  width: 100%;
  padding: 14px;
  background: var(--secondary-purple);
  color: #fff;
  border: none;
  border-radius: 12px;
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.confirm-btn:hover {
  background: var(--primary-purple);
}

@media (max-width: 480px) {
  .confirm-header { padding: 20px; }
  .confirm-body { padding: 16px; }
  .pd-day { width: 38px; height: 38px; }
  .pd-day .letter { font-size: 13px; }
  .savings-amount { font-size: 22px; }
}
</style>
</head>
<body>
<div class="confirm-card">
  <div class="confirm-header">
    <div class="check">‚úì</div>
    <h2>Your pattern looks great</h2>
    <p>Monday through Friday ¬∑ 8 weeks starting Dec 15</p>
  </div>
  <div class="confirm-body">
    <div class="pattern-display">
      <div class="pd-day on"><span class="letter">M</span><span class="sublabel">Stay</span></div>
      <div class="pd-day on"><span class="letter">T</span><span class="sublabel">Stay</span></div>
      <div class="pd-day on"><span class="letter">W</span><span class="sublabel">Stay</span></div>
      <div class="pd-day on"><span class="letter">T</span><span class="sublabel">Stay</span></div>
      <div class="pd-day on"><span class="letter">F</span><span class="sublabel">Stay</span></div>
      <div class="pd-day off"><span class="letter">S</span><span class="sublabel">Free</span></div>
      <div class="pd-day off"><span class="letter">S</span><span class="sublabel">Free</span></div>
    </div>
    <div class="savings-panel">
      <div class="savings-left">
        <div class="savings-label">You save vs. 7-night rate</div>
        <div class="savings-title">Pay only for nights you need</div>
      </div>
      <div class="savings-amount">\$520</div>
    </div>
    <div class="benefits-list">
      <div class="benefit-item">
        <div class="benefit-icon">üè†</div>
        <div class="benefit-text">Weekends free ‚Äî spend them with family</div>
      </div>
      <div class="benefit-item">
        <div class="benefit-icon">üíº</div>
        <div class="benefit-text">12 min to your workplace on weekday mornings</div>
      </div>
      <div class="benefit-item">
        <div class="benefit-icon">üéì</div>
        <div class="benefit-text">8 min to your son's school for afternoon pickup</div>
      </div>
    </div>
    <div class="social-proof-row">
      <span class="sp-badge">Popular</span>
      <span class="sp-text">Most chosen pattern by guests in North Bergen</span>
    </div>
    <button class="confirm-btn">Continue with this arrangement</button>
  </div>
</div>
</body>
</html>`
    }
];

function createSrcdoc(snippet) {
  return snippet;
}

function renderCards() {
  const grid = document.getElementById('elementGrid');
  const search = document.getElementById('searchInput').value.toLowerCase();
  const checkedPhases = Array.from(document.querySelectorAll('[data-filter-for="phase"] input:checked')).map(c => c.value);

  let filtered = ELEMENTS.filter(el => {
    if (search && !el.name.toLowerCase().includes(search) && !el.description.toLowerCase().includes(search)) return false;
    if (checkedPhases.length && !el.journey_phases.some(p => checkedPhases.includes(p))) return false;
    return true;
  });

  document.getElementById('resultCount').textContent = filtered.length + ' element' + (filtered.length !== 1 ? 's' : '');

  if (!filtered.length) {
    grid.innerHTML = '<div class="lib-empty">No elements match your filters.</div>';
    return;
  }

  grid.innerHTML = filtered.map((el, i) => {
    const phases = el.journey_phases.map(p => '<span class="lib-card__phase">' + p.replace(/_/g, ' ') + '</span>').join('');
    const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');
    return '<div class="lib-card" data-idx="' + ELEMENTS.indexOf(el) + '">' +
      '<div class="lib-card__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" loading="lazy" sandbox="allow-same-origin"></iframe></div>' +
      '<div class="lib-card__body">' +
        '<div class="lib-card__top-row"><span class="lib-card__cat">UI Element</span><span class="lib-card__id">' + el.id + '</span></div>' +
        '<div class="lib-card__name">' + el.name + '</div>' +
        '<div class="lib-card__desc">' + el.description + '</div>' +
        '<div class="lib-card__phases">' + phases + '</div>' +
        '<div class="lib-card__sources"><strong>Sources:</strong> ' + sources + '</div>' +
      '</div></div>';
  }).join('');
}

function escapeAttr(s) {
  return s.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function openModal(idx) {
  const el = ELEMENTS[idx];
  const overlay = document.getElementById('modalOverlay');
  const modal = document.getElementById('modalContent');
  const phases = el.journey_phases.map(p => '<span class="lib-card__phase" style="font-size:12px;padding:4px 10px;">' + p.replace(/_/g, ' ') + '</span>').join('');
  const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');

  modal.innerHTML =
    '<div class="lib-modal__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" sandbox="allow-same-origin"></iframe><button class="lib-modal__close" onclick="closeModal()">&times;</button></div>' +
    '<div class="lib-modal__content">' +
      '<div class="lib-modal__header"><h2 class="lib-modal__title">' + el.name + '</h2></div>' +
      '<p class="lib-modal__desc">' + el.description + '</p>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Journey Phases</div><div class="lib-modal__phases-row">' + phases + '</div></div>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Source Elements</div><div class="lib-modal__sources-row">' + sources + '</div></div>' +
    '</div>';

  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

// Event listeners
document.getElementById('searchInput').addEventListener('input', renderCards);
document.querySelectorAll('.lib-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const dropdown = btn.nextElementSibling;
    dropdown.classList.toggle('open');
    btn.classList.toggle('active');
  });
});
document.querySelectorAll('.lib-filter-dropdown input').forEach(cb => {
  cb.addEventListener('change', renderCards);
});
document.getElementById('elementGrid').addEventListener('click', e => {
  const card = e.target.closest('.lib-card');
  if (card) openModal(parseInt(card.dataset.idx));
});
document.getElementById('modalOverlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) closeModal();
});
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
window.addEventListener('scroll', () => {
  document.getElementById('toolbar').classList.toggle('scrolled', window.scrollY > 10);
});

// Initial render
renderCards();
</script>
</body>
</html>