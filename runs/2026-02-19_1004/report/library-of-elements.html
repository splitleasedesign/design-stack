<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library of Elements â€” Design Stack v2 | Run 2026-02-19_1004</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --primary-purple:#31135D;
  --secondary-purple:rgb(109,49,194);
  --accent-purple:rgb(140,104,238);
  --bg-white:#ffffff;
  --bg-light:#f9fafb;
  --bg-light-gray:#f3f4f6;
  --bg-off-white:rgb(252,250,255);
  --text-dark:#1a1a1a;
  --text-gray:#6b7280;
  --text-light-gray:#9ca3af;
  --text-description:#374151;
  --border-color:#e5e7eb;
  --shadow-sm:0 1px 3px rgba(0,0,0,0.05);
  --shadow-md:0 2px 8px rgba(0,0,0,0.08);
  --shadow-lg:0 4px 16px rgba(0,0,0,0.1);
  --shadow-purple-md:0 4px 8px rgba(49,19,93,0.15);
  --rounded-sm:4px;--rounded-md:6px;--rounded-lg:8px;--rounded-xl:12px;--rounded-2xl:16px;--rounded-pill:20px;
  --font-inter:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  --font-dm:'DM Sans',sans-serif;
  --transition-fast:0.15s;--transition-base:0.2s;--transition-slow:0.3s;
}
html{scroll-behavior:smooth}
body{font-family:var(--font-inter);background:var(--bg-light);color:var(--text-dark);line-height:1.5;-webkit-font-smoothing:antialiased}
.lib-header{background:linear-gradient(135deg,#31135D 0%,#4a1f8a 50%,#5a2d8f 100%);padding:48px 32px 40px;position:relative;overflow:hidden}
.lib-header::before{content:'';position:absolute;top:-60%;right:-10%;width:500px;height:500px;background:radial-gradient(circle,rgba(140,104,238,0.15) 0%,transparent 70%);pointer-events:none}
.lib-header__inner{max-width:1320px;margin:0 auto;position:relative;z-index:1}
.lib-header__badge{display:inline-block;background:rgba(255,255,255,0.12);color:rgba(255,255,255,0.85);font-size:11px;font-weight:600;padding:4px 12px;border-radius:var(--rounded-pill);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:16px;backdrop-filter:blur(4px)}
.lib-header__title{font-size:36px;font-weight:800;color:#fff;margin-bottom:8px;letter-spacing:-0.5px}
.lib-header__sub{font-family:var(--font-dm);font-size:16px;color:rgba(255,255,255,0.7);max-width:600px;line-height:1.6}
.lib-header__meta{display:flex;gap:24px;margin-top:20px;flex-wrap:wrap}
.lib-header__meta-item{font-size:12px;color:rgba(255,255,255,0.55);font-family:var(--font-dm)}
.lib-header__meta-item strong{color:rgba(255,255,255,0.85);font-weight:600}
.lib-toolbar{position:sticky;top:0;z-index:100;background:rgba(255,255,255,0.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border-color);padding:12px 32px;transition:box-shadow var(--transition-base)}
.lib-toolbar.scrolled{box-shadow:var(--shadow-md)}
.lib-toolbar__inner{max-width:1320px;margin:0 auto;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.lib-search{position:relative;flex:1;min-width:220px;max-width:400px}
.lib-search__input{width:100%;padding:9px 14px 9px 36px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);font-family:var(--font-inter);font-size:13px;background:var(--bg-white);color:var(--text-dark);transition:border-color var(--transition-fast);outline:none}
.lib-search__input:focus{border-color:var(--secondary-purple)}
.lib-search__icon{position:absolute;left:11px;top:50%;transform:translateY(-50%);color:var(--text-light-gray);font-size:14px;pointer-events:none}
.lib-filters{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.lib-filter-group{position:relative}
.lib-filter-btn{display:inline-flex;align-items:center;gap:5px;padding:7px 14px;border:1px solid var(--border-color);border-radius:var(--rounded-lg);background:var(--bg-white);font-family:var(--font-inter);font-size:12px;font-weight:500;color:var(--text-gray);cursor:pointer;transition:border-color var(--transition-fast),color var(--transition-fast);white-space:nowrap}
.lib-filter-btn:hover,.lib-filter-btn.active{border-color:var(--secondary-purple);color:var(--secondary-purple)}
.lib-filter-btn .arrow{font-size:10px;margin-left:2px;transition:transform var(--transition-fast)}
.lib-filter-btn.active .arrow{transform:rotate(180deg)}
.lib-filter-dropdown{position:absolute;top:calc(100% + 4px);left:0;min-width:200px;background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-lg);box-shadow:var(--shadow-lg);padding:6px 0;display:none;z-index:200}
.lib-filter-dropdown.open{display:block}
.lib-filter-option{display:flex;align-items:center;gap:8px;padding:8px 14px;font-size:12px;color:var(--text-dark);cursor:pointer;transition:background var(--transition-fast)}
.lib-filter-option:hover{background:var(--bg-light)}
.lib-filter-option input[type=checkbox]{accent-color:var(--secondary-purple)}
.lib-count{font-size:12px;color:var(--text-light-gray);font-family:var(--font-dm);margin-left:auto;white-space:nowrap}
.lib-grid-wrap{max-width:1320px;margin:0 auto;padding:24px 32px 64px}
.lib-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:20px}
.lib-empty{grid-column:1/-1;text-align:center;padding:80px 24px;color:var(--text-light-gray);font-size:15px}
.lib-card{background:var(--bg-white);border:1px solid var(--border-color);border-radius:var(--rounded-xl);overflow:hidden;transition:box-shadow var(--transition-base),border-color var(--transition-base),transform var(--transition-base);cursor:pointer;display:flex;flex-direction:column}
.lib-card:hover{box-shadow:var(--shadow-purple-md);border-color:rgba(109,49,194,0.25);transform:translateY(-2px)}
.lib-card__preview{width:100%;height:220px;border-bottom:1px solid var(--border-color);background:var(--bg-light);position:relative;overflow:hidden}
.lib-card__preview iframe{width:100%;height:100%;border:none;pointer-events:none;transform-origin:top left}
.lib-card__body{padding:16px 18px;flex:1;display:flex;flex-direction:column}
.lib-card__top-row{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}
.lib-card__cat{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;padding:3px 9px;border-radius:var(--rounded-pill);background:rgba(109,49,194,0.08);color:var(--secondary-purple)}
.lib-card__id{font-size:10px;color:var(--text-light-gray);margin-left:auto;font-family:var(--font-dm)}
.lib-card__name{font-size:16px;font-weight:700;color:var(--text-dark);margin-bottom:6px;line-height:1.3}
.lib-card__desc{font-family:var(--font-dm);font-size:13px;color:var(--text-gray);line-height:1.5;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;flex:1}
.lib-card__phases{display:flex;gap:4px;flex-wrap:wrap;margin-bottom:10px}
.lib-card__phase{font-size:10px;padding:2px 8px;border-radius:var(--rounded-sm);background:var(--bg-light-gray);color:var(--text-gray);font-weight:500}
.lib-card__sources{font-size:10px;color:var(--text-light-gray);font-family:var(--font-dm);border-top:1px solid var(--border-color);padding-top:10px;margin-top:auto}
.lib-card__sources strong{color:var(--text-gray);font-weight:600}
.lib-overlay{position:fixed;inset:0;background:rgba(49,19,93,0.5);z-index:1000;display:none;align-items:flex-start;justify-content:center;padding:40px 24px;overflow-y:auto;backdrop-filter:blur(4px);animation:fadeIn var(--transition-base) ease}
.lib-overlay.open{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.lib-modal{background:var(--bg-white);border-radius:var(--rounded-2xl);width:100%;max-width:900px;box-shadow:0 24px 64px rgba(49,19,93,0.3);animation:slideUp var(--transition-slow) ease;margin-bottom:40px}
.lib-modal__preview{width:100%;min-height:300px;max-height:450px;border-radius:var(--rounded-2xl) var(--rounded-2xl) 0 0;overflow:hidden;background:var(--bg-light);border-bottom:1px solid var(--border-color);position:relative}
.lib-modal__preview iframe{width:100%;height:400px;border:none}
.lib-modal__close{position:absolute;top:14px;right:14px;z-index:10;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.9);border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;color:var(--text-dark);transition:background var(--transition-fast)}
.lib-modal__close:hover{background:var(--bg-white)}
.lib-modal__content{padding:28px 32px 32px}
.lib-modal__header{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.lib-modal__title{font-size:24px;font-weight:800;color:var(--text-dark);flex:1;min-width:200px}
.lib-modal__desc{font-family:var(--font-dm);font-size:14px;color:var(--text-description);line-height:1.7;margin-bottom:24px}
.lib-modal__section{margin-bottom:24px}
.lib-modal__section-title{font-size:13px;font-weight:700;color:var(--primary-purple);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid rgba(109,49,194,0.1)}
.lib-modal__phases-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.lib-modal__sources-row{font-size:12px;color:var(--text-gray);font-family:var(--font-dm)}
.lib-modal__sources-row code{background:var(--bg-light-gray);padding:2px 6px;border-radius:var(--rounded-sm);font-size:11px;color:var(--secondary-purple);margin:0 2px}
@media(max-width:768px){
  .lib-header{padding:32px 20px}.lib-header__title{font-size:26px}
  .lib-toolbar{padding:10px 16px}.lib-grid-wrap{padding:16px 16px 48px}
  .lib-grid{grid-template-columns:1fr;gap:16px}
  .lib-modal__content{padding:20px}.lib-modal{max-width:100%}.lib-overlay{padding:20px 12px}
}
</style>
</head>
<body>
<header class="lib-header">
  <div class="lib-header__inner">
    <span class="lib-header__badge">Design Stack v2 &middot; Layer 8 Element Factory</span>
    <h1 class="lib-header__title">Library of Elements</h1>
    <p class="lib-header__sub">Browsable catalog of production-ready UI elements for the Split Lease host journey. Each element includes live preview and design specs.</p>
    <div class="lib-header__meta">
      <span class="lib-header__meta-item"><strong>Run:</strong> 2026-02-19_1004</span>
      <span class="lib-header__meta-item"><strong>Journey:</strong> Host</span>
      <span class="lib-header__meta-item"><strong>Elements:</strong> 7</span>
      <span class="lib-header__meta-item"><strong>Style:</strong> Split Lease Purple Palette</span>
    </div>
  </div>
</header>

<div class="lib-toolbar" id="toolbar">
  <div class="lib-toolbar__inner">
    <div class="lib-search">
      <span class="lib-search__icon">&#128269;</span>
      <input class="lib-search__input" type="text" id="searchInput" placeholder="Search elements by name or description...">
    </div>
    <div class="lib-filters">
      <div class="lib-filter-group">
        <button class="lib-filter-btn" data-filter="phase">Phase <span class="arrow">&#9662;</span></button>
        <div class="lib-filter-dropdown" data-filter-for="phase">
          <label class="lib-filter-option"><input type="checkbox" value="active_lease"> active lease</label>
          <label class="lib-filter-option"><input type="checkbox" value="evaluation"> evaluation</label>
          <label class="lib-filter-option"><input type="checkbox" value="listing_creation"> listing creation</label>
          <label class="lib-filter-option"><input type="checkbox" value="onboarding"> onboarding</label>
          <label class="lib-filter-option"><input type="checkbox" value="pricing"> pricing</label>
          <label class="lib-filter-option"><input type="checkbox" value="proposal_mgmt"> proposal mgmt</label>
          <label class="lib-filter-option"><input type="checkbox" value="retention"> retention</label>
        </div>
      </div>
    </div>
    <span class="lib-count" id="resultCount">7 elements</span>
  </div>
</div>

<div class="lib-grid-wrap">
  <div class="lib-grid" id="elementGrid"></div>
</div>

<div class="lib-overlay" id="modalOverlay">
  <div class="lib-modal" id="modalContent"></div>
</div>

<script>
const ELEMENTS = [
  {
      id: "ds-ui-1004-001",
      name: "Shield-Before-Step Protection Badge Stack",
      category: "card",
      source_elements: ["works-001","communicates-002","looks-001","behaves-005","feels-001"],
      journey_phases: ["evaluation","onboarding","proposal_mgmt"],
      priority: "high",
      description: "A vertical stack of protection badges that appears ABOVE every commitment button on trust-decision screens. Each badge uses monospace typography on a subtle purple-tinted background with a left-border accent to signal verifiable, data-backed protections. Norman's signifier principle demands that protections be perceivable before the action they relate to is attempted. Hemeden had to call an agent to discover the anti-squatter clause (03:01-04:44). This component eliminates that dependency by making three core protections visible at a glance: non-residency clause, damage deposit, and payment guarantee. The commit button is visually subordinate to the protection stack, enforcing the shield-then-step emotional sequence identified in feels-001.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shield-Before-Step Protection Badge Stack</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-light-gray: #f3f4f6;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --border-color: #e5e7eb;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-light-gray);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
  }
  .card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    padding: 32px 28px;
    max-width: 480px;
    width: 100%;
  }
  .card-header {
    margin-bottom: 24px;
  }
  .card-header h2 {
    font-size: 20px;
    font-weight: 700;
    color: var(--primary-purple);
    margin-bottom: 6px;
  }
  .card-header p {
    font-size: 14px;
    color: var(--text-gray);
    line-height: 1.5;
  }
  .protection-stack {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 28px;
  }
  .protection-badge {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    background: rgb(252, 250, 255);
    border-left: 3px solid var(--secondary-purple);
    border-radius: 0 10px 10px 0;
    padding: 14px 16px;
    transition: box-shadow 0.2s ease;
  }
  .protection-badge:hover {
    box-shadow: 0 1px 4px rgba(49,19,93,0.10);
  }
  .badge-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--secondary-purple);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .badge-icon svg {
    width: 16px;
    height: 16px;
    stroke: #fff;
    fill: none;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
  .badge-text {
    flex: 1;
  }
  .badge-title {
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-dark);
    letter-spacing: 0.01em;
    line-height: 1.3;
  }
  .badge-detail {
    font-size: 12px;
    color: var(--text-gray);
    margin-top: 4px;
    line-height: 1.4;
  }
  .commit-section {
    padding-top: 20px;
    border-top: 1px solid var(--border-color);
  }
  .commit-btn {
    width: 100%;
    padding: 14px 24px;
    background: var(--secondary-purple);
    color: #fff;
    border: none;
    border-radius: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.1s ease;
  }
  .commit-btn:hover {
    background: var(--accent-purple);
    transform: translateY(-1px);
  }
  .learn-more {
    display: block;
    text-align: center;
    margin-top: 12px;
    font-size: 13px;
    color: var(--secondary-purple);
    text-decoration: none;
    font-weight: 500;
  }
  .learn-more:hover {
    text-decoration: underline;
  }
  @media (max-width: 480px) {
    .card { padding: 24px 20px; }
  }
</style>
</head>
<body>
<div class="card">
  <div class="card-header">
    <h2>Your Protections</h2>
    <p>These safeguards are included in every booking agreement.</p>
  </div>
  <div class="protection-stack">
    <div class="protection-badge">
      <div class="badge-icon">
        <svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
      </div>
      <div class="badge-text">
        <div class="badge-title">Non-residency clause included</div>
        <div class="badge-detail">Guests sign a legal clause confirming your space is not their permanent home. Exempt from landlord-tenant laws.</div>
      </div>
    </div>
    <div class="protection-badge">
      <div class="badge-icon">
        <svg viewBox="0 0 24 24"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
      </div>
      <div class="badge-text">
        <div class="badge-title">Damage deposit held by Split Lease</div>
        <div class="badge-detail">We hold the damage deposit for the full duration of the stay. Released to you if needed, returned to guest otherwise.</div>
      </div>
    </div>
    <div class="protection-badge">
      <div class="badge-icon">
        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
      </div>
      <div class="badge-text">
        <div class="badge-title">Payment within 24 hours of arrival</div>
        <div class="badge-detail">Your payout processes the moment your guest arrives. No waiting until the end of the stay.</div>
      </div>
    </div>
  </div>
  <div class="commit-section">
    <button class="commit-btn">Accept Booking Agreement</button>
    <a href="#" class="learn-more">Download full agreement for review</a>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1004-002",
      name: "Constraint-First Listing Setup Card",
      category: "card",
      source_elements: ["works-002","communicates-001","looks-002","behaves-002","feels-004"],
      journey_phases: ["listing_creation","proposal_mgmt"],
      priority: "high",
      description: "An inverted listing creation card that places host constraints (max guests, max duration, availability, rules) as the primary content layer, with property features below. Norman's constraint taxonomy (physical, cultural, semantic, logical) maps directly to Hemeden's boundaries: she lives in the space (physical), does not want strangers coming and going (cultural), stays over 30 nights change legal meaning (semantic), and one person at a time is the only workable configuration (logical). Each constraint is a pill-shaped selector at the top of the card, scannable in under 2 seconds. This inverts the traditional listing hierarchy where photos and amenities dominate, addressing the owner-occupant host whose listing IS a set of boundaries, not a storefront.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Constraint-First Listing Setup</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-light-gray: #f3f4f6;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --border-color: #e5e7eb;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-light-gray);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
  }
  .card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    padding: 32px 28px;
    max-width: 480px;
    width: 100%;
  }
  .step-indicator {
    font-size: 12px;
    font-weight: 600;
    color: var(--secondary-purple);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 6px;
  }
  .card h2 {
    font-size: 22px;
    font-weight: 700;
    color: var(--primary-purple);
    margin-bottom: 4px;
  }
  .card .subtitle {
    font-size: 14px;
    color: var(--text-gray);
    margin-bottom: 24px;
    line-height: 1.5;
  }
  .constraint-group {
    margin-bottom: 20px;
  }
  .constraint-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 8px;
  }
  .pill-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .pill {
    padding: 8px 16px;
    border-radius: 20px;
    border: 1.5px solid var(--border-color);
    font-size: 14px;
    font-weight: 500;
    color: var(--text-gray);
    background: #fff;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .pill:hover {
    border-color: var(--accent-purple);
    color: var(--secondary-purple);
  }
  .pill.selected {
    border-color: var(--secondary-purple);
    background: rgb(252, 250, 255);
    color: var(--secondary-purple);
    font-weight: 600;
  }
  .availability-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
  }
  .date-input {
    flex: 1;
    padding: 10px 14px;
    border: 1.5px solid var(--border-color);
    border-radius: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: var(--text-dark);
    transition: border-color 0.2s ease;
  }
  .date-input:focus {
    outline: none;
    border-color: var(--secondary-purple);
    box-shadow: 0 0 0 3px rgba(109,49,194,0.08);
  }
  .date-label {
    font-size: 13px;
    color: var(--text-gray);
    white-space: nowrap;
  }
  .rules-input {
    width: 100%;
    padding: 10px 14px;
    border: 1.5px solid var(--border-color);
    border-radius: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: var(--text-dark);
    margin-top: 8px;
    resize: none;
    height: 60px;
    transition: border-color 0.2s ease;
  }
  .rules-input:focus {
    outline: none;
    border-color: var(--secondary-purple);
    box-shadow: 0 0 0 3px rgba(109,49,194,0.08);
  }
  .rules-input::placeholder {
    color: #9ca3af;
  }
  .divider {
    height: 1px;
    background: var(--border-color);
    margin: 24px 0;
  }
  .feature-section h3 {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 4px;
  }
  .feature-section p {
    font-size: 13px;
    color: var(--text-gray);
    line-height: 1.4;
  }
  .continue-btn {
    width: 100%;
    padding: 14px 24px;
    background: var(--secondary-purple);
    color: #fff;
    border: none;
    border-radius: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 24px;
    transition: background 0.2s ease, transform 0.1s ease;
  }
  .continue-btn:hover {
    background: var(--accent-purple);
    transform: translateY(-1px);
  }
  @media (max-width: 480px) {
    .card { padding: 24px 20px; }
  }
</style>
</head>
<body>
<div class="card">
  <div class="step-indicator">Step 1 of 3</div>
  <h2>Your Space, Your Rules</h2>
  <p class="subtitle">Set your boundaries first. We will only show you guests who fit.</p>

  <div class="constraint-group">
    <div class="constraint-label">Maximum guests at a time</div>
    <div class="pill-row">
      <span class="pill selected">1 guest</span>
      <span class="pill">2 guests</span>
      <span class="pill">3+</span>
    </div>
  </div>

  <div class="constraint-group">
    <div class="constraint-label">Maximum stay duration</div>
    <div class="pill-row">
      <span class="pill">2 weeks</span>
      <span class="pill selected">4 weeks</span>
      <span class="pill">8 weeks</span>
      <span class="pill">3 months</span>
    </div>
  </div>

  <div class="constraint-group">
    <div class="constraint-label">Available from</div>
    <div class="availability-row">
      <input type="text" class="date-input" value="September 10, 2025" readonly />
      <span class="date-label">onward</span>
    </div>
  </div>

  <div class="constraint-group">
    <div class="constraint-label">Key rules (optional)</div>
    <textarea class="rules-input" placeholder="e.g., No overnight visitors, quiet after 10pm"></textarea>
  </div>

  <div class="divider"></div>

  <div class="feature-section">
    <h3>Next: describe your space</h3>
    <p>Room details, photos, and amenities come in the next step.</p>
  </div>

  <button class="continue-btn">Continue to Space Details</button>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1004-003",
      name: "Net Income Calculator with Interacting-Control Transparency",
      category: "card",
      source_elements: ["works-003","communicates-003","looks-003","behaves-003","feels-002"],
      journey_phases: ["pricing","proposal_mgmt"],
      priority: "high",
      description: "A real-time financial feedback panel that solves Norman's refrigerator problem for host pricing. Hemeden set a nightly rate of $75 but could not see what she would earn because price and duration interact through invisible tax thresholds (06:57). This component shows two scenario columns side by side -- stays under 30 nights vs. 30+ nights -- each displaying gross rate, estimated deductions, and net income. The net income number is the visually dominant element (largest typography, accent color). The local tax rate is pre-filled by zip code, eliminating the homework assignment that nearly caused Hemeden to defer (06:36). Norman states 'the two controls are not independent' -- this component makes that interaction visible on a single surface.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Net Income Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-light-gray: #f3f4f6;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --border-color: #e5e7eb;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-light-gray);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
  }
  .card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    padding: 32px 28px;
    max-width: 520px;
    width: 100%;
  }
  .card h2 {
    font-size: 20px;
    font-weight: 700;
    color: var(--primary-purple);
    margin-bottom: 4px;
  }
  .card .subtitle {
    font-size: 14px;
    color: var(--text-gray);
    margin-bottom: 24px;
    line-height: 1.5;
  }
  .rate-input-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
  }
  .rate-input-row label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-dark);
    white-space: nowrap;
  }
  .rate-input {
    width: 120px;
    padding: 12px 14px;
    border: 2px solid var(--secondary-purple);
    border-radius: 10px;
    font-family: 'DM Sans', sans-serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--primary-purple);
    text-align: center;
    background: rgb(252,250,255);
  }
  .rate-input:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(109,49,194,0.12);
  }
  .tax-note {
    font-size: 12px;
    color: var(--text-gray);
    margin-bottom: 24px;
  }
  .tax-note strong {
    color: var(--text-dark);
  }
  .scenarios {
    display: flex;
    gap: 16px;
    margin-bottom: 24px;
  }
  .scenario {
    flex: 1;
    background: var(--bg-light-gray);
    border-radius: 12px;
    padding: 20px 16px;
    text-align: center;
  }
  .scenario.highlighted {
    background: rgb(252, 250, 255);
    border: 1.5px solid var(--accent-purple);
  }
  .scenario-label {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--text-gray);
    margin-bottom: 14px;
  }
  .scenario .gross {
    font-size: 14px;
    color: var(--text-gray);
    margin-bottom: 4px;
  }
  .scenario .deductions {
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    color: #9ca3af;
    margin-bottom: 12px;
  }
  .scenario .net-label {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--secondary-purple);
    margin-bottom: 4px;
  }
  .scenario .net-amount {
    font-family: 'DM Sans', sans-serif;
    font-size: 28px;
    font-weight: 700;
    color: var(--secondary-purple);
  }
  .scenario .net-period {
    font-size: 12px;
    color: var(--text-gray);
    margin-top: 2px;
  }
  .summary-box {
    background: rgb(252,250,255);
    border-radius: 12px;
    padding: 16px 20px;
    text-align: center;
  }
  .summary-box .summary-label {
    font-size: 13px;
    color: var(--text-gray);
    margin-bottom: 4px;
  }
  .summary-box .summary-amount {
    font-family: 'DM Sans', sans-serif;
    font-size: 24px;
    font-weight: 700;
    color: var(--primary-purple);
  }
  .summary-box .summary-detail {
    font-size: 12px;
    color: var(--text-gray);
    margin-top: 4px;
  }
  @media (max-width: 480px) {
    .card { padding: 24px 20px; }
    .scenarios { flex-direction: column; }
    .scenario .net-amount { font-size: 24px; }
  }
</style>
</head>
<body>
<div class="card">
  <h2>Your Estimated Earnings</h2>
  <p class="subtitle">See exactly what you will earn. No hidden math.</p>

  <div class="rate-input-row">
    <label>Nightly rate</label>
    <input type="text" class="rate-input" value="\$75" readonly />
  </div>
  <div class="tax-note">Estimated occupancy tax for <strong>your area</strong>: ~14% &middot; Applies to stays under 30 nights</div>

  <div class="scenarios">
    <div class="scenario highlighted">
      <div class="scenario-label">Under 30 nights</div>
      <div class="gross">\$75/night gross</div>
      <div class="deductions">- \$10.50 tax &middot; - \$6.75 fee</div>
      <div class="net-label">You earn</div>
      <div class="net-amount">\$57.75</div>
      <div class="net-period">per night</div>
    </div>
    <div class="scenario">
      <div class="scenario-label">30+ nights</div>
      <div class="gross">\$75/night gross</div>
      <div class="deductions">- \$0.00 tax &middot; - \$6.75 fee</div>
      <div class="net-label">You earn</div>
      <div class="net-amount">\$68.25</div>
      <div class="net-period">per night</div>
    </div>
  </div>

  <div class="summary-box">
    <div class="summary-label">Estimated total for a 4-week stay (28 nights)</div>
    <div class="summary-amount">\$1,617</div>
    <div class="summary-detail">After estimated taxes and fees &middot; Payment within 24 hours of arrival</div>
  </div>
</div>
</body>
</html>`
    },
  {
      id: "ds-ui-1004-004",
      name: "Compatibility-First Proposal Card with Constraint Match Indicators",
      category: "card",
      source_elements: ["works-005","communicates-004","looks-004","behaves-002","feels-004"],
      journey_phases: ["proposal_mgmt"],
      priority: "high",
      description: "A three-band proposal card where constraint compatibility indicators occupy the top band, guest identity occupies the middle band, and proposal details are below. Hemeden rejected Matthew in 11 seconds based on a date mismatch (08:51) and evaluated Jade on duration before any personal assessment (10:54). Her scan pattern is binary: constraint match first, person second. Norman's signifier principle requires compatibility to be perceivable before any other content. Each constraint indicator (dates, duration, guest count) uses a color-coded dot and short label. Incompatible proposals are visually muted. This design enables the host to triage 5 proposals in under 60 seconds by scanning Band 1 alone.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compatibility-First Proposal Card</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-light-gray: #f3f4f6;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --border-color: #e5e7eb;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-light-gray);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    flex-direction: column;
    gap: 20px;
  }
  .proposal-card {
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    border: 1px solid var(--border-color);
    max-width: 480px;
    width: 100%;
    overflow: hidden;
    transition: box-shadow 0.2s ease;
  }
  .proposal-card:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.10);
  }
  .proposal-card.mismatch {
    opacity: 0.65;
  }
  /* Band 1: Compatibility */
  .band-compat {
    display: flex;
    gap: 12px;
    padding: 12px 20px;
    background: var(--bg-light-gray);
    border-bottom: 1px solid var(--border-color);
  }
  .compat-chip {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-gray);
  }
  .compat-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .compat-dot.match { background: var(--secondary-purple); }
  .compat-dot.mismatch { background: #d1d5db; }
  .compat-chip.is-match { color: var(--secondary-purple); font-weight: 600; }
  .compat-chip.is-mismatch { color: #9ca3af; }
  /* Band 2: Guest Identity */
  .band-identity {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px 20px;
  }
  .guest-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--accent-purple);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 700;
    color: #fff;
    flex-shrink: 0;
  }
  .guest-info h3 {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
  }
  .guest-info .trust-line {
    font-size: 13px;
    color: var(--text-gray);
    margin-top: 2px;
  }
  .verified-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    font-weight: 500;
    color: var(--secondary-purple);
    background: rgb(252,250,255);
    padding: 2px 8px;
    border-radius: 20px;
    margin-left: 6px;
  }
  /* Band 3: Details */
  .band-details {
    padding: 0 20px 16px;
  }
  .detail-row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-top: 1px solid var(--border-color);
    font-size: 13px;
  }
  .detail-row .label { color: var(--text-gray); }
  .detail-row .value { color: var(--text-dark); font-weight: 500; }
  .action-row {
    display: flex;
    gap: 10px;
    padding: 16px 20px;
    border-top: 1px solid var(--border-color);
  }
  .action-btn {
    flex: 1;
    padding: 10px;
    border-radius: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.2s ease;
  }
  .action-btn.primary {
    background: var(--secondary-purple);
    color: #fff;
  }
  .action-btn.primary:hover {
    background: var(--accent-purple);
  }
  .action-btn.secondary {
    background: var(--bg-light-gray);
    color: var(--text-gray);
  }
  .action-btn.secondary:hover {
    background: #e5e7eb;
  }
  .section-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 12px;
    max-width: 480px;
    width: 100%;
  }
  @media (max-width: 480px) {
    body { padding: 16px; }
  }
</style>
</head>
<body>

<div class="section-label">Compatible proposal</div>
<div class="proposal-card">
  <div class="band-compat">
    <div class="compat-chip is-match"><span class="compat-dot match"></span> Dates match</div>
    <div class="compat-chip is-match"><span class="compat-dot match"></span> 4 weeks</div>
    <div class="compat-chip is-match"><span class="compat-dot match"></span> 1 guest</div>
  </div>
  <div class="band-identity">
    <div class="guest-avatar">J</div>
    <div class="guest-info">
      <h3>Jade <span class="verified-badge">Verified</span></h3>
      <div class="trust-line">Graduate student &middot; Wants to meet you first</div>
    </div>
  </div>
  <div class="band-details">
    <div class="detail-row"><span class="label">Dates</span><span class="value">Sep 15 - Oct 12</span></div>
    <div class="detail-row"><span class="label">Est. earnings</span><span class="value">\$1,617 net</span></div>
    <div class="detail-row"><span class="label">Trial night</span><span class="value">Requested (cleaning covered)</span></div>
  </div>
  <div class="action-row">
    <button class="action-btn secondary">Decline</button>
    <button class="action-btn primary">Review Proposal</button>
  </div>
</div>

<div class="section-label" style="margin-top: 8px;">Incompatible proposal (date mismatch)</div>
<div class="proposal-card mismatch">
  <div class="band-compat">
    <div class="compat-chip is-mismatch"><span class="compat-dot mismatch"></span> Dates: Aug 15</div>
    <div class="compat-chip is-match"><span class="compat-dot match"></span> 3 weeks</div>
    <div class="compat-chip is-match"><span class="compat-dot match"></span> 1 guest</div>
  </div>
  <div class="band-identity">
    <div class="guest-avatar">M</div>
    <div class="guest-info">
      <h3>Matthew</h3>
      <div class="trust-line">Professional &middot; Needs mid-August start</div>
    </div>
  </div>
  <div class="action-row">
    <button class="action-btn secondary" style="flex: 1;">Your space opens Sep 10 &mdash; dates do not match</button>
  </div>
</div>

</body>
</html>`
    },
  {
      id: "ds-ui-1004-005",
      name: "Optimistic Payment Confirmation with Three-Stage Status",
      category: "card",
      source_elements: ["works-003","communicates-007","looks-005","behaves-001","feels-002"],
      journey_phases: ["active_lease","retention"],
      priority: "high",
      description: "A payment status card that shows three distinct states: processing, confirmed, and error. Hemeden nearly abandoned when told payment comes at end of stay (16:20) and only agreed to 24-hours-after-arrival. Norman states 'feedback must be immediate.' This component fills the anxiety window between guest arrival and payment with an optimistic processing indicator, transitions to a confirmed state with prominent amount display, and handles failures with clear explanations. The confirmed state uses a left-accent border and prominent monospace dollar amount, matching the Tier 1 notification treatment from looks-005. Payment is the host's primary feedback signal that the system is working.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Payment Confirmation Status</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-light-gray: #f3f4f6;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --border-color: #e5e7eb;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-light-gray);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    flex-direction: column;
    gap: 20px;
  }
  .status-card {
    max-width: 480px;
    width: 100%;
    border-radius: 14px;
    padding: 20px 24px;
    transition: all 0.3s ease;
  }
  /* Processing state */
  .status-card.processing {
    background: rgb(252,250,255);
    border-left: 4px solid var(--accent-purple);
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }
  .status-label {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-bottom: 8px;
  }
  .processing .status-label {
    color: var(--accent-purple);
  }
  .status-headline {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 4px;
  }
  .status-detail {
    font-size: 14px;
    color: var(--text-gray);
    line-height: 1.5;
  }
  .progress-bar {
    height: 4px;
    background: #e5e7eb;
    border-radius: 2px;
    margin-top: 16px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    width: 60%;
    background: var(--accent-purple);
    border-radius: 2px;
  }
  /* Confirmed state */
  .status-card.confirmed {
    background: rgb(252,250,255);
    border-left: 4px solid var(--secondary-purple);
    box-shadow: 0 2px 8px rgba(49,19,93,0.10);
  }
  .confirmed .status-label {
    color: var(--secondary-purple);
  }
  .amount-row {
    display: flex;
    align-items: baseline;
    gap: 8px;
    margin: 12px 0 4px;
  }
  .amount {
    font-family: 'DM Sans', sans-serif;
    font-size: 32px;
    font-weight: 700;
    color: var(--secondary-purple);
  }
  .amount-label {
    font-size: 14px;
    color: var(--text-gray);
  }
  .confirmed-detail {
    font-size: 13px;
    color: var(--text-gray);
    line-height: 1.5;
  }
  .check-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--secondary-purple);
    margin-bottom: 8px;
  }
  .check-icon svg {
    width: 14px;
    height: 14px;
    stroke: #fff;
    fill: none;
    stroke-width: 2.5;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
  /* Error state */
  .status-card.error-state {
    background: #fef2f2;
    border-left: 4px solid #dc3545;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }
  .error-state .status-label {
    color: #dc3545;
  }
  .error-state .status-headline {
    color: #991b1b;
  }
  .contact-link {
    display: inline-block;
    margin-top: 10px;
    font-size: 13px;
    font-weight: 600;
    color: var(--secondary-purple);
    text-decoration: none;
  }
  .contact-link:hover {
    text-decoration: underline;
  }
  .card-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-dark);
    max-width: 480px;
    width: 100%;
  }
  @media (max-width: 480px) {
    .amount { font-size: 26px; }
  }
</style>
</head>
<body>

<div class="card-label">Processing (guest just arrived)</div>
<div class="status-card processing">
  <div class="status-label">Payment Processing</div>
  <div class="status-headline">Your payout of \$1,617 is on the way</div>
  <div class="status-detail">Jade arrived today. Payment will reach your account within 24 hours.</div>
  <div class="progress-bar"><div class="progress-fill"></div></div>
</div>

<div class="card-label">Confirmed</div>
<div class="status-card confirmed">
  <div class="check-icon">
    <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
  </div>
  <div class="status-label">Payment Received</div>
  <div class="amount-row">
    <span class="amount">\$1,617</span>
    <span class="amount-label">deposited to your account</span>
  </div>
  <div class="confirmed-detail">4-week stay with Jade &middot; Sep 15 - Oct 12 &middot; Deposited Oct 13</div>
</div>

<div class="card-label">Error (rare)</div>
<div class="status-card error-state">
  <div class="status-label">Payment Delayed</div>
  <div class="status-headline">We are resolving a processing issue</div>
  <div class="status-detail">Your payout of \$1,617 is delayed. We will update you within 12 hours. Your guest's stay is not affected.</div>
  <a href="#" class="contact-link">Contact support directly</a>
</div>

</body>
</html>`
    },
  {
      id: "ds-ui-1004-006",
      name: "Four-Week Review Checkpoint Card",
      category: "card",
      source_elements: ["works-007","communicates-007","looks-005","behaves-004","feels-006"],
      journey_phases: ["active_lease","retention"],
      priority: "high",
      description: "A structured checkpoint card that replaces continuous monitoring with a scheduled decision moment. Hemeden negotiated a 4-week review (11:44) and works 9-to-5 (09:43), meaning she cannot monitor continuously. Norman warns that 'poor feedback can be worse than no feedback at all.' This component is a Tier 1 notification that appears at the 4-week mark with a complete status summary (earnings so far, days remaining, guest info) and two clear actions: extend or end. It takes under 60 seconds to complete. Between checkpoints, the dashboard shows a calm status with the next checkpoint date, creating the emotional rhythm of calm-calm-checkpoint-calm that feels-006 prescribes.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4-Week Review Checkpoint</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-light-gray: #f3f4f6;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --border-color: #e5e7eb;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-light-gray);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    flex-direction: column;
    gap: 24px;
  }
  /* Checkpoint card (Tier 1) */
  .checkpoint-card {
    max-width: 480px;
    width: 100%;
    background: rgb(252,250,255);
    border-left: 4px solid var(--secondary-purple);
    border-radius: 0 14px 14px 0;
    box-shadow: 0 2px 12px rgba(49,19,93,0.10);
    padding: 24px;
  }
  .checkpoint-label {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--secondary-purple);
    margin-bottom: 8px;
  }
  .checkpoint-title {
    font-size: 20px;
    font-weight: 700;
    color: var(--primary-purple);
    margin-bottom: 4px;
  }
  .checkpoint-subtitle {
    font-size: 14px;
    color: var(--text-gray);
    line-height: 1.5;
    margin-bottom: 20px;
  }
  .stats-row {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
  }
  .stat-box {
    flex: 1;
    background: #fff;
    border-radius: 10px;
    padding: 14px;
    text-align: center;
    border: 1px solid var(--border-color);
  }
  .stat-value {
    font-family: 'DM Sans', sans-serif;
    font-size: 20px;
    font-weight: 700;
    color: var(--primary-purple);
  }
  .stat-label {
    font-size: 11px;
    color: var(--text-gray);
    margin-top: 2px;
  }
  .guest-summary {
    display: flex;
    align-items: center;
    gap: 12px;
    background: #fff;
    border-radius: 10px;
    padding: 12px 14px;
    border: 1px solid var(--border-color);
    margin-bottom: 20px;
  }
  .guest-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--accent-purple);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: 700;
    color: #fff;
    flex-shrink: 0;
  }
  .guest-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-dark);
  }
  .guest-detail {
    font-size: 12px;
    color: var(--text-gray);
  }
  .actions {
    display: flex;
    gap: 10px;
  }
  .action-btn {
    flex: 1;
    padding: 14px;
    border-radius: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.2s ease;
  }
  .action-btn.extend {
    background: var(--secondary-purple);
    color: #fff;
  }
  .action-btn.extend:hover {
    background: var(--accent-purple);
  }
  .action-btn.end {
    background: #fff;
    color: var(--text-gray);
    border: 1.5px solid var(--border-color);
  }
  .action-btn.end:hover {
    border-color: #9ca3af;
    color: var(--text-dark);
  }
  /* Calm between-checkpoint state */
  .calm-state {
    max-width: 480px;
    width: 100%;
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    padding: 20px 24px;
  }
  .calm-header {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 4px;
  }
  .calm-detail {
    font-size: 14px;
    color: var(--text-gray);
    line-height: 1.5;
  }
  .next-checkpoint {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid var(--border-color);
    font-size: 13px;
    color: var(--text-gray);
  }
  .next-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--accent-purple);
  }
  .card-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-dark);
    max-width: 480px;
    width: 100%;
  }
  @media (max-width: 480px) {
    .stats-row { flex-direction: column; }
    .actions { flex-direction: column; }
  }
</style>
</head>
<body>

<div class="card-label">Checkpoint: 4-Week Review (Tier 1 Notification)</div>
<div class="checkpoint-card">
  <div class="checkpoint-label">4-Week Review</div>
  <div class="checkpoint-title">Would you like to extend?</div>
  <div class="checkpoint-subtitle">Your 4-week hosting period with Jade is complete. Here is a summary.</div>

  <div class="stats-row">
    <div class="stat-box">
      <div class="stat-value">\$1,617</div>
      <div class="stat-label">Total earned</div>
    </div>
    <div class="stat-box">
      <div class="stat-value">28</div>
      <div class="stat-label">Nights hosted</div>
    </div>
    <div class="stat-box">
      <div class="stat-value">0</div>
      <div class="stat-label">Issues reported</div>
    </div>
  </div>

  <div class="guest-summary">
    <div class="guest-avatar">J</div>
    <div>
      <div class="guest-name">Jade</div>
      <div class="guest-detail">Sep 15 - Oct 12 &middot; All payments received on time</div>
    </div>
  </div>

  <div class="actions">
    <button class="action-btn end">End Stay</button>
    <button class="action-btn extend">Extend 4 More Weeks</button>
  </div>
</div>

<div class="card-label">Between checkpoints: calm dashboard state</div>
<div class="calm-state">
  <div class="calm-header">Everything is on track</div>
  <div class="calm-detail">Jade is in week 2 of 4. Next payment arrives Friday, Sep 27.</div>
  <div class="next-checkpoint">
    <span class="next-dot"></span>
    Next: 4-week review on Oct 12
  </div>
</div>

</body>
</html>`
    },
  {
      id: "ds-ui-1004-007",
      name: "Verbal-to-Digital Continuity Bridge",
      category: "card",
      source_elements: ["works-006","communicates-006","looks-007","behaves-006","feels-005"],
      journey_phases: ["onboarding","listing_creation"],
      priority: "high",
      description: "A personalized first-login welcome screen that reflects the specific details discussed in the host's onboarding call. Hemeden is a novice (13:48: 'I just started doing this') whose entire conceptual model was built from a phone call with Bryant. Norman warns that 'when the system image is incoherent or inappropriate, the user cannot easily use the device.' This component bridges the verbal model to digital reality by showing the agent's name, the host's call-discussed parameters as editable summary chips ($75/night, max 4 weeks, available Sep 10+, 1 guest), and a pending next-steps checklist. The host should recognize at least 3 call elements within 5 seconds. This is a one-time ceremony that converts conversation into a confirmed digital profile.",
      html_css_snippet: `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Welcome - Continuity Bridge</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-purple: #31135D;
    --secondary-purple: rgb(109, 49, 194);
    --accent-purple: rgb(140, 104, 238);
    --bg-light-gray: #f3f4f6;
    --text-dark: #1a1a1a;
    --text-gray: #6b7280;
    --border-color: #e5e7eb;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-light-gray);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
  }
  .bridge-card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    max-width: 520px;
    width: 100%;
    overflow: hidden;
  }
  .bridge-header {
    background: rgb(252,250,255);
    padding: 24px 28px;
    border-bottom: 1px solid var(--border-color);
  }
  .agent-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
  }
  .agent-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--secondary-purple);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: 700;
    color: #fff;
    flex-shrink: 0;
  }
  .agent-info {
    flex: 1;
  }
  .agent-name {
    font-size: 15px;
    font-weight: 600;
    color: var(--text-dark);
  }
  .agent-role {
    font-size: 13px;
    color: var(--text-gray);
  }
  .bridge-message {
    font-size: 14px;
    color: var(--text-dark);
    line-height: 1.5;
  }
  .bridge-body {
    padding: 24px 28px;
  }
  .section-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-gray);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-bottom: 10px;
  }
  .summary-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 24px;
  }
  .chip {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    border-radius: 20px;
    border: 1.5px solid var(--secondary-purple);
    background: rgb(252,250,255);
    font-size: 14px;
    font-weight: 500;
    color: var(--secondary-purple);
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .chip:hover {
    background: #ede9f7;
    box-shadow: 0 1px 4px rgba(109,49,194,0.12);
  }
  .chip-edit {
    font-size: 11px;
    opacity: 0.6;
  }
  .next-steps {
    margin-bottom: 24px;
  }
  .step-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 0;
    border-bottom: 1px solid var(--border-color);
  }
  .step-item:last-child {
    border-bottom: none;
  }
  .step-status {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 1px;
  }
  .step-status.pending {
    border: 2px solid var(--border-color);
    background: #fff;
  }
  .step-status.ready {
    border: 2px solid var(--secondary-purple);
    background: rgb(252,250,255);
  }
  .step-status.ready::after {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--secondary-purple);
  }
  .step-text {
    font-size: 14px;
    color: var(--text-dark);
    line-height: 1.4;
  }
  .step-text .action-link {
    color: var(--secondary-purple);
    font-weight: 500;
    text-decoration: none;
  }
  .step-text .action-link:hover {
    text-decoration: underline;
  }
  .confirm-btn {
    width: 100%;
    padding: 14px 24px;
    background: var(--secondary-purple);
    color: #fff;
    border: none;
    border-radius: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.1s ease;
  }
  .confirm-btn:hover {
    background: var(--accent-purple);
    transform: translateY(-1px);
  }
  .adjust-note {
    text-align: center;
    font-size: 12px;
    color: var(--text-gray);
    margin-top: 10px;
  }
  @media (max-width: 480px) {
    .bridge-header, .bridge-body { padding: 20px; }
  }
</style>
</head>
<body>
<div class="bridge-card">
  <div class="bridge-header">
    <div class="agent-row">
      <div class="agent-avatar">B</div>
      <div class="agent-info">
        <div class="agent-name">Bryant</div>
        <div class="agent-role">Your hosting coordinator</div>
      </div>
    </div>
    <div class="bridge-message">Bryant set up your hosting profile based on your conversation. Here is what we have so far.</div>
  </div>

  <div class="bridge-body">
    <div class="section-title">Your hosting details</div>
    <div class="summary-chips">
      <span class="chip">\$75/night <span class="chip-edit">edit</span></span>
      <span class="chip">Max 4 weeks <span class="chip-edit">edit</span></span>
      <span class="chip">Available Sep 10+ <span class="chip-edit">edit</span></span>
      <span class="chip">1 guest <span class="chip-edit">edit</span></span>
    </div>

    <div class="section-title">Next steps</div>
    <div class="next-steps">
      <div class="step-item">
        <div class="step-status ready"></div>
        <div class="step-text"><a href="#" class="action-link">Review booking agreement</a> (sent to your email)</div>
      </div>
      <div class="step-item">
        <div class="step-status pending"></div>
        <div class="step-text">Confirm your local tax rate (~14% estimated for your area)</div>
      </div>
      <div class="step-item">
        <div class="step-status pending"></div>
        <div class="step-text">Meet Jade &mdash; trial night pending her request</div>
      </div>
    </div>

    <button class="confirm-btn">Looks right &mdash; let's continue</button>
    <div class="adjust-note">If anything looks different from what you discussed, tap a chip to adjust.</div>
  </div>
</div>
</body>
</html>`
    }
];

function createSrcdoc(snippet) {
  return snippet;
}

function renderCards() {
  const grid = document.getElementById('elementGrid');
  const search = document.getElementById('searchInput').value.toLowerCase();
  const checkedPhases = Array.from(document.querySelectorAll('[data-filter-for="phase"] input:checked')).map(c => c.value);

  let filtered = ELEMENTS.filter(el => {
    if (search && !el.name.toLowerCase().includes(search) && !el.description.toLowerCase().includes(search)) return false;
    if (checkedPhases.length && !el.journey_phases.some(p => checkedPhases.includes(p))) return false;
    return true;
  });

  document.getElementById('resultCount').textContent = filtered.length + ' element' + (filtered.length !== 1 ? 's' : '');

  if (!filtered.length) {
    grid.innerHTML = '<div class="lib-empty">No elements match your filters.</div>';
    return;
  }

  grid.innerHTML = filtered.map((el, i) => {
    const phases = el.journey_phases.map(p => '<span class="lib-card__phase">' + p.replace(/_/g, ' ') + '</span>').join('');
    const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');
    return '<div class="lib-card" data-idx="' + ELEMENTS.indexOf(el) + '">' +
      '<div class="lib-card__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" loading="lazy" sandbox="allow-same-origin"></iframe></div>' +
      '<div class="lib-card__body">' +
        '<div class="lib-card__top-row"><span class="lib-card__cat">UI Element</span><span class="lib-card__id">' + el.id + '</span></div>' +
        '<div class="lib-card__name">' + el.name + '</div>' +
        '<div class="lib-card__desc">' + el.description + '</div>' +
        '<div class="lib-card__phases">' + phases + '</div>' +
        '<div class="lib-card__sources"><strong>Sources:</strong> ' + sources + '</div>' +
      '</div></div>';
  }).join('');
}

function escapeAttr(s) {
  return s.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function openModal(idx) {
  const el = ELEMENTS[idx];
  const overlay = document.getElementById('modalOverlay');
  const modal = document.getElementById('modalContent');
  const phases = el.journey_phases.map(p => '<span class="lib-card__phase" style="font-size:12px;padding:4px 10px;">' + p.replace(/_/g, ' ') + '</span>').join('');
  const sources = el.source_elements.map(s => '<code>' + s + '</code>').join(' ');

  modal.innerHTML =
    '<div class="lib-modal__preview"><iframe srcdoc="' + escapeAttr(el.html_css_snippet) + '" sandbox="allow-same-origin"></iframe><button class="lib-modal__close" onclick="closeModal()">&times;</button></div>' +
    '<div class="lib-modal__content">' +
      '<div class="lib-modal__header"><h2 class="lib-modal__title">' + el.name + '</h2></div>' +
      '<p class="lib-modal__desc">' + el.description + '</p>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Journey Phases</div><div class="lib-modal__phases-row">' + phases + '</div></div>' +
      '<div class="lib-modal__section"><div class="lib-modal__section-title">Source Elements</div><div class="lib-modal__sources-row">' + sources + '</div></div>' +
    '</div>';

  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

// Event listeners
document.getElementById('searchInput').addEventListener('input', renderCards);
document.querySelectorAll('.lib-filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const dropdown = btn.nextElementSibling;
    dropdown.classList.toggle('open');
    btn.classList.toggle('active');
  });
});
document.querySelectorAll('.lib-filter-dropdown input').forEach(cb => {
  cb.addEventListener('change', renderCards);
});
document.getElementById('elementGrid').addEventListener('click', e => {
  const card = e.target.closest('.lib-card');
  if (card) openModal(parseInt(card.dataset.idx));
});
document.getElementById('modalOverlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) closeModal();
});
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
window.addEventListener('scroll', () => {
  document.getElementById('toolbar').classList.toggle('scrolled', window.scrollY > 10);
});

// Initial render
renderCards();
</script>
</body>
</html>